import{r as i,I as m,ag as p,K as j,j as e,z as a}from"./index-UmL11Jau.js";const g=({order:s,onClose:r})=>{let n="";try{const l=JSON.parse(s.items);n=JSON.stringify(l,null,2)}catch{n=s.items}return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:r,style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3}}),e.jsxs(a.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",padding:"1.5rem",zIndex:1001,width:"90%",maxWidth:"600px",border:"1px solid #ddd",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsxs("h3",{style:{borderBottom:"1px solid #ddd",paddingBottom:"0.5rem",marginBottom:"1rem"},children:["Order Details (ID: ",s.id,")"]}),e.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:1.5},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",s.created_at]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",s.getOrderStatus()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total:"})," UGX ",s.order_total]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery Method:"})," ",s.delivery_method]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shipping Cost:"})," UGX ",s.delivery_amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payable Amount:"})," UGX ",s.payable_amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Confirmation:"})," ",s.payment_confirmation]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Customer Name:"})," ",s.customer_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s.mail||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",s.customer_phone_number_1||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",s.delivery_address_text," -"," ",s.delivery_address_details]}),e.jsx("p",{children:e.jsx("strong",{children:"Order Instructions:"})}),e.jsx("pre",{style:{background:"#f8f9fa",padding:"0.5rem"},children:s.order_details}),e.jsx("p",{children:e.jsx("strong",{children:"Items:"})}),e.jsx("pre",{style:{background:"#f8f9fa",padding:"0.5rem"},children:n})]}),e.jsx("div",{style:{textAlign:"right",marginTop:"1rem"},children:e.jsx("button",{className:"btn btn-outline-secondary",onClick:r,children:"Close"})})]})]})},u=()=>{const[s,r]=i.useState([]),[n,l]=i.useState(!0),[d,h]=i.useState(""),[c,o]=i.useState(null),x=m();return i.useEffect(()=>{(async()=>{try{const t=await p.fetchItems();r(t)}catch(t){h(t.toString()),j.error("Failed to load orders")}finally{l(!1)}})()},[]),n?e.jsx(a.div,{className:"container py-5 text-center",initial:{opacity:0},animate:{opacity:1},children:e.jsx("h2",{children:"Loading orders..."})}):d?e.jsxs(a.div,{className:"container py-5 text-center",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("h2",{children:"Error loading orders"}),e.jsx("p",{children:d})]}):e.jsxs(a.div,{className:"container py-5",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("h1",{className:"mb-5 text-center",style:{fontWeight:"bold",color:"#114786"},children:"My Orders"}),s.length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"lead text-muted",children:"You have not placed any orders yet."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>x("/shop"),children:"Shop Now"})]}):e.jsx("div",{className:"row",children:s.map(t=>e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"p-3 border",style:{borderRadius:0,border:"1px solid #ddd"},children:[e.jsxs("h5",{style:{marginBottom:"0.5rem",color:"#114786"},children:["Order #",t.id]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Date:"})," ",t.created_at]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Status:"})," ",t.getOrderStatus()]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Total:"})," UGX ",t.order_total]}),e.jsxs("div",{className:"d-flex justify-content-between mt-2",children:[e.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>o(t),children:"View Details"}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>x(`/admin/my-orders/${t.id}`),children:"View Details"})]})]})},t.id))}),c&&e.jsx(g,{order:c,onClose:()=>o(null)})]})};export{u as default};
