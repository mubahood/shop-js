import{g as E,e as R,r as m,j as e,L as T,T as h,A as I,ad as A}from"./index-BUlTi-RG.js";const D=()=>{const{user:a}=E(n=>n.auth),z=R(),[t,b]=m.useState(!1),[C,j]=m.useState(!1),[v,y]=m.useState(!1),[i,c]=m.useState({}),[s,x]=m.useState({first_name:"",last_name:"",email:"",phone_number:"",dob:"",sex:"",intro:""});m.useEffect(()=>{if(a){console.log("User object:",a);const n={first_name:a.first_name||"",last_name:a.last_name||"",email:a.email||"",phone_number:a.phone_number_1||"",dob:a.date_of_birth||"",sex:a.sex||"",intro:a.intro||""};console.log("Initialized profile:",n),x(n)}},[a]);const l=n=>{const{name:r,value:p}=n.target;x(d=>({...d,[r]:p})),i[r]&&c(d=>{const u={...d};return delete u[r],u})},g=(n,r)=>{switch(n){case"first_name":if(!r.trim()||r.trim().length<2)return"First name is required and must be at least 2 characters";break;case"last_name":if(!r.trim()||r.trim().length<2)return"Last name is required and must be at least 2 characters";break;case"phone_number":if(!r.trim()||r.trim().length<5)return"Phone number is required and must be at least 5 characters";break;case"email":if(r&&r.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.trim()))return"Please enter a valid email address";break;case"intro":if(r&&r.length>500)return"Bio cannot exceed 500 characters";break}return null},k=async n=>{if(n.preventDefault(),!(a!=null&&a.id)){h.error("User not found");return}const r={},p=g("first_name",s.first_name);p&&(r.first_name=p);const d=g("last_name",s.last_name);d&&(r.last_name=d);const u=g("phone_number",s.phone_number);u&&(r.phone_number=u);const _=g("email",s.email);_&&(r.email=_);const N=g("intro",s.intro);if(N&&(r.intro=N),Object.keys(r).length>0){c(r),h.error("Please fix the validation errors");return}c({}),y(!0);try{const o={first_name:s.first_name.trim(),last_name:s.last_name.trim(),phone_number:s.phone_number.trim(),email:s.email.trim()||void 0,dob:s.dob||void 0,sex:s.sex||void 0,intro:s.intro.trim()||void 0};if(!o.first_name||o.first_name.length<2){c(f=>({...f,first_name:"First name is required and must be at least 2 characters"})),h.error("Please check the form data");return}if(!o.last_name||o.last_name.length<2){c(f=>({...f,last_name:"Last name is required and must be at least 2 characters"})),h.error("Please check the form data");return}if(!o.phone_number||o.phone_number.length<5){c(f=>({...f,phone_number:"Phone number is required and must be at least 5 characters"})),h.error("Please check the form data");return}console.log("Sending profile data:",o);const S=await I.updateProfile(o);S&&z(A(S)),b(!1),j(!0),setTimeout(()=>j(!1),5e3)}catch{}finally{y(!1)}},w=()=>{a&&x({first_name:a.first_name||"",last_name:a.last_name||"",email:a.email||"",phone_number:a.phone_number_1||"",dob:a.date_of_birth||"",sex:a.sex||"",intro:a.intro||""}),c({}),b(!1)},P=()=>{c({}),b(!0)};return a?e.jsxs("div",{className:"acc-profile-container",children:[e.jsxs("div",{className:"acc-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"acc-page-title",children:"My Profile"}),e.jsx("p",{className:"acc-page-subtitle",children:"Manage your personal information and account settings"})]}),!t&&e.jsx("div",{style:{display:"flex",gap:"var(--spacing-2)"},children:e.jsxs("button",{className:"acc-btn acc-btn-outline",onClick:P,children:[e.jsx("i",{className:"bi bi-pencil",style:{marginRight:"8px"}}),"Edit Profile"]})})]}),C&&e.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--success-bg)",borderColor:"var(--success-border)",color:"var(--success-color)",marginBottom:"var(--spacing-4)"},children:e.jsxs("div",{className:"acc-card-body",children:[e.jsx("i",{className:"bi bi-check-circle",style:{marginRight:"8px"}}),"Profile updated successfully!"]})}),e.jsxs("div",{className:"acc-card",style:{marginBottom:"var(--spacing-6)"},children:[e.jsx("div",{className:"acc-card-header",children:e.jsxs("h3",{className:"acc-card-title",children:[e.jsx("i",{className:"bi bi-person-circle"}),"Personal Information"]})}),e.jsx("div",{className:"acc-card-body",children:e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"var(--spacing-4)",marginBottom:"var(--spacing-4)"},children:[e.jsxs("div",{className:"acc-form-group",children:[e.jsx("label",{className:"acc-form-label",children:"First Name"}),e.jsx("input",{type:"text",name:"first_name",className:`acc-form-control ${i.first_name?"error":""}`,value:s.first_name,onChange:l,disabled:!t,placeholder:"Enter your first name"}),i.first_name&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.first_name})]}),e.jsxs("div",{className:"acc-form-group",children:[e.jsx("label",{className:"acc-form-label",children:"Last Name"}),e.jsx("input",{type:"text",name:"last_name",className:`acc-form-control ${i.last_name?"error":""}`,value:s.last_name,onChange:l,disabled:!t,placeholder:"Enter your last name"}),i.last_name&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.last_name})]})]}),e.jsxs("div",{className:"acc-form-group",style:{marginBottom:"var(--spacing-4)"},children:[e.jsxs("label",{className:"acc-form-label",children:[e.jsx("i",{className:"bi bi-envelope",style:{marginRight:"8px"}}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",className:`acc-form-control ${i.email?"error":""}`,value:s.email,onChange:l,disabled:!t,placeholder:"Enter your email address"}),i.email&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.email})]}),e.jsxs("div",{className:"acc-form-group",style:{marginBottom:"var(--spacing-4)"},children:[e.jsxs("label",{className:"acc-form-label",children:[e.jsx("i",{className:"bi bi-telephone",style:{marginRight:"8px"}}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone_number",className:`acc-form-control ${i.phone_number?"error":""}`,value:s.phone_number,onChange:l,disabled:!t,placeholder:"Enter your phone number"}),i.phone_number&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.phone_number})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--spacing-4)",marginBottom:"var(--spacing-4)"},children:[e.jsxs("div",{className:"acc-form-group",children:[e.jsxs("label",{className:"acc-form-label",children:[e.jsx("i",{className:"bi bi-calendar-event",style:{marginRight:"8px"}}),"Date of Birth"]}),e.jsx("input",{type:"date",name:"dob",className:"acc-form-control",value:s.dob,onChange:l,disabled:!t})]}),e.jsxs("div",{className:"acc-form-group",children:[e.jsx("label",{className:"acc-form-label",children:"Gender"}),e.jsxs("select",{name:"sex",className:"acc-form-control",value:s.sex,onChange:l,disabled:!t,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{className:"acc-form-group",children:[e.jsx("label",{className:"acc-form-label",children:"About Me"}),e.jsx("textarea",{name:"intro",className:`acc-form-control ${i.intro?"error":""}`,rows:4,value:s.intro,onChange:l,disabled:!t,placeholder:"Tell us a bit about yourself...",style:{resize:"vertical",minHeight:"100px"}}),i.intro&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.intro}),e.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:s.intro.length>500?"var(--danger-color)":"var(--text-color-medium)",marginTop:"var(--spacing-1)"},children:[s.intro.length,"/500 characters"]})]}),t&&e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-2)",marginTop:"var(--spacing-4)",paddingTop:"var(--spacing-4)",borderTop:"1px solid var(--border-color)"},children:[e.jsx("button",{type:"button",className:"acc-btn acc-btn-outline",onClick:w,disabled:v,children:"Cancel"}),e.jsx("button",{type:"submit",className:"acc-btn acc-btn-primary",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid currentColor",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"8px"}}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-check-lg",style:{marginRight:"8px"}}),"Save Changes"]})})]})]})})]}),e.jsxs("div",{className:"acc-card",style:{marginBottom:"var(--spacing-6)"},children:[e.jsx("div",{className:"acc-card-header",children:e.jsxs("h3",{className:"acc-card-title",children:[e.jsx("i",{className:"bi bi-info-circle"}),"Account Information"]})}),e.jsx("div",{className:"acc-card-body",children:e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Account ID"}),e.jsxs("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)",fontFamily:"monospace"},children:["#",a.id]})]}),e.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",backgroundColor:"var(--success-color)",color:"var(--white)",borderRadius:"var(--border-radius)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)"},children:"Active"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Member Since"}),e.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:a.created_at?new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})})]})})]}),e.jsxs("div",{className:"acc-card",children:[e.jsx("div",{className:"acc-card-header",children:e.jsxs("h3",{className:"acc-card-title",children:[e.jsx("i",{className:"bi bi-shield-lock"}),"Security Settings"]})}),e.jsx("div",{className:"acc-card-body",children:e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Change Password"}),e.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Update your password to keep your account secure"})]}),e.jsxs(T,{to:"/account/change-password",className:"acc-btn acc-btn-outline acc-btn-sm",children:[e.jsx("i",{className:"bi bi-key",style:{marginRight:"6px"}}),"Change"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Email Verification"}),e.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Verify your email address for added security"})]}),e.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",backgroundColor:a.verification?"var(--success-color)":"var(--warning-color)",color:"var(--white)",borderRadius:"var(--border-radius)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)"},children:a.verification?"Verified":"Pending"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Account Deletion"}),e.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Permanently delete your account and all data"})]}),e.jsxs("button",{className:"acc-btn acc-btn-outline acc-btn-sm",style:{borderColor:"var(--danger-color)",color:"var(--danger-color)"},onClick:()=>h.info("Account deletion feature coming soon"),children:[e.jsx("i",{className:"bi bi-trash",style:{marginRight:"6px"}}),"Delete"]})]})]})})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):e.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--warning-bg)",borderColor:"var(--warning-border)",color:"var(--warning-color)"},children:e.jsxs("div",{className:"acc-card-body",children:[e.jsx("i",{className:"bi bi-exclamation-triangle",style:{marginRight:"8px"}}),"Please log in to view your profile."]})})};export{D as default};
