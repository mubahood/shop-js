var s=(s,e,r)=>new Promise(((a,i)=>{var n=s=>{try{l(r.next(s))}catch(e){i(e)}},t=s=>{try{l(r.throw(s))}catch(e){i(e)}},l=s=>s.done?a(s.value):Promise.resolve(s.value).then(n,t);l((r=r.apply(s,e)).next())}));import{j as e,a as r,R as a,b as i,B as n,c as t,S as l,A as c,F as d}from"./vendor-bootstrap-D-I_tXzc.js";import{r as o}from"./vendor-react-BEzjZhyF.js";import{f as h,G as m,H as x,v as j,I as g,L as u,T as p,A as v}from"./index--azPsTEf.js";import{C as N}from"./CartService-NyGp0X2F.js";import"./vendor-redux-Dj4qHuPE.js";const y=()=>{const[v,y]=o.useState(134),[C,f]=o.useState(""),[b,S]=o.useState(),[P,I]=o.useState(0),{data:k,isLoading:w,error:T,refetch:A}=h({page:1,limit:5}),{data:B,isLoading:z,error:F}=m(),{data:L,isLoading:E,error:H}=x(),{data:_,isLoading:O,error:D}=j(v,{skip:!v}),{data:J,isLoading:M,error:R}=g({query:C,page:1},{skip:!C||C.length<2});o.useEffect((()=>{const s=()=>{I(N.getCartItemCount())};return s(),window.addEventListener("storage",s),()=>{window.removeEventListener("storage",s)}}),[]);const V=e=>s(void 0,null,(function*(){N.addToCart(e.id,1,{},{name:e.name,price:e.price_1})&&I(N.getCartItemCount())}));return e.jsxs(r,{className:"py-5",children:[e.jsx(a,{className:"mb-4",children:e.jsxs(i,{children:[e.jsx("h1",{children:"API Integration Test Page"}),e.jsx("p",{className:"text-muted",children:"Testing real Laravel API endpoints and cart functionality."}),e.jsxs("div",{className:"d-flex gap-2 mb-3",children:[e.jsx(n,{variant:"primary",onClick:()=>s(void 0,null,(function*(){try{p.info("Testing API methods..."),p.success("API methods tested successfully! Check console for results.")}catch(s){p.error("API test failed: "+s)}})),children:"Test API Methods"}),e.jsx(n,{variant:"success",onClick:()=>s(void 0,null,(function*(){try{p.info("Testing cart functions..."),N.addToCart(1,2,{color:"red"},{name:"Test Product 1",price:"100000"}),N.addToCart(2,1,{size:"large"},{name:"Test Product 2",price:"200000"});yield N.getCartTotal(),yield N.getFormattedCartTotal();I(N.getCartItemCount()),p.success("Cart functions tested! Check console for results.")}catch(s){p.error("Cart test failed: "+s)}})),children:"Test Cart Functions"}),e.jsx(n,{variant:"info",onClick:()=>window.location.reload(),children:"Refresh Page"}),e.jsxs("span",{className:"ms-auto badge bg-secondary fs-6",children:["Cart Items: ",P]})]})]})}),e.jsx(a,{className:"mb-4",children:e.jsx(i,{children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h4",{children:["Categories (",(null==B?void 0:B.length)||0,")"]})}),e.jsxs(t.Body,{children:[z&&e.jsx(l,{animation:"border"}),F&&e.jsxs(c,{variant:"danger",children:["Error loading categories: ",JSON.stringify(F)]}),B&&e.jsx(a,{children:B.slice(0,6).map((s=>e.jsx(i,{md:4,className:"mb-3",children:e.jsx(t,{children:e.jsxs(t.Body,{children:[e.jsx("h6",{children:s.category}),e.jsxs("p",{className:"small text-muted",children:["ID: ",s.id," | Products: ",s.category_text,s.isShownInBanner()&&e.jsx("span",{className:"badge bg-warning ms-2",children:"Banner"})]}),e.jsx(n,{size:"sm",variant:"outline-primary",onClick:()=>S(s.id),children:"Filter Products"})]})})},s.id)))})]})]})})}),e.jsx(a,{className:"mb-4",children:e.jsx(i,{children:e.jsxs(t,{children:[e.jsxs(t.Header,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h4",{children:["Products (",(null==k?void 0:k.total)||0,")"]}),e.jsxs("div",{className:"d-flex gap-2",children:[b&&e.jsx(n,{size:"sm",variant:"outline-secondary",onClick:()=>S(void 0),children:"Clear Filter"}),e.jsx(n,{size:"sm",variant:"outline-primary",onClick:()=>A(),children:"Refresh"})]})]}),e.jsxs(t.Body,{children:[w&&e.jsx(l,{animation:"border"}),T&&e.jsxs(c,{variant:"danger",children:["Error loading products: ",JSON.stringify(T)]}),k&&e.jsx(a,{children:k.data.map((s=>e.jsx(i,{md:6,lg:4,className:"mb-3",children:e.jsxs(t,{children:[e.jsx(t.Img,{variant:"top",src:s.getMainImage(),style:{height:"200px",objectFit:"cover"}}),e.jsxs(t.Body,{children:[e.jsx("h6",{children:s.name}),e.jsx("p",{className:"text-success fw-bold",children:s.getFormattedPrice()}),e.jsxs("p",{className:"small text-muted",children:["Category: ",s.category_text," | Colors: ",s.hasColors()?s.getColors().join(", "):"None"," | Stock: ",s.isInStock()?"Yes":"No"]}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx(n,{size:"sm",variant:"primary",onClick:()=>V(s),children:"Add to Cart"}),e.jsx(n,{size:"sm",variant:"outline-info",onClick:()=>y(s.id),children:"View Details"})]})]})]})},s.id)))})]})]})})}),e.jsx(a,{className:"mb-4",children:e.jsx(i,{children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsx("h4",{children:"Search Products"})}),e.jsxs(t.Body,{children:[e.jsx(d.Control,{type:"text",placeholder:"Search for products...",value:C,onChange:s=>f(s.target.value),className:"mb-3"}),M&&e.jsx(l,{animation:"border"}),R&&e.jsxs(c,{variant:"danger",children:["Search error: ",JSON.stringify(R)]}),J&&C&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-muted",children:["Found ",J.total,' results for "',C,'"']}),e.jsx(a,{children:J.data.slice(0,3).map((s=>e.jsx(i,{md:4,className:"mb-3",children:e.jsx(t,{children:e.jsxs(t.Body,{children:[e.jsx("h6",{children:s.name}),e.jsx("p",{className:"text-success",children:s.getFormattedPrice()}),e.jsx(n,{size:"sm",variant:"primary",onClick:()=>V(s),children:"Add to Cart"})]})})},s.id)))})]})]})]})})}),e.jsx(a,{className:"mb-4",children:e.jsx(i,{children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h4",{children:["Single Product Details (ID: ",v,")"]})}),e.jsxs(t.Body,{children:[O&&e.jsx(l,{animation:"border"}),D&&e.jsxs(c,{variant:"danger",children:["Error loading product: ",JSON.stringify(D)]}),_&&e.jsxs(a,{children:[e.jsx(i,{md:4,children:e.jsx("img",{src:_.getMainImage(),alt:_.name,className:"img-fluid rounded"})}),e.jsxs(i,{md:8,children:[e.jsx("h3",{children:_.name}),e.jsx("p",{className:"text-success h4",children:_.getFormattedPrice()}),e.jsx("p",{children:_.description||"No description available"}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-sm-4",children:e.jsx("strong",{children:"Category:"})}),e.jsx("div",{className:"col-sm-8",children:_.category_text})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-sm-4",children:e.jsx("strong",{children:"Stock:"})}),e.jsx("div",{className:"col-sm-8",children:_.isInStock()?"In Stock":"Out of Stock"})]}),_.hasColors()&&e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-sm-4",children:e.jsx("strong",{children:"Colors:"})}),e.jsx("div",{className:"col-sm-8",children:_.getColors().join(", ")})]}),_.hasSizes()&&e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-sm-4",children:e.jsx("strong",{children:"Sizes:"})}),e.jsx("div",{className:"col-sm-8",children:_.getSizes().join(", ")})]}),e.jsx(n,{variant:"primary",size:"lg",onClick:()=>V(_),children:"Add to Cart"})]})]})]})]})})}),e.jsx(a,{className:"mb-4",children:e.jsx(i,{children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h4",{children:["Vendors (",(null==L?void 0:L.length)||0,")"]})}),e.jsxs(t.Body,{children:[E&&e.jsx(l,{animation:"border"}),H&&e.jsxs(c,{variant:"danger",children:["Error loading vendors: ",JSON.stringify(H)]}),L&&e.jsx(a,{children:L.slice(0,4).map((s=>e.jsx(i,{md:6,className:"mb-3",children:e.jsx(t,{children:e.jsxs(t.Body,{children:[e.jsx("h6",{children:s.name||`${s.first_name} ${s.last_name}`}),e.jsxs("p",{className:"small text-muted",children:["Business: ",s.business_name||"N/A"," | Status: ",s.status," | Email: ",s.email||"N/A"]})]})})},s.id)))})]})]})})}),e.jsx(a,{children:e.jsx(i,{children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsx("h4",{children:"Navigation"})}),e.jsx(t.Body,{children:e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsx(u,{to:"/",className:"btn btn-outline-primary",children:"Home"}),e.jsx(u,{to:"/products",className:"btn btn-outline-primary",children:"Products Page"}),e.jsx(u,{to:"/categories",className:"btn btn-outline-primary",children:"Categories Page"}),e.jsxs(u,{to:"/cart",className:"btn btn-outline-primary",children:["Cart (",P,")"]}),e.jsx(u,{to:"/account",className:"btn btn-outline-primary",children:"Account"}),e.jsx(u,{to:"/toast-demo",className:"btn btn-outline-secondary",children:"Toast Demo"})]})})]})})})]})};export{y as default};
