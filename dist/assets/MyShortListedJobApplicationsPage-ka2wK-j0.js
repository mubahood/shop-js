import{R as C,j as e,ap as F,p as b,r,K as B,af as E,ab as L,ac as O,z,aj as H,aq as f,ak as V,ar as q,al as G,am as S,an as K,ao as g,_ as U,M as j}from"./index-D3ojX_Fy.js";import{M as W}from"./MyJonApplicationModel-B4KyBT13.js";const Y={},k=C.memo(({status:n})=>{let s="bg-secondary";switch(n){case"Pending":s="bg-warning";break;case"Interview":s="bg-info";break;case"Hired":s="bg-success";break;case"Declined":s="bg-danger";break}return e.jsx(F,{className:s,children:n})});k.displayName="StatusBadge";const A=C.memo(({app:n,idx:s,currentPage:t,onViewDetails:c})=>{var i;return e.jsxs("tr",{children:[e.jsx("td",{children:(t-1)*10+(s+1)}),e.jsx("td",{children:n.job_text||n.job_id}),e.jsx("td",{children:e.jsx(k,{status:n.status})}),e.jsx("td",{children:((i=n.created_at)==null?void 0:i.split("T")[0])||"N/A"}),e.jsx("td",{children:n.interview_scheduled_at?n.interview_scheduled_at.split("T")[0]:"N/A"}),e.jsx("td",{children:e.jsx(b,{variant:"outline-primary",size:"sm",onClick:()=>c(n),children:"View"})})]},n.id)});A.displayName="JobApplicationRow";const Q=({showModal:n,selectedApp:s,onCloseModal:t})=>{var c;return s?e.jsxs(j,{show:n,onHide:t,size:"lg",centered:!0,children:[e.jsx(j.Header,{closeButton:!0,children:e.jsxs(j.Title,{children:["Application for: ",s.job_text||s.job_id]})}),e.jsxs(j.Body,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Status:"})," ",s.status]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Applied On:"})," ",(c=s.created_at)==null?void 0:c.split("T")[0]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Applicant Message:"})," ",e.jsx("br",{})," ",s.applicant_message||"No message"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Attachments:"})," ",s.attachments||"None"]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Employer Message:"})," ",e.jsx("br",{})," ",s.employer_message||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Decline Reason:"})," ",s.decline_reason||"N/A"]})]})]}),e.jsx("hr",{}),e.jsx("h6",{children:"Interview Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Scheduled At:"})," ",s.interview_scheduled_at?s.interview_scheduled_at.split("T")[0]:"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",s.interview_location||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.interview_type||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Result:"})," ",s.interview_result||"Pending"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interviewer Notes:"})," ",s.interviewer_notes||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interviewer Rating:"})," ",s.interviewer_rating||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interviewee Feedback:"})," ",s.interviewee_feedback||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Interviewee Rating:"})," ",s.interviewee_rating||"N/A"]}),e.jsx("hr",{}),e.jsx("h6",{children:"Onboarding"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contract URL:"})," ",s.contract_url||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Onboarding Start:"})," ",s.onboarding_start_date||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Onboarding Notes:"})," ",s.onboarding_notes||"N/A"]})]}),e.jsx(j.Footer,{children:e.jsx(b,{variant:"secondary",onClick:t,children:"Close"})})]}):null},$=()=>{const[n,s]=r.useState([]),[t,c]=r.useState(!1),[i,N]=r.useState(""),[l,v]=r.useState(1),[d,M]=r.useState(1),[h,T]=r.useState(""),[y,w]=r.useState(!1),[_,I]=r.useState(null),m=r.useCallback(async(a,o)=>{c(!0),N("");try{const u={};o&&(u.search=o);const x=await W.fetchJobs(a,u);x.data=x.data.filter(D=>D.status==="Interview"),s(x.data),v(x.current_page),M(x.last_page)}catch(u){console.error(u),N("Failed to load job applications."),B.error("Error loading applications.")}finally{c(!1)}},[]);r.useEffect(()=>{m(l,h)},[l,h,m]);const J=r.useCallback(a=>{a.preventDefault(),v(1),m(1,h)},[h,m]),p=r.useCallback(a=>{a>=1&&a<=d&&v(a)},[d]),P=r.useCallback(a=>{I(a),w(!0)},[]),R=r.useCallback(()=>{w(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(E,{breadcrumbs:[{title:"Jobs",path:"/admin/jobs",isActive:!1}],children:"My Job Applications"}),e.jsx(L,{}),e.jsx(O,{children:e.jsx(z.div,{className:"container-fluid py-4 card shadow-sm",variants:Y,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs("div",{className:"card-body",children:[e.jsx(H,{className:"mb-4",onSubmit:J,children:e.jsxs(f,{children:[e.jsx(f.Text,{children:e.jsx(V,{})}),e.jsx(q,{type:"text",placeholder:"Search applications...",value:h,onChange:a=>T(a.target.value)}),e.jsx(b,{variant:"primary",type:"submit",children:"Search"})]})}),t&&e.jsx("div",{className:"text-center py-5",children:e.jsx(G,{animation:"border",variant:"primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!t&&i&&e.jsx(S,{variant:"danger",role:"alert",children:i}),!t&&!i&&n.length===0&&e.jsx("div",{className:"d-flex flex-column align-items-center justify-content-center py-5",children:e.jsxs(S,{variant:"info",className:"text-center w-50",children:[e.jsx("h4",{children:"No Shortlisted Applications Found"}),e.jsx("p",{className:"mb-4",children:"You haven't shortlisted any applications yet."}),e.jsx(b,{href:"/jobs",as:"a",variant:"primary",children:"Browse Jobs"})]})}),!t&&!i&&n.length>0&&e.jsx("div",{className:"table-responsive",children:e.jsxs(K,{striped:!0,hover:!0,className:"align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Job"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Applied On"}),e.jsx("th",{children:"Interview Date"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:n.map((a,o)=>e.jsx(A,{app:a,idx:o,currentPage:l,onViewDetails:P},a.id))})]})}),!t&&!i&&d>1&&e.jsxs(g,{className:"mt-4 justify-content-center",children:[e.jsx(g.Prev,{onClick:()=>p(l-1),disabled:l<=1}),Array.from({length:d},(a,o)=>o+1).map(a=>e.jsx(g.Item,{active:a===l,onClick:()=>p(a),children:a},a)),e.jsx(g.Next,{onClick:()=>p(l+1),disabled:l>=d})]}),e.jsx(U,{children:y&&_&&e.jsx(Q,{showModal:y,selectedApp:_,onCloseModal:R})})]})})})]})};export{$ as default};
