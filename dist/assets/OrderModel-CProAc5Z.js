var t=Object.defineProperty,e=(e,s,r)=>((e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r)(e,"symbol"!=typeof s?s+"":s,r);import{U as s,y as r}from"./index-UqLlkq5m.js";const a=class t{constructor(){e(this,"id",0),e(this,"created_at",""),e(this,"updated_at",""),e(this,"user",""),e(this,"order_state",""),e(this,"amount",""),e(this,"date_created",""),e(this,"payment_confirmation",""),e(this,"date_updated",""),e(this,"mail",""),e(this,"delivery_district",""),e(this,"temporary_id",""),e(this,"temporary_text",""),e(this,"description",""),e(this,"customer_name",""),e(this,"customer_phone_number_1",""),e(this,"customer_phone_number_2",""),e(this,"customer_address",""),e(this,"order_total",""),e(this,"order_details",""),e(this,"stripe_id",""),e(this,"stripe_text",""),e(this,"stripe_url",""),e(this,"stripe_paid",""),e(this,"payment_gateway",""),e(this,"payment_status",""),e(this,"pesapal_status",""),e(this,"pesapal_tracking_id",""),e(this,"delivery_method",""),e(this,"delivery_address_id",""),e(this,"delivery_address_text",""),e(this,"delivery_address_details",""),e(this,"delivery_amount",""),e(this,"payable_amount",""),e(this,"items","")}getTax(t){return(.13*(parseFloat(t)||0)).toString()}isPaid(){if("PAID"===this.payment_confirmation.toUpperCase())return!0;if(this.pesapal_status&&"COMPLETED"===this.pesapal_status.toUpperCase())return!0;if(this.payment_status&&"PAID"===this.payment_status.toUpperCase())return!0;if(this.stripe_paid&&"YES"===this.stripe_paid.toUpperCase())return!0;const t=this.payment_confirmation.toUpperCase();return"COMPLETED"===t||"SUCCESS"===t||"CONFIRMED"===t}getPaymentLink(){return this.stripe_url}getOrderStatus(){switch(this.order_state){case"0":return"Pending";case"1":return"Processing";case"2":return"Completed";case"3":return"Canceled";case"4":return"Failed";default:return this.order_state}}static fromJson(e){const r=new t;return e?(r.id=s.int_parse(e.id),r.created_at=s.to_str(e.created_at,""),r.updated_at=s.to_str(e.updated_at,""),r.user=s.to_str(e.user,""),r.order_state=s.to_str(e.order_state,""),r.amount=s.to_str(e.amount,""),r.date_created=s.to_str(e.date_created,""),r.payment_confirmation=s.to_str(e.payment_confirmation,""),r.date_updated=s.to_str(e.date_updated,""),r.mail=s.to_str(e.mail,""),r.delivery_district=s.to_str(e.delivery_district,""),r.temporary_id=s.to_str(e.temporary_id,""),r.temporary_text=s.to_str(e.temporary_text,""),r.description=s.to_str(e.description,""),r.customer_name=s.to_str(e.customer_name,""),r.customer_phone_number_1=s.to_str(e.customer_phone_number_1,""),r.customer_phone_number_2=s.to_str(e.customer_phone_number_2,""),r.customer_address=s.to_str(e.customer_address,""),r.order_total=s.to_str(e.order_total,""),r.order_details=s.to_str(e.order_details,""),r.stripe_id=s.to_str(e.stripe_id,""),r.stripe_text=s.to_str(e.stripe_text,""),r.stripe_url=s.to_str(e.stripe_url,""),r.stripe_paid=s.to_str(e.stripe_paid,""),r.payment_gateway=s.to_str(e.payment_gateway,""),r.payment_status=s.to_str(e.payment_status,""),r.pesapal_status=s.to_str(e.pesapal_status,""),r.pesapal_tracking_id=s.to_str(e.pesapal_tracking_id,""),r.delivery_method=s.to_str(e.delivery_method,""),r.delivery_address_id=s.to_str(e.delivery_address_id,""),r.delivery_address_text=s.to_str(e.delivery_address_text,""),r.delivery_address_details=s.to_str(e.delivery_address_details,""),r.delivery_amount=s.to_str(e.delivery_amount,""),r.payable_amount=s.to_str(e.payable_amount,""),r.items=s.to_str(e.items,""),r):r}toJson(){return{id:this.id,created_at:this.created_at,updated_at:this.updated_at,user:this.user,order_state:this.order_state,amount:this.amount,date_created:this.date_created,payment_confirmation:this.payment_confirmation,date_updated:this.date_updated,mail:this.mail,delivery_district:this.delivery_district,temporary_id:this.temporary_id,temporary_text:this.temporary_text,description:this.description,customer_name:this.customer_name,customer_phone_number_1:this.customer_phone_number_1,customer_phone_number_2:this.customer_phone_number_2,customer_address:this.customer_address,order_total:this.order_total,order_details:this.order_details,stripe_id:this.stripe_id,stripe_text:this.stripe_text,stripe_url:this.stripe_url,stripe_paid:this.stripe_paid,payment_gateway:this.payment_gateway,payment_status:this.payment_status,pesapal_status:this.pesapal_status,pesapal_tracking_id:this.pesapal_tracking_id,delivery_method:this.delivery_method,delivery_address_id:this.delivery_address_id,delivery_address_text:this.delivery_address_text,delivery_address_details:this.delivery_address_details,delivery_amount:this.delivery_amount,payable_amount:this.payable_amount,items:this.items}}static fetchItems(){return e=this,s=null,a=function*(){try{const e=yield r(t.end_point,{});if(1!==e.code)throw new Error(e.message||"Failed to fetch orders.");const s=e.data;return Array.isArray(s)?s.map((e=>t.fromJson(e))):[]}catch(e){throw e}},new Promise(((t,r)=>{var i=t=>{try{d(a.next(t))}catch(e){r(e)}},_=t=>{try{d(a.throw(t))}catch(e){r(e)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,_);d((a=a.apply(e,s)).next())}));var e,s,a}};e(a,"end_point","orders"),e(a,"table_name","orders_online_3");let i=a;export{i as O};
