import{e as I,g as v,r as p,l as u,j as e,L as d,n as W,T as y,U as b}from"./index-Ck1B39s_.js";import{f}from"./index-DhbewBbn.js";const E=()=>{const l=I(),{user:n}=v(r=>r.auth),{items:c,isLoading:j}=v(r=>r.wishlist),[w,g]=p.useState(new Set),[h,m]=p.useState(new Map);p.useEffect(()=>{n&&n.id&&l(u())},[n,l]);const S=async(r,s)=>{g(i=>new Set(i).add(r));try{await l(W(r)),y.removeFromWishlist(s)}catch(i){console.error("Error removing from wishlist:",i),y.error("Failed to remove item from wishlist")}finally{g(i=>{const t=new Set(i);return t.delete(r),t})}},N=r=>r?b.img(r):b.img(""),z=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",k=()=>{n&&n.id&&l(u())},R=r=>{m(s=>new Map(s).set(r,!0))},_=(r,s)=>{m(a=>new Map(a).set(r,!1));const i=s.currentTarget;i.style.display="none";const t=i.parentElement;if(t&&!t.querySelector(".placeholder-icon")){const a=document.createElement("i");a.className="bi bi-image placeholder-icon",a.style.fontSize="2rem",a.style.color="var(--text-color-medium)",t.appendChild(a)}};return!n||!n.id?e.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--warning-bg)",borderColor:"var(--warning-border)",color:"var(--warning-color)"},children:e.jsxs("div",{className:"acc-card-body",children:[e.jsx("i",{className:"bi bi-exclamation-triangle",style:{marginRight:"8px"}}),"Please log in to view your wishlist."]})}):e.jsxs("div",{className:"acc-wishlist-container",children:[e.jsxs("div",{className:"acc-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"acc-page-title",children:"My Wishlist"}),e.jsx("p",{className:"acc-page-subtitle",children:c.length>0?`${c.length} item${c.length!==1?"s":""} saved for later`:"Save your favorite products here"})]}),e.jsxs("button",{className:"acc-btn acc-btn-outline",onClick:k,children:[e.jsx("i",{className:"bi bi-arrow-clockwise",style:{marginRight:"8px"}}),"Refresh"]})]}),j?e.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-12) var(--spacing-4)"},children:[e.jsx("div",{style:{display:"inline-block",width:"40px",height:"40px",border:"4px solid var(--border-color)",borderTop:"4px solid var(--primary-color)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{marginTop:"var(--spacing-3)",color:"var(--text-color-medium)",fontSize:"var(--font-size-base)"},children:"Loading wishlist..."})]}):e.jsx(e.Fragment,{children:c.length===0?e.jsx("div",{className:"acc-card",children:e.jsx("div",{className:"acc-card-body",children:e.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-12) var(--spacing-4)"},children:[e.jsx("i",{className:"bi bi-heart",style:{fontSize:"4rem",color:"var(--text-color-medium)",marginBottom:"var(--spacing-4)",display:"block"}}),e.jsx("h3",{style:{fontSize:"var(--font-size-xl)",fontWeight:"var(--font-weight-semibold)",color:"var(--text-color)",marginBottom:"var(--spacing-2)"},children:"Your Wishlist is Empty"}),e.jsx("p",{style:{color:"var(--text-color-medium)",marginBottom:"var(--spacing-4)",fontSize:"var(--font-size-base)",maxWidth:"400px",margin:"0 auto var(--spacing-4)"},children:"Start adding products to your wishlist by clicking the heart icon on any product you like."}),e.jsx(d,{to:"/products",className:"acc-btn acc-btn-primary",children:"Browse Products"})]})})}):e.jsx("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:c.map(r=>{const s=w.has(r.product_id),i=N(r.product_photo),t=r.product_sale_price?parseFloat(r.product_sale_price):null,a=parseFloat(r.product_price||"0"),C=t&&t>0?t:a,x=t&&t>0&&t<a;return e.jsx("div",{className:"acc-card",style:{opacity:s?.6:1,transition:"opacity 0.3s ease"},children:e.jsx("div",{className:"acc-card-body",children:e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-4)",alignItems:"flex-start"},children:[e.jsxs("div",{style:{width:"120px",height:"120px",flexShrink:0,borderRadius:"var(--border-radius)",overflow:"hidden",backgroundColor:"var(--background-light)",border:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[!h.get(r.product_id)&&e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"var(--text-color-medium)"},children:e.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid var(--border-color)",borderTop:"2px solid var(--primary-color)",borderRadius:"50%",animation:"spin 1s linear infinite"}})}),e.jsx("img",{src:i,alt:r.product_name,style:{width:"100%",height:"100%",objectFit:"cover",opacity:h.get(r.product_id)?1:0,transition:"opacity 0.3s ease"},onLoad:()=>R(r.product_id),onError:o=>_(r.product_id,o)})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"var(--spacing-2)"},children:[e.jsxs("div",{style:{flex:1,paddingRight:"var(--spacing-3)"},children:[e.jsx(d,{to:`/products/${r.product_id}`,style:{color:"var(--text-color)",textDecoration:"none",fontSize:"var(--font-size-lg)",fontWeight:"var(--font-weight-semibold)",display:"block",marginBottom:"var(--spacing-1)",lineHeight:"1.4"},onMouseEnter:o=>{o.currentTarget.style.color="var(--primary-color)"},onMouseLeave:o=>{o.currentTarget.style.color="var(--text-color)"},children:r.product_name}),e.jsxs("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)",margin:0,marginBottom:"var(--spacing-2)"},children:["Added on ",z(r.created_at)]})]}),e.jsx("button",{onClick:()=>S(r.product_id,r.product_name),disabled:s,style:{background:"none",border:"none",padding:"var(--spacing-1)",cursor:s?"not-allowed":"pointer",color:"var(--danger-color)",fontSize:"var(--font-size-lg)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"var(--border-radius)",transition:"background-color 0.2s ease"},onMouseEnter:o=>{s||(o.currentTarget.style.backgroundColor="var(--danger-bg)")},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="transparent"},children:s?e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid var(--danger-color)",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}):e.jsx("i",{className:"bi bi-heart-fill"})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"var(--spacing-3)",borderTop:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-2)"},children:[e.jsx("span",{style:{fontSize:"var(--font-size-lg)",fontWeight:"var(--font-weight-bold)",color:x?"var(--danger-color)":"var(--text-color)"},children:f(C)}),x&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:"var(--font-size-base)",color:"var(--text-color-medium)",textDecoration:"line-through"},children:f(a)}),e.jsxs("span",{style:{fontSize:"var(--font-size-xs)",backgroundColor:"var(--danger-color)",color:"var(--white)",padding:"var(--spacing-1) var(--spacing-2)",borderRadius:"var(--border-radius)",fontWeight:"var(--font-weight-medium)"},children:[Math.round((a-t)/a*100),"% OFF"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-2)"},children:[e.jsx(d,{to:`/products/${r.product_id}`,className:"acc-btn acc-btn-outline acc-btn-sm",children:"View Details"}),e.jsxs("button",{className:"acc-btn acc-btn-primary acc-btn-sm",children:[e.jsx("i",{className:"bi bi-cart-plus",style:{marginRight:"6px"}}),"Add to Cart"]})]})]})]})]})})},r.id)})})}),c.length>0&&e.jsxs("div",{style:{marginTop:"var(--spacing-6)",display:"flex",gap:"var(--spacing-3)",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("button",{className:"acc-btn acc-btn-outline",children:[e.jsx("i",{className:"bi bi-share",style:{marginRight:"8px"}}),"Share Wishlist"]}),e.jsxs(d,{to:"/products",className:"acc-btn acc-btn-primary",children:[e.jsx("i",{className:"bi bi-plus-circle",style:{marginRight:"8px"}}),"Add More Items"]})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};export{E as default};
