import{e as b,d as k,r as u,j as s,C as t,S as j,L as d,n as C,T as c,V as z,W as S,A as F}from"./index-Ck1B39s_.js";import{C as y}from"./Container-CYOb-KOn.js";import{R as o}from"./Row-DMOtnxeD.js";import{B as i}from"./Button-NLQyPqyC.js";import{c as m}from"./createLucideIcon-zL9hS55m.js";import{C as l}from"./Card-BHoHBxu5.js";import{H as M}from"./heart-wUq5OuEL.js";import{E}from"./eye-DwGyYzzV.js";import"./Button-BlOqttEG.js";import"./CardHeaderContext-BNHv2GZa.js";import"./divWithClassName-Cvv0wCrx.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],L=m("package",A);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],B=m("shopping-cart",W);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],g=m("trash-2",R),Y=()=>{const h=b(),{manifest:n,isLoading:N}=k(),a=(n==null?void 0:n.wishlist)||[],[p,x]=u.useState(null);u.useEffect(()=>{},[]);const _=async e=>{try{x(e),await h(C(e)).unwrap()}catch(r){console.error("Error removing from wishlist:",r),c.error("Failed to remove from wishlist")}finally{x(null)}},v=async e=>{try{const r=new z;r.id=e.product_id,r.name=e.product_name,r.price_1=e.product_price,r.price_2=e.product_sale_price||e.product_price,r.feature_photo=e.product_photo||"",h(S({product:r,quantity:1,variant:{}})),c.success(`${e.product_name} added to cart`)}catch(r){console.error("Error adding to cart:",r),c.error("Failed to add to cart")}},f=async()=>{if(window.confirm("Are you sure you want to clear your entire wishlist?"))try{for(const e of a)await F.removeFromWishlist(e.product_id);c.success("Wishlist cleared")}catch(e){console.error("Error clearing wishlist:",e),c.error("Failed to clear wishlist")}};return N?s.jsx(y,{className:"py-5",children:s.jsx(o,{className:"justify-content-center",children:s.jsxs(t,{md:6,className:"text-center",children:[s.jsx(j,{animation:"border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("p",{className:"mt-3",children:"Loading your wishlist..."})]})})}):s.jsxs(y,{className:"py-5",children:[s.jsx(o,{children:s.jsx(t,{children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"h3 mb-2",children:"My Wishlist"}),s.jsxs("p",{className:"text-muted mb-0",children:[a.length," ",a.length===1?"item":"items"," saved for later"]})]}),a.length>0&&s.jsxs(i,{variant:"outline-danger",size:"sm",onClick:f,children:[s.jsx(g,{size:16,className:"me-2"}),"Clear All"]})]})})}),a.length===0?s.jsx(o,{className:"justify-content-center",children:s.jsx(t,{md:6,className:"text-center",children:s.jsx(l,{className:"border-0 shadow-sm py-5",children:s.jsxs(l.Body,{children:[s.jsx(M,{size:64,className:"text-muted mb-4"}),s.jsx("h3",{className:"h4 mb-3",children:"Your wishlist is empty"}),s.jsx("p",{className:"text-muted mb-4",children:"Browse our products and save your favorites for later!"}),s.jsx(d,{to:"/products",children:s.jsxs(i,{variant:"primary",size:"lg",children:[s.jsx(L,{size:20,className:"me-2"}),"Start Shopping"]})})]})})})}):s.jsx(o,{children:a.map(e=>s.jsx(t,{md:6,lg:4,xl:3,className:"mb-4",children:s.jsxs(l,{className:"border-0 shadow-sm h-100 wishlist-card",children:[s.jsxs("div",{className:"position-relative",children:[s.jsx("img",{src:e.product_photo?`http://127.0.0.1:8888/images/${e.product_photo}`:"/media/misc/image.png",alt:e.product_name,className:"card-img-top",style:{height:"250px",objectFit:"cover"},onError:r=>{const w=r.target;w.src="/media/misc/image.png"}}),s.jsx(i,{variant:"light",size:"sm",className:"position-absolute top-0 end-0 m-2 rounded-circle",onClick:()=>_(e.product_id),disabled:p===e.product_id,children:p===e.product_id?s.jsx(j,{animation:"border",size:"sm"}):s.jsx(g,{size:16,className:"text-danger"})})]}),s.jsxs(l.Body,{className:"d-flex flex-column",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{className:"card-title mb-2",children:e.product_name}),s.jsxs("div",{className:"d-flex align-items-center mb-2",children:[s.jsxs("span",{className:"h5 text-primary mb-0 me-2",children:["UGX ",parseFloat(e.product_sale_price||e.product_price).toLocaleString()]}),e.product_sale_price&&parseFloat(e.product_sale_price)<parseFloat(e.product_price)&&s.jsxs("span",{className:"text-muted text-decoration-line-through",children:["UGX ",parseFloat(e.product_price).toLocaleString()]})]})]}),s.jsx("div",{className:"mt-auto",children:s.jsxs("div",{className:"d-grid gap-2",children:[s.jsxs(i,{variant:"primary",onClick:()=>v(e),children:[s.jsx(B,{size:16,className:"me-2"}),"Add to Cart"]}),s.jsx(d,{to:`/products/${e.product_id}`,children:s.jsxs(i,{variant:"outline-secondary",className:"w-100",children:[s.jsx(E,{size:16,className:"me-2"}),"View Details"]})})]})})]})]})},e.id))}),a.length>0&&s.jsx(o,{className:"mt-5 pt-4 border-top",children:s.jsxs(t,{children:[s.jsx("h4",{className:"mb-3",children:"Shop More Categories"}),s.jsx("div",{className:"d-flex flex-wrap gap-2",children:["Electronics","Clothing","Home & Garden","Sports","Books"].map(e=>s.jsx(d,{to:`/category/${e.toLowerCase().replace(/\s+/g,"-")}`,className:"btn btn-outline-primary btn-sm",children:e},e))})]})})]})};export{Y as default};
