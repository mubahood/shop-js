import{r as j,p as J,$ as V,a0 as D,I as G,a1 as M,j as s,C as a,S as g,F as $,L as l,T as d,A as f}from"./index-Ck1B39s_.js";import{C as i}from"./CartService-DYKmN5tl.js";import{C as q}from"./Container-CYOb-KOn.js";import{R as n}from"./Row-DMOtnxeD.js";import{B as o}from"./Button-NLQyPqyC.js";import{C as r}from"./Card-BHoHBxu5.js";import{A as u}from"./Alert-C-lzSFeO.js";import"./Button-BlOqttEG.js";import"./CardHeaderContext-BNHv2GZa.js";import"./divWithClassName-Cvv0wCrx.js";import"./hook-BpSSKWeX.js";import"./useEventCallback-Cs-IbGqe.js";import"./Anchor-D3rNWf9j.js";import"./TransitionWrapper-Ca_Uh9a9.js";import"./useMergedRefs-NifApYAE.js";const ls=()=>{const[C,A]=j.useState(134),[c,E]=j.useState(""),[B,b]=j.useState(),[v,p]=j.useState(0),{data:m,isLoading:L,error:P,refetch:F}=J({page:1,limit:5}),{data:h,isLoading:z,error:S}=V(),{data:x,isLoading:H,error:I}=D(),{data:t,isLoading:_,error:T}=G(C,{skip:!C}),{data:N,isLoading:O,error:w}=M({query:c,page:1},{skip:!c||c.length<2});j.useEffect(()=>{const e=()=>{p(i.getCartItemCount())};return e(),window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]);const y=async e=>{i.addToCart(e.id,1,{},{name:e.name,price:e.price_1})&&p(i.getCartItemCount())},Q=async()=>{try{d.info("Testing API methods..."),console.log("Testing Categories:",await f.getCategories()),console.log("Testing Vendors:",await f.getVendors()),console.log("Testing Products:",await f.getProducts({page:1,limit:3})),d.success("API methods tested successfully! Check console for results.")}catch(e){d.error("API test failed: "+e),console.error("API Test Error:",e)}},R=async()=>{try{d.info("Testing cart functions..."),i.addToCart(1,2,{color:"red"},{name:"Test Product 1",price:"100000"}),i.addToCart(2,1,{size:"large"},{name:"Test Product 2",price:"200000"}),console.log("Cart Items:",i.getCartItems()),console.log("Cart Count:",i.getCartItemCount()),console.log("Is Product 1 in cart:",i.isInCart(1,{color:"red"})),console.log("Product 1 quantity:",i.getProductQuantity(1,{color:"red"}));const e=await i.getCartTotal(),k=await i.getFormattedCartTotal();console.log("Cart Total:",e),console.log("Formatted Total:",k),p(i.getCartItemCount()),d.success("Cart functions tested! Check console for results.")}catch(e){d.error("Cart test failed: "+e),console.error("Cart Test Error:",e)}};return s.jsxs(q,{className:"py-5",children:[s.jsx(n,{className:"mb-4",children:s.jsxs(a,{children:[s.jsx("h1",{children:"API Integration Test Page"}),s.jsx("p",{className:"text-muted",children:"Testing real Laravel API endpoints and cart functionality."}),s.jsxs("div",{className:"d-flex gap-2 mb-3",children:[s.jsx(o,{variant:"primary",onClick:Q,children:"Test API Methods"}),s.jsx(o,{variant:"success",onClick:R,children:"Test Cart Functions"}),s.jsx(o,{variant:"info",onClick:()=>window.location.reload(),children:"Refresh Page"}),s.jsxs("span",{className:"ms-auto badge bg-secondary fs-6",children:["Cart Items: ",v]})]})]})}),s.jsx(n,{className:"mb-4",children:s.jsx(a,{children:s.jsxs(r,{children:[s.jsx(r.Header,{children:s.jsxs("h4",{children:["Categories (",(h==null?void 0:h.length)||0,")"]})}),s.jsxs(r.Body,{children:[z&&s.jsx(g,{animation:"border"}),S&&s.jsxs(u,{variant:"danger",children:["Error loading categories: ",JSON.stringify(S)]}),h&&s.jsx(n,{children:h.slice(0,6).map(e=>s.jsx(a,{md:4,className:"mb-3",children:s.jsx(r,{children:s.jsxs(r.Body,{children:[s.jsx("h6",{children:e.category}),s.jsxs("p",{className:"small text-muted",children:["ID: ",e.id," | Products: ",e.category_text,e.isShownInBanner()&&s.jsx("span",{className:"badge bg-warning ms-2",children:"Banner"})]}),s.jsx(o,{size:"sm",variant:"outline-primary",onClick:()=>b(e.id),children:"Filter Products"})]})})},e.id))})]})]})})}),s.jsx(n,{className:"mb-4",children:s.jsx(a,{children:s.jsxs(r,{children:[s.jsxs(r.Header,{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("h4",{children:["Products (",(m==null?void 0:m.total)||0,")"]}),s.jsxs("div",{className:"d-flex gap-2",children:[B&&s.jsx(o,{size:"sm",variant:"outline-secondary",onClick:()=>b(void 0),children:"Clear Filter"}),s.jsx(o,{size:"sm",variant:"outline-primary",onClick:()=>F(),children:"Refresh"})]})]}),s.jsxs(r.Body,{children:[L&&s.jsx(g,{animation:"border"}),P&&s.jsxs(u,{variant:"danger",children:["Error loading products: ",JSON.stringify(P)]}),m&&s.jsx(n,{children:m.data.map(e=>s.jsx(a,{md:6,lg:4,className:"mb-3",children:s.jsxs(r,{children:[s.jsx(r.Img,{variant:"top",src:e.getMainImage(),style:{height:"200px",objectFit:"cover"}}),s.jsxs(r.Body,{children:[s.jsx("h6",{children:e.name}),s.jsx("p",{className:"text-success fw-bold",children:e.getFormattedPrice()}),s.jsxs("p",{className:"small text-muted",children:["Category: ",e.category_text," | Colors: ",e.hasColors()?e.getColors().join(", "):"None"," | Stock: ",e.isInStock()?"Yes":"No"]}),s.jsxs("div",{className:"d-flex gap-1",children:[s.jsx(o,{size:"sm",variant:"primary",onClick:()=>y(e),children:"Add to Cart"}),s.jsx(o,{size:"sm",variant:"outline-info",onClick:()=>A(e.id),children:"View Details"})]})]})]})},e.id))})]})]})})}),s.jsx(n,{className:"mb-4",children:s.jsx(a,{children:s.jsxs(r,{children:[s.jsx(r.Header,{children:s.jsx("h4",{children:"Search Products"})}),s.jsxs(r.Body,{children:[s.jsx($.Control,{type:"text",placeholder:"Search for products...",value:c,onChange:e=>E(e.target.value),className:"mb-3"}),O&&s.jsx(g,{animation:"border"}),w&&s.jsxs(u,{variant:"danger",children:["Search error: ",JSON.stringify(w)]}),N&&c&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-muted",children:["Found ",N.total,' results for "',c,'"']}),s.jsx(n,{children:N.data.slice(0,3).map(e=>s.jsx(a,{md:4,className:"mb-3",children:s.jsx(r,{children:s.jsxs(r.Body,{children:[s.jsx("h6",{children:e.name}),s.jsx("p",{className:"text-success",children:e.getFormattedPrice()}),s.jsx(o,{size:"sm",variant:"primary",onClick:()=>y(e),children:"Add to Cart"})]})})},e.id))})]})]})]})})}),s.jsx(n,{className:"mb-4",children:s.jsx(a,{children:s.jsxs(r,{children:[s.jsx(r.Header,{children:s.jsxs("h4",{children:["Single Product Details (ID: ",C,")"]})}),s.jsxs(r.Body,{children:[_&&s.jsx(g,{animation:"border"}),T&&s.jsxs(u,{variant:"danger",children:["Error loading product: ",JSON.stringify(T)]}),t&&s.jsxs(n,{children:[s.jsx(a,{md:4,children:s.jsx("img",{src:t.getMainImage(),alt:t.name,className:"img-fluid rounded"})}),s.jsxs(a,{md:8,children:[s.jsx("h3",{children:t.name}),s.jsx("p",{className:"text-success h4",children:t.getFormattedPrice()}),s.jsx("p",{children:t.description||"No description available"}),s.jsxs("div",{className:"row mb-3",children:[s.jsx("div",{className:"col-sm-4",children:s.jsx("strong",{children:"Category:"})}),s.jsx("div",{className:"col-sm-8",children:t.category_text})]}),s.jsxs("div",{className:"row mb-3",children:[s.jsx("div",{className:"col-sm-4",children:s.jsx("strong",{children:"Stock:"})}),s.jsx("div",{className:"col-sm-8",children:t.isInStock()?"In Stock":"Out of Stock"})]}),t.hasColors()&&s.jsxs("div",{className:"row mb-3",children:[s.jsx("div",{className:"col-sm-4",children:s.jsx("strong",{children:"Colors:"})}),s.jsx("div",{className:"col-sm-8",children:t.getColors().join(", ")})]}),t.hasSizes()&&s.jsxs("div",{className:"row mb-3",children:[s.jsx("div",{className:"col-sm-4",children:s.jsx("strong",{children:"Sizes:"})}),s.jsx("div",{className:"col-sm-8",children:t.getSizes().join(", ")})]}),s.jsx(o,{variant:"primary",size:"lg",onClick:()=>y(t),children:"Add to Cart"})]})]})]})]})})}),s.jsx(n,{className:"mb-4",children:s.jsx(a,{children:s.jsxs(r,{children:[s.jsx(r.Header,{children:s.jsxs("h4",{children:["Vendors (",(x==null?void 0:x.length)||0,")"]})}),s.jsxs(r.Body,{children:[H&&s.jsx(g,{animation:"border"}),I&&s.jsxs(u,{variant:"danger",children:["Error loading vendors: ",JSON.stringify(I)]}),x&&s.jsx(n,{children:x.slice(0,4).map(e=>s.jsx(a,{md:6,className:"mb-3",children:s.jsx(r,{children:s.jsxs(r.Body,{children:[s.jsx("h6",{children:e.name||`${e.first_name} ${e.last_name}`}),s.jsxs("p",{className:"small text-muted",children:["Business: ",e.business_name||"N/A"," | Status: ",e.status," | Email: ",e.email||"N/A"]})]})})},e.id))})]})]})})}),s.jsx(n,{children:s.jsx(a,{children:s.jsxs(r,{children:[s.jsx(r.Header,{children:s.jsx("h4",{children:"Navigation"})}),s.jsx(r.Body,{children:s.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[s.jsx(l,{to:"/",className:"btn btn-outline-primary",children:"Home"}),s.jsx(l,{to:"/products",className:"btn btn-outline-primary",children:"Products Page"}),s.jsx(l,{to:"/categories",className:"btn btn-outline-primary",children:"Categories Page"}),s.jsxs(l,{to:"/cart",className:"btn btn-outline-primary",children:["Cart (",v,")"]}),s.jsx(l,{to:"/account",className:"btn btn-outline-primary",children:"Account"}),s.jsx(l,{to:"/toast-demo",className:"btn btn-outline-secondary",children:"Toast Demo"})]})})]})})})]})};export{ls as default};
