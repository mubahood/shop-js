import{r as i,K as u,j as e,z as m,_ as M,U as y,L as F}from"./index-D3ojX_Fy.js";import{C as $}from"./CvModel-B1ugTPcK.js";import{JobSkeleton as Y}from"./JobDetailPage-Bb8nku2I.js";import"./index-C0GkpkSG.js";const E={search:"",industry:"",employeesMin:void 0,employeesMax:void 0,establishedAfter:void 0,certifications:""},G=["Technology","Finance","Healthcare","Manufacturing","Retail","Education","Construction","Transportation"],N={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:10}},W=()=>{const[h,I]=i.useState([]),[P,g]=i.useState(!1),[n,t]=i.useState(E),[r,c]=i.useState(1),[o,D]=i.useState(1),[d,f]=i.useState(!0),[l,L]=i.useState(null),[R,x]=i.useState(!1),[v,_]=i.useState(!1);i.useEffect(()=>{w(r,n)},[r,n]);const w=async(s,a)=>{var p,k,S;try{g(!0);const A={search:a.search,industry:a.industry||"",employeesMin:((p=a.employeesMin)==null?void 0:p.toString())||"",employeesMax:((k=a.employeesMax)==null?void 0:k.toString())||"",establishedAfter:((S=a.establishedAfter)==null?void 0:S.toString())||"",certifications:a.certifications||"",is_company:"true"},j=await $.fetchJobs(s,A);I(j.data),c(j.current_page),D(j.last_page)}catch{u.error("Failed to load company data.")}finally{g(!1)}},O=s=>{s.preventDefault(),c(1),w(1,n)},T=()=>{t(E),c(1)},b=s=>{s>=1&&s<=o&&c(s)},C=async s=>{try{const a={type:"COMPANY",item_id:s.id};(await F("/view-record-create",a)).code==1}catch{}finally{}L(s),x(!0)},V=async()=>{if(l){_(!0);try{const s={company_id:l.id};await F("/company-follow",s),u.success("You are now following this company.")}catch(s){console.error(s),u.error("Failed to follow the company because: "+s)}finally{_(!1)}}};return P?Y():e.jsxs(m.div,{className:"container py-4 px-2 px-md-4",variants:N,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-lg-3",children:e.jsx(m.div,{className:"card border-0 shadow-sm h-100",layout:!0,children:e.jsxs("div",{className:"card-body",children:[e.jsx("h4",{className:"mb-4",children:"Search Employers"}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Company Search"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Name or industry...",value:n.search,onChange:s=>t(a=>({...a,search:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Industry"}),e.jsxs("select",{className:"form-select",value:n.industry,onChange:s=>t(a=>({...a,industry:s.target.value})),children:[e.jsx("option",{value:"",children:"All Industries"}),G.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Company Size"}),e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Min",min:"0",value:n.employeesMin||"",onChange:s=>t(a=>({...a,employeesMin:Number(s.target.value)}))})}),e.jsx("div",{className:"col",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Max",min:"0",value:n.employeesMax||"",onChange:s=>t(a=>({...a,employeesMax:Number(s.target.value)}))})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Established After"}),e.jsx("input",{type:"number",className:"form-control",placeholder:"Year",min:"1900",max:new Date().getFullYear(),value:n.establishedAfter||"",onChange:s=>t(a=>({...a,establishedAfter:Number(s.target.value)}))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label",children:"Certifications"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"e.g. ISO, OSHA...",value:n.certifications,onChange:s=>t(a=>({...a,certifications:s.target.value}))})]}),e.jsxs("div",{className:"d-grid gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Search"}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:T,children:"Reset"})]})]})]})})}),e.jsxs("div",{className:"col-lg-9",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h3",{className:"fw-bold mb-0",children:"Employers"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:`btn btn-sm ${d?"btn-primary":"btn-outline-primary"}`,onClick:()=>f(!0),children:e.jsx("i",{className:"bi bi-grid"})}),e.jsx("button",{className:`btn btn-sm ${d?"btn-outline-primary":"btn-primary"}`,onClick:()=>f(!1),children:e.jsx("i",{className:"bi bi-list"})})]})]}),h.length===0?e.jsx("div",{className:"alert alert-secondary",children:"No companies found. Try adjusting your filters."}):e.jsx(M,{mode:"wait",children:e.jsx(m.div,{variants:N,initial:"hidden",animate:"visible",exit:"exit",children:d?e.jsx("div",{className:"row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4",children:h.map(s=>e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card h-100 border-0 shadow-sm",children:[e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("img",{src:y.img(s.company_logo||"default-company.png"),alt:"Company",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px"},className:"me-3 border"}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0",children:s.company_name}),e.jsx("small",{className:"text-muted",children:s.company_main_category_id})]})]}),e.jsxs("p",{className:"small mb-2 text-muted",children:[e.jsx("strong",{children:"Employees:"})," ",s.company_employees_range," | ",e.jsx("strong",{children:"Location:"})," ",s.company_country]}),e.jsx("p",{className:"text-truncate-3 small text-muted",children:s.company_description})]}),e.jsx("div",{className:"card-footer bg-white border-0",children:e.jsx("button",{className:"btn btn-sm border border-1 border-primary btn-outline-primary w-100",onClick:()=>C(s),children:"View Details"})})]})},s.id))}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Company"}),e.jsx("th",{children:"Industry"}),e.jsx("th",{children:"Employees"}),e.jsx("th",{children:"Country"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:y.img(s.company_logo||"default-company.png"),alt:"Company",style:{width:"45px",height:"45px",objectFit:"cover",borderRadius:"4px"},className:"me-2 border"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:s.company_name}),e.jsx("small",{className:"text-muted",children:s.company_sub_category_id})]})]})}),e.jsx("td",{children:s.company_main_category_id}),e.jsx("td",{children:s.company_employees_range}),e.jsx("td",{children:s.company_country}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>C(s),children:"Details"})})]},s.id))})]})})},d?"grid":"list")}),o>1&&e.jsx("nav",{className:"mt-4",children:e.jsxs("ul",{className:"pagination justify-content-center",children:[e.jsx("li",{className:`page-item ${r===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>b(r-1),children:"« Prev"})}),Array.from({length:o},(s,a)=>a+1).map(s=>e.jsx("li",{className:`page-item ${r===s?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>b(s),children:s})},s)),e.jsx("li",{className:`page-item ${r===o?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>b(r+1),children:"Next »"})})]})})]})]}),e.jsx(M,{children:R&&l&&e.jsx(m.div,{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},variants:N,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:e.jsxs("div",{className:"modal-content border-0",children:[e.jsxs("div",{className:"modal-header bg-primary text-white",children:[e.jsx("h5",{className:"modal-title mb-0 text-white",children:l.company_name}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>x(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 border-end",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("img",{src:y.img(l.company_logo||"default-company.png"),alt:"Company logo",className:"img-fluid border",style:{maxWidth:"200px",borderRadius:"4px"}})}),e.jsxs("div",{children:[e.jsx("h6",{className:"fw-semibold mb-2",children:"At a Glance"}),e.jsxs("ul",{className:"list-unstyled mb-0 small",children:[e.jsxs("li",{className:"mb-1",children:[e.jsx("strong",{children:"Industry:"})," ",l.company_main_category_id||"N/A"]}),e.jsxs("li",{className:"mb-1",children:[e.jsx("strong",{children:"Founded:"})," ",l.company_year_of_establishment||"N/A"]}),e.jsxs("li",{className:"mb-1",children:[e.jsx("strong",{children:"Employees:"})," ",l.company_employees_range||"N/A"]}),e.jsxs("li",{className:"mb-1",children:[e.jsx("strong",{children:"Location:"})," ",l.company_address||"N/A"]}),e.jsxs("li",{className:"mb-1",children:[e.jsx("strong",{children:"Certifications:"})," ",l.company_certifications||"N/A"]})]})]})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("h5",{className:"fw-semibold mb-3",children:"About the Company"}),e.jsx("p",{className:"small",children:l.company_description}),e.jsxs("div",{className:"row g-3 mt-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"fw-semibold",children:"Online Presence"}),e.jsxs("ul",{className:"list-unstyled small",children:[l.company_website_url&&e.jsx("li",{children:e.jsx("a",{href:l.company_website_url,target:"_blank",rel:"noreferrer",children:"Website"})}),l.company_facebook_url&&e.jsx("li",{children:e.jsx("a",{href:l.company_facebook_url,target:"_blank",rel:"noreferrer",children:"Facebook"})}),l.company_linkedin_url&&e.jsx("li",{children:e.jsx("a",{href:l.company_linkedin_url,target:"_blank",rel:"noreferrer",children:"LinkedIn"})})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"fw-semibold",children:"Details"}),e.jsxs("ul",{className:"list-unstyled small",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"License:"})," ",l.company_trade_license_no||"N/A"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Tax ID:"})," ",l.company_tax_id||"N/A"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ownership:"})," ",l.company_ownership_type||"N/A"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Operating Hours:"})," ",l.company_operating_hours||"N/A"]})]})]})]})]})]})}),e.jsxs("div",{className:"modal-footer border-0",children:[e.jsx("button",{className:"btn btn-sm btn btn-sm btn-primary",disabled:v,onClick:V,children:v?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Following..."]}):"Follow Company"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>x(!1),children:"Close"})]})]})})})})]})};export{W as default};
