import{G as L,q as F,e as P,r as l,j as e,F as s,L as f,S as I,a3 as D,T as u}from"./index-BUlTi-RG.js";import{A as M}from"./Alert-CEmwcEMu.js";import{B as q}from"./Button-D1awEB0c.js";import"./hook-CfU9Pidb.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";import"./useEventCallback-CUECKx-A.js";import"./divWithClassName-BurpA6jg.js";import"./Anchor-DCpCVXp0.js";import"./useEventCallback-CmmpuWZE.js";import"./Button-CKTz88uJ.js";import"./CloseButton-Vs17wP1E.js";import"./TransitionWrapper-BLmPPUNA.js";import"./useMergedRefs-C3O5QAvR.js";const V=()=>{var x,j;const b=L(),w=F(),v=P(),[t,S]=l.useState({email:"",password:"",rememberMe:!1}),[i,c]=l.useState({}),[h,g]=l.useState(!1),[m,n]=l.useState(""),y=((j=(x=w.state)==null?void 0:x.from)==null?void 0:j.pathname)||"/",d=a=>{const{name:r,value:o,type:C,checked:k}=a.target;S(p=>({...p,[r]:C==="checkbox"?k:o})),i[r]&&c(p=>({...p,[r]:void 0})),m&&n("")},N=()=>{const a={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(a.email="Please enter a valid email"):a.email="Email is required",t.password?t.password.length<1&&(a.password="Password is required"):a.password="Password is required",c(a),Object.keys(a).length===0},E=async a=>{if(a.preventDefault(),!!N()){g(!0),c({}),n("");try{const r=await v(D({email:t.email,password:t.password}));if(r.success)u.loginSuccess(),b(y,{replace:!0});else{const o=r.error||"Login failed";n(o),u.loginError(o)}}catch(r){const o=(r==null?void 0:r.message)||"Login failed. Please try again.";n(o),u.loginError(o)}finally{g(!1)}}};return e.jsxs("div",{className:"login-page",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"h3 fw-bold",children:"Sign In"}),e.jsx("p",{className:"text-muted",children:"Welcome back! Please sign in to your account"})]}),m&&e.jsx(M,{variant:"danger",className:"mb-4",children:m}),e.jsxs(s,{onSubmit:E,children:[e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Email Address"}),e.jsx(s.Control,{type:"email",name:"email",value:t.email,onChange:d,isInvalid:!!i.email,placeholder:"Enter your email",autoComplete:"email"}),e.jsx(s.Control.Feedback,{type:"invalid",children:i.email})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx(s.Label,{children:"Password"}),e.jsx(f,{to:"/auth/forgot-password",className:"small text-decoration-none",children:"Forgot password?"})]}),e.jsx(s.Control,{type:"password",name:"password",value:t.password,onChange:d,isInvalid:!!i.password,placeholder:"Enter your password",autoComplete:"current-password"}),e.jsx(s.Control.Feedback,{type:"invalid",children:i.password})]}),e.jsx(s.Group,{className:"mb-4",children:e.jsx(s.Check,{type:"checkbox",name:"rememberMe",checked:t.rememberMe,onChange:d,label:"Remember me"})}),e.jsx(q,{type:"submit",variant:"primary",size:"lg",className:"w-100 mb-4",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(I,{size:"sm",className:"me-2"}),"Signing in..."]}):"Sign In"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-muted",children:"Don't have an account? "}),e.jsx(f,{to:"/auth/register",className:"text-decoration-none fw-semibold",children:"Sign up"})]})]})]})};export{V as default};
