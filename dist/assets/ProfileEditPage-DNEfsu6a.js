import{R as V,r as i,j as e,T as ys,t as gs,g as ws,c as H,s as _e,E as Cs,a as Ss,b as ks,d as Es,e as As,u as J,f as Oe,h as re,i as Fe,B as Ds,k as Ps,l as $s,q as Ie,m as _s,A as Is,n as He,o as Je,p as $,v as Ms,w as Ts,x as G,y as k,z as u,F as U,C as pe,M as I,D as W,G as c,S as z,H as h,I as ue,J as Z,K as T,L as he,P as ae,U as te,N as oe,O as xe,Q as ce,V as de,W as fe,X as Ne,Y as qs,Z as Rs,_ as me,$ as ke,a0 as Bs,a1 as X,a2 as Me,a3 as Os,a4 as Fs,a5 as Hs,a6 as Js,a7 as Ls,a8 as Te,a9 as Ys,aa as se,ab as zs,ac as Us,ad as le,ae as Gs,af as ie}from"./index-D3ojX_Fy.js";import{C as F,a as Le}from"./Container-C9r6mPQj.js";import{u as Ws,a as Ks,m as Vs,b as Xs,c as Qs}from"./useIsomorphicEffect-DKVfpP3g.js";function ne(...a){return a.filter(s=>s!=null).reduce((s,t)=>{if(typeof t!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return s===null?t:function(...n){s.apply(this,n),t.apply(this,n)}},null)}const Zs={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function ea(a,s){const t=`offset${a[0].toUpperCase()}${a.slice(1)}`,l=s[t],n=Zs[a];return l+parseInt(_e(s,n[0]),10)+parseInt(_e(s,n[1]),10)}const sa={[Cs]:"collapse",[Ss]:"collapsing",[ks]:"collapsing",[Es]:"collapse show"},aa=V.forwardRef(({onEnter:a,onEntering:s,onEntered:t,onExit:l,onExiting:n,className:r,children:o,dimension:d="height",in:p=!1,timeout:f=300,mountOnEnter:j=!1,unmountOnExit:x=!1,appear:N=!1,getDimensionValue:b=ea,...S},D)=>{const v=typeof d=="function"?d():d,_=i.useMemo(()=>ne(y=>{y.style[v]="0"},a),[v,a]),P=i.useMemo(()=>ne(y=>{const m=`scroll${v[0].toUpperCase()}${v.slice(1)}`;y.style[v]=`${y[m]}px`},s),[v,s]),A=i.useMemo(()=>ne(y=>{y.style[v]=null},t),[v,t]),w=i.useMemo(()=>ne(y=>{y.style[v]=`${b(v,y)}px`,As(y)},l),[l,b,v]),g=i.useMemo(()=>ne(y=>{y.style[v]=null},n),[v,n]);return e.jsx(ys,{ref:D,addEndListener:gs,...S,"aria-expanded":S.role?p:null,onEnter:_,onEntering:P,onEntered:A,onExit:w,onExiting:g,childRef:ws(o),in:p,timeout:f,mountOnEnter:j,unmountOnExit:x,appear:N,children:(y,m)=>V.cloneElement(o,{...m,className:H(r,o.props.className,sa[y],v==="width"&&"collapse-horizontal")})})});function Ye(a,s){return Array.isArray(a)?a.includes(s):a===s}const je=i.createContext({});je.displayName="AccordionContext";const Ee=i.forwardRef(({as:a="div",bsPrefix:s,className:t,children:l,eventKey:n,...r},o)=>{const{activeEventKey:d}=i.useContext(je);return s=J(s,"accordion-collapse"),e.jsx(aa,{ref:o,in:Ye(d,n),...r,className:H(t,s),children:e.jsx(a,{children:i.Children.only(l)})})});Ee.displayName="AccordionCollapse";const ye=i.createContext({eventKey:""});ye.displayName="AccordionItemContext";const ze=i.forwardRef(({as:a="div",bsPrefix:s,className:t,onEnter:l,onEntering:n,onEntered:r,onExit:o,onExiting:d,onExited:p,...f},j)=>{s=J(s,"accordion-body");const{eventKey:x}=i.useContext(ye);return e.jsx(Ee,{eventKey:x,onEnter:l,onEntering:n,onEntered:r,onExit:o,onExiting:d,onExited:p,children:e.jsx(a,{ref:j,...f,className:H(t,s)})})});ze.displayName="AccordionBody";function ta(a,s){const{activeEventKey:t,onSelect:l,alwaysOpen:n}=i.useContext(je);return r=>{let o=a===t?null:a;n&&(Array.isArray(t)?t.includes(a)?o=t.filter(d=>d!==a):o=[...t,a]:o=[a]),l==null||l(o,r),s==null||s(r)}}const Ae=i.forwardRef(({as:a="button",bsPrefix:s,className:t,onClick:l,...n},r)=>{s=J(s,"accordion-button");const{eventKey:o}=i.useContext(ye),d=ta(o,l),{activeEventKey:p}=i.useContext(je);return a==="button"&&(n.type="button"),e.jsx(a,{ref:r,onClick:d,...n,"aria-expanded":Array.isArray(p)?p.includes(o):o===p,className:H(t,s,!Ye(p,o)&&"collapsed")})});Ae.displayName="AccordionButton";const Ue=i.forwardRef(({as:a="h2","aria-controls":s,bsPrefix:t,className:l,children:n,onClick:r,...o},d)=>(t=J(t,"accordion-header"),e.jsx(a,{ref:d,...o,className:H(l,t),children:e.jsx(Ae,{onClick:r,"aria-controls":s,children:n})})));Ue.displayName="AccordionHeader";const Ge=i.forwardRef(({as:a="div",bsPrefix:s,className:t,eventKey:l,...n},r)=>{s=J(s,"accordion-item");const o=i.useMemo(()=>({eventKey:l}),[l]);return e.jsx(ye.Provider,{value:o,children:e.jsx(a,{ref:r,...n,className:H(t,s)})})});Ge.displayName="AccordionItem";const We=i.forwardRef((a,s)=>{const{as:t="div",activeKey:l,bsPrefix:n,className:r,onSelect:o,flush:d,alwaysOpen:p,...f}=Oe(a,{activeKey:"onSelect"}),j=J(n,"accordion"),x=i.useMemo(()=>({activeEventKey:l,onSelect:o,alwaysOpen:p}),[l,o,p]);return e.jsx(je.Provider,{value:x,children:e.jsx(t,{ref:s,...f,className:H(r,j,d&&`${j}-flush`)})})});We.displayName="Accordion";const Q=Object.assign(We,{Button:Ae,Collapse:Ee,Item:Ge,Header:Ue,Body:ze});function la(a,s,t,l=!1){const n=re(t);i.useEffect(()=>{const r=typeof a=="function"?a():a;return r.addEventListener(s,n,l),()=>r.removeEventListener(s,n,l)},[a])}function ia(a,s,t){const l=i.useRef(a!==void 0),[n,r]=i.useState(s),o=a!==void 0,d=l.current;return l.current=o,!o&&d&&n!==s&&r(s),[o?a:n,i.useCallback((...p)=>{const[f,...j]=p;let x=t==null?void 0:t(f,...j);return r(f),x},[t])]}function na(){const[,a]=i.useReducer(s=>s+1,0);return a}const ge=i.createContext(null),ra=["children","usePopper"];function oa(a,s){if(a==null)return{};var t={};for(var l in a)if({}.hasOwnProperty.call(a,l)){if(s.indexOf(l)>=0)continue;t[l]=a[l]}return t}const ca=()=>{};function Ke(a={}){const s=i.useContext(ge),[t,l]=Ws(),n=i.useRef(!1),{flip:r,offset:o,rootCloseEvent:d,fixed:p=!1,placement:f,popperConfig:j={},enableEventListeners:x=!0,usePopper:N=!!s}=a,b=(s==null?void 0:s.show)==null?!!a.show:s.show;b&&!n.current&&(n.current=!0);const S=y=>{s==null||s.toggle(!1,y)},{placement:D,setMenu:v,menuElement:_,toggleElement:P}=s||{},A=Ks(P,_,Vs({placement:f||D||"bottom-start",enabled:N,enableEvents:x??b,offset:o,flip:r,fixed:p,arrowElement:t,popperConfig:j})),w=Object.assign({ref:v||ca,"aria-labelledby":P==null?void 0:P.id},A.attributes.popper,{style:A.styles.popper}),g={show:b,placement:D,hasShown:n.current,toggle:s==null?void 0:s.toggle,popper:N?A:null,arrowProps:N?Object.assign({ref:l},A.attributes.arrow,{style:A.styles.arrow}):{}};return Xs(_,S,{clickTrigger:d,disabled:!b}),[w,g]}function Ve(a){let{children:s,usePopper:t=!0}=a,l=oa(a,ra);const[n,r]=Ke(Object.assign({},l,{usePopper:t}));return e.jsx(e.Fragment,{children:s(n,r)})}Ve.displayName="DropdownMenu";const ve={prefix:String(Math.round(Math.random()*1e10)),current:0},Xe=V.createContext(ve),da=V.createContext(!1);let ma=!!(typeof window<"u"&&window.document&&window.document.createElement),Ce=new WeakMap;function pa(a=!1){let s=i.useContext(Xe),t=i.useRef(null);if(t.current===null&&!a){var l,n;let r=(n=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||n===void 0||(l=n.ReactCurrentOwner)===null||l===void 0?void 0:l.current;if(r){let o=Ce.get(r);o==null?Ce.set(r,{id:s.current,state:r.memoizedState}):r.memoizedState!==o.state&&(s.current=o.id,Ce.delete(r))}t.current=++s.current}return t.current}function ua(a){let s=i.useContext(Xe);s===ve&&!ma&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let t=pa(!!a),l=`react-aria${s.prefix}`;return a||`${l}-${t}`}function ha(a){let s=V.useId(),[t]=i.useState(va()),l=t?"react-aria":`react-aria${ve.prefix}`;return a||`${l}-${s}`}const xa=typeof V.useId=="function"?ha:ua;function fa(){return!1}function ja(){return!0}function ba(a){return()=>{}}function va(){return typeof V.useSyncExternalStore=="function"?V.useSyncExternalStore(ba,fa,ja):i.useContext(da)}const Qe=a=>{var s;return((s=a.getAttribute("role"))==null?void 0:s.toLowerCase())==="menu"},qe=()=>{};function Ze(){const a=xa(),{show:s=!1,toggle:t=qe,setToggle:l,menuElement:n}=i.useContext(ge)||{},r=i.useCallback(d=>{t(!s,d)},[s,t]),o={id:a,ref:l||qe,onClick:r,"aria-expanded":!!s};return n&&Qe(n)&&(o["aria-haspopup"]=!0),[o,{show:s,toggle:t}]}function es({children:a}){const[s,t]=Ze();return e.jsx(e.Fragment,{children:a(s,t)})}es.displayName="DropdownToggle";const Se=i.createContext(null),Re=(a,s=null)=>a!=null?String(a):s||null,ss=i.createContext(null);ss.displayName="NavContext";const Na=["eventKey","disabled","onClick","active","as"];function ya(a,s){if(a==null)return{};var t={};for(var l in a)if({}.hasOwnProperty.call(a,l)){if(s.indexOf(l)>=0)continue;t[l]=a[l]}return t}function as({key:a,href:s,active:t,disabled:l,onClick:n}){const r=i.useContext(Se),o=i.useContext(ss),{activeKey:d}=o||{},p=Re(a,s),f=t==null&&a!=null?Re(d)===p:t;return[{onClick:re(x=>{l||(n==null||n(x),r&&!x.isPropagationStopped()&&r(p,x))}),"aria-disabled":l||void 0,"aria-selected":f,[Fe("dropdown-item")]:""},{isActive:f}]}const ts=i.forwardRef((a,s)=>{let{eventKey:t,disabled:l,onClick:n,active:r,as:o=Ds}=a,d=ya(a,Na);const[p]=as({key:t,href:d.href,disabled:l,onClick:n,active:r});return e.jsx(o,Object.assign({},d,{ref:s},p))});ts.displayName="DropdownItem";function Be(){const a=na(),s=i.useRef(null),t=i.useCallback(l=>{s.current=l,a()},[a]);return[s,t]}function be({defaultShow:a,show:s,onSelect:t,onToggle:l,itemSelector:n=`* [${Fe("dropdown-item")}]`,focusFirstItemOnShow:r,placement:o="bottom-start",children:d}){const p=Ps(),[f,j]=ia(s,a,l),[x,N]=Be(),b=x.current,[S,D]=Be(),v=S.current,_=$s(f),P=i.useRef(null),A=i.useRef(!1),w=i.useContext(Se),g=i.useCallback((R,B,O=B==null?void 0:B.type)=>{j(R,{originalEvent:B,source:O})},[j]),y=re((R,B)=>{t==null||t(R,B),g(!1,B,"select"),B.isPropagationStopped()||w==null||w(R,B)}),m=i.useMemo(()=>({toggle:g,placement:o,show:f,menuElement:b,toggleElement:v,setMenu:N,setToggle:D}),[g,o,f,b,v,N,D]);b&&_&&!f&&(A.current=b.contains(b.ownerDocument.activeElement));const C=re(()=>{v&&v.focus&&v.focus()}),E=re(()=>{const R=P.current;let B=r;if(B==null&&(B=x.current&&Qe(x.current)?"keyboard":!1),B===!1||B==="keyboard"&&!/^key.+$/.test(R))return;const O=Ie(x.current,n)[0];O&&O.focus&&O.focus()});i.useEffect(()=>{f?E():A.current&&(A.current=!1,C())},[f,A,C,E]),i.useEffect(()=>{P.current=null});const q=(R,B)=>{if(!x.current)return null;const O=Ie(x.current,n);let Y=O.indexOf(R)+B;return Y=Math.max(0,Math.min(Y,O.length)),O[Y]};return la(i.useCallback(()=>p.document,[p]),"keydown",R=>{var B,O;const{key:Y}=R,ee=R.target,Pe=(B=x.current)==null?void 0:B.contains(ee),Ns=(O=S.current)==null?void 0:O.contains(ee);if(/input|textarea/i.test(ee.tagName)&&(Y===" "||Y!=="Escape"&&Pe||Y==="Escape"&&ee.type==="search")||!Pe&&!Ns||Y==="Tab"&&(!x.current||!f))return;P.current=R.type;const we={originalEvent:R,source:R.type};switch(Y){case"ArrowUp":{const L=q(ee,-1);L&&L.focus&&L.focus(),R.preventDefault();return}case"ArrowDown":if(R.preventDefault(),!f)j(!0,we);else{const L=q(ee,1);L&&L.focus&&L.focus()}return;case"Tab":_s(ee.ownerDocument,"keyup",L=>{var $e;(L.key==="Tab"&&!L.target||!(($e=x.current)!=null&&$e.contains(L.target)))&&j(!1,we)},{once:!0});break;case"Escape":Y==="Escape"&&(R.preventDefault(),R.stopPropagation()),j(!1,we);break}}),e.jsx(Se.Provider,{value:y,children:e.jsx(ge.Provider,{value:m,children:d})})}be.displayName="Dropdown";be.Menu=Ve;be.Toggle=es;be.Item=ts;const De=i.createContext({});De.displayName="DropdownContext";const ls=i.forwardRef(({className:a,bsPrefix:s,as:t="hr",role:l="separator",...n},r)=>(s=J(s,"dropdown-divider"),e.jsx(t,{ref:r,className:H(a,s),role:l,...n})));ls.displayName="DropdownDivider";const is=i.forwardRef(({className:a,bsPrefix:s,as:t="div",role:l="heading",...n},r)=>(s=J(s,"dropdown-header"),e.jsx(t,{ref:r,className:H(a,s),role:l,...n})));is.displayName="DropdownHeader";const ns=i.forwardRef(({bsPrefix:a,className:s,eventKey:t,disabled:l=!1,onClick:n,active:r,as:o=Is,...d},p)=>{const f=J(a,"dropdown-item"),[j,x]=as({key:t,href:d.href,disabled:l,onClick:n,active:r});return e.jsx(o,{...d,...j,ref:p,className:H(s,f,x.isActive&&"active",l&&"disabled")})});ns.displayName="DropdownItem";const rs=i.forwardRef(({className:a,bsPrefix:s,as:t="span",...l},n)=>(s=J(s,"dropdown-item-text"),e.jsx(t,{ref:n,className:H(a,s),...l})));rs.displayName="DropdownItemText";const os=i.createContext(null);os.displayName="NavbarContext";function cs(a,s){return a}function ds(a,s,t){const l=t?"top-end":"top-start",n=t?"top-start":"top-end",r=t?"bottom-end":"bottom-start",o=t?"bottom-start":"bottom-end",d=t?"right-start":"left-start",p=t?"right-end":"left-end",f=t?"left-start":"right-start",j=t?"left-end":"right-end";let x=a?o:r;return s==="up"?x=a?n:l:s==="end"?x=a?j:f:s==="start"?x=a?p:d:s==="down-centered"?x="bottom":s==="up-centered"&&(x="top"),x}const ms=i.forwardRef(({bsPrefix:a,className:s,align:t,rootCloseEvent:l,flip:n=!0,show:r,renderOnMount:o,as:d="div",popperConfig:p,variant:f,...j},x)=>{let N=!1;const b=i.useContext(os),S=J(a,"dropdown-menu"),{align:D,drop:v,isRTL:_}=i.useContext(De);t=t||D;const P=i.useContext(He),A=[];if(t)if(typeof t=="object"){const R=Object.keys(t);if(R.length){const B=R[0],O=t[B];N=O==="start",A.push(`${S}-${B}-${O}`)}}else t==="end"&&(N=!0);const w=ds(N,v,_),[g,{hasShown:y,popper:m,show:C,toggle:E}]=Ke({flip:n,rootCloseEvent:l,show:r,usePopper:!b&&A.length===0,offset:[0,2],popperConfig:p,placement:w});if(g.ref=Je(cs(x),g.ref),Qs(()=>{C&&(m==null||m.update())},[C]),!y&&!o&&!P)return null;typeof d!="string"&&(g.show=C,g.close=()=>E==null?void 0:E(!1),g.align=t);let q=j.style;return m!=null&&m.placement&&(q={...j.style,...g.style},j["x-placement"]=m.placement),e.jsx(d,{...j,...g,style:q,...(A.length||b)&&{"data-bs-popper":"static"},className:H(s,S,C&&"show",N&&`${S}-end`,f&&`${S}-${f}`,...A)})});ms.displayName="DropdownMenu";const ps=i.forwardRef(({bsPrefix:a,split:s,className:t,childBsPrefix:l,as:n=$,...r},o)=>{const d=J(a,"dropdown-toggle"),p=i.useContext(ge);l!==void 0&&(r.bsPrefix=l);const[f]=Ze();return f.ref=Je(f.ref,cs(o)),e.jsx(n,{className:H(t,d,s&&`${d}-split`,(p==null?void 0:p.show)&&"show"),...f,...r})});ps.displayName="DropdownToggle";const us=i.forwardRef((a,s)=>{const{bsPrefix:t,drop:l="down",show:n,className:r,align:o="start",onSelect:d,onToggle:p,focusFirstItemOnShow:f,as:j="div",navbar:x,autoClose:N=!0,...b}=Oe(a,{show:"onToggle"}),S=i.useContext(He),D=J(t,"dropdown"),v=Ms(),_=m=>N===!1?m==="click":N==="inside"?m!=="rootClose":N==="outside"?m!=="select":!0,P=Ts((m,C)=>{var E;!((E=C.originalEvent)==null||(E=E.target)==null)&&E.classList.contains("dropdown-toggle")&&C.source==="mousedown"||(C.originalEvent.currentTarget===document&&(C.source!=="keydown"||C.originalEvent.key==="Escape")&&(C.source="rootClose"),_(C.source)&&(p==null||p(m,C)))}),w=ds(o==="end",l,v),g=i.useMemo(()=>({align:o,drop:l,isRTL:v}),[o,l,v]),y={down:D,"down-centered":`${D}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return e.jsx(De.Provider,{value:g,children:e.jsx(be,{placement:w,show:n,onSelect:d,onToggle:P,focusFirstItemOnShow:f,itemSelector:`.${D}-item:not(.disabled):not(:disabled)`,children:S?b.children:e.jsx(j,{...b,ref:s,className:H(r,n&&"show",y[l])})})})});us.displayName="Dropdown";const M=Object.assign(us,{Toggle:ps,Menu:ms,Item:ns,ItemText:rs,Divider:ls,Header:is}),ga=[{value:"primary",label:"Primary School"},{value:"secondary",label:"Secondary School"},{value:"bachelor",label:"Bachelor's Degree"},{value:"master",label:"Master's Degree"},{value:"doctorate",label:"Doctorate"},{value:"diploma",label:"Diploma"},{value:"certificate",label:"Certificate"}],hs=G().shape({education_level:k().required("Education level is required"),major:k().required("Major/Concentration is required"),institution:k().required("Institution name is required"),duration:k().required("Duration is required"),graduation_year:k().required("Graduation year is required").matches(/^\d{4}$/,"Must be a valid year"),result:k().required("Result is required")}),xs=G().shape({training_title:k().required("Training title is required"),provider:k().required("Provider is required"),year:k().required("Year is required").matches(/^\d{4}$/,"Must be valid year"),remarks:k().nullable()}),fs=G().shape({certificate_title:k().required("Certificate title is required"),issuing_authority:k().required("Issuing authority is required"),date_issued:k().required("Date issued is required"),certificate_id:k().nullable()}),wa=i.memo(({academic:a,onEdit:s,onDelete:t})=>e.jsx(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(F,{className:"mb-3 hover-shadow",children:[e.jsxs(F.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-0 text-primary",children:[a.education_level," - ",a.major]}),e.jsx("small",{className:"text-muted",children:a.institution})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow",children:e.jsx(U,{className:"text-muted"})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:s,children:[e.jsx(U,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:t,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsx(F.Body,{children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Duration"}),e.jsx("p",{className:"mb-0",children:a.duration})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Graduation Year"}),e.jsx("p",{className:"mb-0",children:a.graduation_year})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Result"}),e.jsx("p",{className:"mb-0",children:a.result})]})]})})]})})),Ca=i.memo(({training:a,onEdit:s,onDelete:t})=>e.jsx(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(F,{className:"mb-3 hover-shadow",children:[e.jsxs(F.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary",children:a.training_title}),e.jsx("small",{className:"text-muted",children:a.provider})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow",children:e.jsx(U,{className:"text-muted"})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:s,children:[e.jsx(U,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:t,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsx(F.Body,{children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Year"}),e.jsx("p",{className:"mb-0",children:a.year})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("label",{className:"text-muted small",children:"Remarks"}),e.jsx("p",{className:"mb-0",children:a.remarks||"N/A"})]})]})})]})})),Sa=i.memo(({certificate:a,onEdit:s,onDelete:t})=>e.jsx(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(F,{className:"mb-3 hover-shadow",children:[e.jsxs(F.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary",children:a.certificate_title}),e.jsx("small",{className:"text-muted",children:a.issuing_authority})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow",children:e.jsx(U,{className:"text-muted"})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:s,children:[e.jsx(U,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:t,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsx(F.Body,{children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"text-muted small",children:"Date Issued"}),e.jsx("p",{className:"mb-0",children:a.date_issued})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"text-muted small",children:"Certificate ID"}),e.jsx("p",{className:"mb-0",children:a.certificate_id||"N/A"})]})]})})]})})),ka=()=>{const a=ue(),{currentUser:s,setCurrentUser:t}=Z(),[l,n]=i.useState(!1),[r,o]=i.useState(!1),[d,p]=i.useState(!1),[f,j]=i.useState(null),[x,N]=i.useState(null),[b,S]=i.useState(null),[D,v]=i.useState(!1);if(!s)return T.error("User not found"),null;const _={academics:s!=null&&s.degree_university_name?JSON.parse(s.degree_university_name):[],trainings:s!=null&&s.high_school_name?JSON.parse(s.high_school_name):[],certifications:s!=null&&s.seconday_school_name?JSON.parse(s.seconday_school_name):[],submitAction:""},P=i.useCallback(async w=>{v(!0);try{const g={...s,degree_university_name:JSON.stringify(w.academics),high_school_name:JSON.stringify(w.trainings),seconday_school_name:JSON.stringify(w.certifications)},y=await he("profile",g),m=ae.fromJson(JSON.stringify(y));te.saveProfile(m),T.success("Profile updated successfully",{icon:e.jsx("span",{children:"✅"})}),w.submitAction==="saveAndNext"&&(t(m),a("/admin/profile-edit/employment"))}catch{T.error("Failed to save profile updates",{icon:e.jsx("span",{children:"❌"})})}finally{v(!1)}},[s,t,a]),A=i.useCallback((w,g,y)=>{T(e.jsxs("div",{children:[e.jsxs("p",{children:["Delete this ",y," entry?"]}),e.jsxs("div",{className:"d-flex gap-2 mt-2",children:[e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>{g(w),T.dismiss()},children:"Delete"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>T.dismiss(),children:"Cancel"})]})]}),{icon:e.jsx("span",{children:"⚠️"})})},[]);return e.jsx(W,{initialValues:_,validateOnChange:!1,validationSchema:G({academics:oe().of(hs),trainings:oe().of(xs),certifications:oe().of(fs)}),onSubmit:P,children:({values:w,setFieldValue:g})=>e.jsxs(xe,{children:[e.jsxs("div",{className:"accordion",id:"eduAccordion",children:[e.jsxs(u.div,{className:"accordion-item",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"academicsHeading",children:e.jsx("button",{className:"accordion-button bg-light text-black fw-bold text-gray-900",type:"button","data-bs-toggle":"collapse","data-bs-target":"#academicsCollapse","aria-expanded":"true","aria-controls":"academicsCollapse",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Academic Qualifications"})})}),e.jsx("div",{id:"academicsCollapse",className:"accordion-collapse collapse show","aria-labelledby":"academicsHeading","data-bs-parent":"#eduAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("span",{className:"fw-bold",children:"List of Academic Entries"}),e.jsxs($,{variant:"primary",size:"sm",onClick:()=>{j(null),n(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Entry"]})]}),e.jsx(de,{name:"academics",children:({push:y,remove:m,replace:C})=>e.jsxs(e.Fragment,{children:[w.academics.map((E,q)=>e.jsx(wa,{academic:E,onEdit:()=>{j(q),n(!0)},onDelete:()=>A(q,m,"academic")},E.id)),e.jsx(Ea,{show:l,onHide:()=>n(!1),onSubmit:E=>{f!==null?C(f,E):y(E),n(!1)},initialValues:f!==null?w.academics[f]:null})]})})]})})]}),e.jsxs(u.div,{className:"accordion-item",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"trainingHeading",children:e.jsx("button",{className:"accordion-button bg-light text-black fw-bold text-gray-900 collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#trainingCollapse","aria-expanded":"false","aria-controls":"trainingCollapse",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Trainings"})})}),e.jsx("div",{id:"trainingCollapse",className:"accordion-collapse collapse","aria-labelledby":"trainingHeading","data-bs-parent":"#eduAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("span",{className:"fw-bold",children:"List of Trainings"}),e.jsxs($,{variant:"primary",size:"sm",onClick:()=>{N(null),o(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Training"]})]}),e.jsx(de,{name:"trainings",children:({push:y,remove:m,replace:C})=>e.jsxs(e.Fragment,{children:[w.trainings.map((E,q)=>e.jsx(Ca,{training:E,onEdit:()=>{N(q),o(!0)},onDelete:()=>A(q,m,"training")},E.id)),e.jsx(Aa,{show:r,onHide:()=>o(!1),onSubmit:E=>{x!==null?C(x,E):y(E),o(!1)},initialValues:x!==null?w.trainings[x]:null})]})})]})})]}),e.jsxs(u.div,{className:"accordion-item",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"certHeading",children:e.jsx("button",{className:"accordion-button bg-light text-black fw-bold text-gray-900 collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#certCollapse","aria-expanded":"false","aria-controls":"certCollapse",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Professional Certificates"})})}),e.jsx("div",{id:"certCollapse",className:"accordion-collapse collapse","aria-labelledby":"certHeading","data-bs-parent":"#eduAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("span",{className:"fw-bold",children:"List of Certificates"}),e.jsxs($,{variant:"primary",size:"sm",onClick:()=>{S(null),p(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Certificate"]})]}),e.jsx(de,{name:"certifications",children:({push:y,remove:m,replace:C})=>e.jsxs(e.Fragment,{children:[w.certifications.map((E,q)=>e.jsx(Sa,{certificate:E,onEdit:()=>{S(q),p(!0)},onDelete:()=>A(q,m,"certificate")},E.id)),e.jsx(Da,{show:d,onHide:()=>p(!1),onSubmit:E=>{b!==null?C(b,E):y(E),p(!1)},initialValues:b!==null?w.certifications[b]:null})]})})]})})]})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5 border-top pt-4 mb-4 pe-5 ps-0",children:[e.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>a("/admin/profile-edit/bio"),children:"← Back"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",onClick:()=>g("submitAction","save"),disabled:D,children:[e.jsx(fe,{className:"me-2"}),D?"Saving...":"Save"]}),e.jsxs("button",{type:"submit",className:"btn btn-success",onClick:()=>g("submitAction","saveAndNext"),disabled:D,children:["Next Step",e.jsx(Ne,{className:"ms-2"})]})]})]})]})})},Ea=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:l})=>e.jsx(I,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(W,{initialValues:l||{id:Math.random().toString(36).substr(2,9),education_level:"",major:"",institution:"",duration:"",graduation_year:"",result:""},validationSchema:hs,onSubmit:t,validateOnChange:!1,children:({handleSubmit:n,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(I.Header,{closeButton:!0,className:"bg-light",children:e.jsx(I.Title,{children:l?"Edit Education":"Add New Education"})}),e.jsx(I.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"education_level",label:"Education Level",component:o=>e.jsx(z,{...o,options:ga,placeholder:"Select"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"major",label:"Major/Concentration",placeholder:"e.g. Computer Science",component:h})}),e.jsx("div",{className:"col-md-12",children:e.jsx(c,{name:"institution",label:"Institution Name",placeholder:"University of Example",component:h})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"duration",label:"Duration",placeholder:"e.g. 4 years",component:h})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"graduation_year",label:"Graduation Year",placeholder:"2020",component:h})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"result",label:"Result",placeholder:"e.g. GPA 3.8",component:h})})]})}),e.jsxs(I.Footer,{className:"border-0",children:[e.jsx($,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx($,{variant:"primary",onClick:()=>n(),disabled:r,children:l?"Save Changes":"Add Education"})]})]})})})),Aa=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:l})=>e.jsx(I,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(W,{initialValues:l||{id:Math.random().toString(36).substr(2,9),training_title:"",provider:"",year:"",remarks:""},validationSchema:xs,onSubmit:t,validateOnChange:!1,children:({handleSubmit:n,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(I.Header,{closeButton:!0,className:"bg-light",children:e.jsx(I.Title,{children:l?"Edit Training":"Add New Training"})}),e.jsx(I.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"training_title",label:"Training Title",placeholder:"e.g. Project Management",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"provider",label:"Provider",placeholder:"e.g. ABC Institute",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"year",label:"Year",placeholder:"2021",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"remarks",label:"Remarks",placeholder:"Any relevant notes...",component:h})})]})}),e.jsxs(I.Footer,{className:"border-0",children:[e.jsx($,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx($,{variant:"primary",onClick:()=>n(),disabled:r,children:l?"Save Changes":"Add Training"})]})]})})})),Da=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:l})=>e.jsx(I,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(W,{initialValues:l||{id:Math.random().toString(36).substr(2,9),certificate_title:"",issuing_authority:"",date_issued:"",certificate_id:""},validationSchema:fs,onSubmit:t,validateOnChange:!1,children:({handleSubmit:n,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(I.Header,{closeButton:!0,className:"bg-light",children:e.jsx(I.Title,{children:l?"Edit Certificate":"Add New Certificate"})}),e.jsx(I.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"certificate_title",label:"Certificate Title",placeholder:"e.g. Certified Network Admin",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"issuing_authority",label:"Issuing Authority",placeholder:"e.g. Cisco",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"date_issued",label:"Date Issued",placeholder:"2022-05-10",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"certificate_id",label:"Certificate ID",placeholder:"Optional",component:h})})]})}),e.jsxs(I.Footer,{className:"border-0",children:[e.jsx($,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx($,{variant:"primary",onClick:()=>n(),disabled:r,children:l?"Save Changes":"Add Certificate"})]})]})})})),js=i.createContext(void 0),Pa=()=>{const a=i.useContext(js);if(!a)throw new Error("useProfileEdit must be used within a ProfileEditProvider");return a},$a=({children:a})=>{const[s,t]=i.useState(new ae);return e.jsx(js.Provider,{value:{profile:s,setProfile:t},children:a})},K={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:10}},_a=()=>{const a=ue(),[s,t]=i.useState(!1),[l,n]=i.useState(!1),[r,o]=i.useState(""),[d,p]=i.useState(""),[f,j]=i.useState(!1),{setCurrentUser:x}=Z(),{currentUser:N}=Z(),[b,S]=i.useState([]),[D,v]=i.useState([]);if(!N)return alert("User not found"),null;const _=G().shape({first_name:k().required("First Name is required"),last_name:k().min(2,"Last Name must be at least 2 characters").required("Last Name is required"),sex:k().required("Gender is required"),title:k().required("Title is required")});i.useEffect(()=>{P()},[]);const P=async()=>{var w=await qs.getItems();if(w!=null&&w.CATEGORIES!=null){var g=[];for(var y in w.CATEGORIES){var m=w.CATEGORIES[y];m!=null&&g.push({value:m.id,label:m.name})}g.length>0?v(g):alert("No job categories found")}var C=[];try{C=await Rs.getItems()}catch(q){alert("Failed to load districts: "+q);return}if(C.length<1){alert("No districts found");return}S([]);let E=[];for(const q of C)q.name&&E.push({value:q.id+"",label:q.name});S(E)},A=async(w,g)=>{o(""),p(""),j(!0);const y=(w==null?void 0:w.submitAction)||"save";try{const m=await he("profile",w),C=ae.fromJson(JSON.stringify(m));x(C),te.saveProfile(C),p("Profile updated successfully"),T.success("Profile updated successfully"),y==="saveAndNext"&&a("/admin/profile-edit/education")}catch(m){o("Failed: "+m),T.error("Profile update failed"),g.setSubmitting(!1)}finally{j(!1),g.setSubmitting(!1)}};return e.jsx(W,{initialValues:N,validationSchema:_,onSubmit:A,children:({values:w,isSubmitting:g,setFieldValue:y})=>e.jsx(me,{mode:"wait",children:e.jsx(u.div,{variants:K,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(xe,{children:[f&&e.jsx(u.div,{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-dark bg-opacity-50",variants:K,initial:"hidden",animate:"visible",exit:"exit",style:{zIndex:9999},children:e.jsx("div",{className:"spinner-border text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),r&&e.jsxs(u.div,{className:"alert alert-danger alert-dismissible fade show",role:"alert",variants:K,initial:"hidden",animate:"visible",exit:"exit",children:[r,e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),d&&e.jsxs(u.div,{className:"alert alert-success alert-dismissible fade show",role:"alert",variants:K,initial:"hidden",animate:"visible",exit:"exit",children:[d,e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),e.jsxs("div",{className:"accordion",id:"profileEditAccordion",children:[e.jsxs(u.div,{className:"accordion-item",variants:K,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"headingOne",children:e.jsx("button",{className:"accordion-button bg-light text-black fw-bold text-gray-900",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Personal Details"})})}),e.jsx("div",{id:"collapseOne",className:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#profileEditAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"title",label:"Title",options:[{value:"Mr",label:"Mr"},{value:"Mrs",label:"Mrs"},{value:"Miss",label:"Miss"},{value:"Ms",label:"Ms"},{value:"Dr",label:"Dr"},{value:"Prof",label:"Prof"},{value:"Rev",label:"Rev"},{value:"Hon",label:"Hon"}],component:z})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"first_name",label:e.jsxs(e.Fragment,{children:["First Name"," ",e.jsx("span",{className:"text-danger",children:"*"})]}),placeholder:"Enter First Name",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"last_name",label:"Last Name",placeholder:"Enter Last Name",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"sex",label:"Gender",options:[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],component:m=>e.jsx(z,{...m})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"father_name",label:"Father's Name",placeholder:"Enter Father's Name",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"mother_name",label:"Mother's Name",placeholder:"Enter Mother's Name",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"date_of_birth",label:"Date of Birth",component:ke})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"religion",label:"Religion",options:[{value:"Islam",label:"Islam"},{value:"Christian",label:"Christian"},{value:"Hindu",label:"Hindu"},{value:"Other",label:"Other"}],component:z})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"marital_status",label:"Marital Status",options:[{value:"Single",label:"Single"},{value:"Married",label:"Married"},{value:"Divorced",label:"Divorced"},{value:"Widowed",label:"Widowed"}],component:z})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"nationality",label:"Nationality",options:Bs,component:z})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"languages",label:"Languages",placeholder:"e.g. English, Swahili",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"blood_group",label:"Blood Group",options:[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"}],component:z})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"height",label:"Height",placeholder:"e.g. 170 cm",component:h})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"weight",label:"Weight",placeholder:"e.g. 65 kg",component:h})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{name:"has_disability",label:"Do you have a disability?",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline",onChange:C=>{m.form.setFieldValue(m.field.name,C.target.value),n(C.target.value==="Yes")}})})})]}),e.jsx(me,{mode:"wait",children:l&&e.jsxs(u.div,{variants:K,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"is_registered_on_disability",label:"Are you registered on ict4personswithdisabilities.org?",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"disability_type",label:"Disability Type",placeholder:"Enter Disability Type",component:h})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"dificulty_display_on_cv",label:"Display Difficulty on CV",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})})}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(c,{name:"dificulty_to_see",label:"Difficulty to See",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(c,{name:"dificulty_to_hear",label:"Difficulty to Hear",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(c,{name:"dificulty_to_walk",label:"Difficulty to Walk",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(c,{name:"dificulty_to_speak",label:"Difficulty to Speak",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline"})})})]})]})})]})})]}),e.jsxs(u.div,{className:"accordion-item",variants:K,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"headingTwo",children:e.jsx("button",{className:"accordion-button collapsed bg-light text-black fw-bold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Contact & Identity"})})}),e.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#profileEditAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"district_id",label:"District",placeholder:"District of Residence",options:b,component:z})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"home_address",label:"Home Address",placeholder:"Permanent or Family Residence",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"current_address",label:"Current Address",placeholder:"Present Working/Residence Address",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"phone_number_1",label:e.jsx(e.Fragment,{children:"Phone Number 1"}),placeholder:"Primary Contact No.",component:h,disabled:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"phone_number_2",label:"Phone Number 2",placeholder:"Alternate Contact No.",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"country_code",label:"Country Code",placeholder:"e.g. +256",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"emergency_person_name",label:"Emergency Contact Name",placeholder:"Who to contact in emergency",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"emergency_person_phone",label:"Emergency Contact Phone",placeholder:"Enter phone no.",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"national_id_number",label:"National ID Number",placeholder:"Enter your National ID",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"passport_number",label:"Passport Number",placeholder:"Enter Passport No.",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"tin",label:"TIN",placeholder:"Tax Identification Number",component:h})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"nssf_number",label:"NSSF Number",placeholder:"Social Security Number",component:h})})})]})})]}),e.jsxs(u.div,{className:"accordion-item",variants:K,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",id:"headingThree",children:e.jsx("button",{className:"accordion-button collapsed bg-light text-black fw-bold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"false","aria-controls":"collapseThree",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Professional & Job Preferences"})})}),e.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#profileEditAccordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"special_qualification",label:"Job Designation",placeholder:"e.g. Software Engineer, Business Analyst, etc.",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"objective",label:"Career Objective",placeholder:"Briefly describe your career objective",component:Me})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsx(c,{name:"career_summary",label:"Career Summary",placeholder:"Short summary of work experience",component:Me})})}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"present_salary",label:"Present Salary",placeholder:"Enter current salary if employed",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"expected_salary",label:"Expected Salary",placeholder:"Enter your expected salary",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"expected_job_level",label:"Expected Job",placeholder:"e.g. Software Engineer, Business Analyst, etc.",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"expected_job_nature",label:"Expected Job Nature",placeholder:"Full Time / Part Time / Contract",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_location",label:"Preferred Job Location",placeholder:"e.g. Kampala",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_category",label:"Select Preferred Job Category",placeholder:"e.g. IT, Finance, Marketing",options:D,component:z})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_category_other",label:"Preferred Job Category (Other)",placeholder:"Enter if not listed above",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_districts",label:"Preferred Job Districts",placeholder:"List any specific districts",component:h})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"preferred_job_abroad",label:"Preferred Job Abroad",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],component:m=>e.jsx(X,{...m,radioClass:"form-check form-check-inline",onChange:C=>{m.form.setFieldValue(m.field.name,C.target.value),t(C.target.value==="Yes")}})})}),e.jsx(me,{mode:"wait",children:s&&e.jsx(u.div,{className:"col-md-6",variants:K,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx(c,{name:"preferred_job_countries",label:"Preferred Job Countries",placeholder:"List countries if abroad is yes",component:h})})})]})]})})]})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5 border-top pt-4 mb-5 mb-lg-10",children:[e.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>a("/admin/profile-edit/photo"),children:"← Back"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",onClick:()=>y("submitAction","save"),disabled:g,children:[e.jsx(fe,{className:"me-2"}),g?"Saving...":"Save"]}),e.jsxs("button",{type:"submit",className:"btn btn-success",onClick:()=>y("submitAction","saveAndNext"),disabled:g,children:["Next Step",e.jsx(Ne,{className:"ms-2"})]})]})]})]})})})})},Ia={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-20}},Ma={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.2}}},bs=G().shape({companyName:k().required("Company Name is required"),companyBusiness:k().required("Company Business is required"),position:k().required("Designation/Position is required"),department:k().required("Department is required"),startDate:k().required("Employment start date is required"),responsibilities:k().required("Responsibilities are required"),employmentPeriod:k().required("Employment period is required"),stillEmployed:Os()}),Ta=i.memo(({employment:a,index:s,onEdit:t,onDelete:l})=>e.jsx(u.div,{variants:Ia,initial:"hidden",animate:"visible",exit:"exit",layout:!0,children:e.jsxs(F,{className:"mb-3 hover-shadow transition-all",children:[e.jsxs(F.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary",children:a.position}),e.jsx("small",{className:"text-muted",children:a.companyName})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow p-0",children:e.jsx(u.div,{whileHover:{scale:1.1},children:e.jsx(U,{className:"text-muted fs-5"})})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:t,children:[e.jsx(U,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:l,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsxs(F.Body,{children:[e.jsxs(u.div,{layout:!0,className:"row g-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Company Business"}),e.jsx("p",{className:"mb-0",children:a.companyBusiness})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Department"}),e.jsx("p",{className:"mb-0",children:a.department})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Start Date"}),e.jsx("p",{className:"mb-0",children:a.startDate})]})]}),e.jsx(u.div,{layout:!0,className:"row g-2 mt-2",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"text-muted small",children:"Responsibilities"}),e.jsx("p",{className:"mb-0",children:a.responsibilities})]})}),e.jsxs(u.div,{layout:!0,className:"row g-2 mt-2",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"text-muted small",children:"Employment Period (in Years)"}),e.jsx("p",{className:"mb-0",children:a.employmentPeriod})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"text-muted small",children:"Still Employed?"}),e.jsx("p",{className:"mb-0",children:a.stillEmployed?"Yes":"No"})]})]})]})]})})),qa=()=>{const a=ue(),{currentUser:s,setCurrentUser:t}=Z(),[l,n]=i.useState(!1),[r,o]=i.useState(null),[d,p]=i.useState(!1);if(!s)return T.error("User not found"),null;const f={employmentHistories:s!=null&&s.primary_school_name?JSON.parse(s.primary_school_name):[],submitAction:""},j=i.useCallback(async N=>{p(!0);try{const b={...s,primary_school_name:JSON.stringify(N.employmentHistories)},S=await he("profile",b),D=ae.fromJson(JSON.stringify(S));te.saveProfile(D),T.success("Employment details updated successfully",{icon:e.jsx("span",{children:"✅"})}),N.submitAction==="saveAndNext"&&a("/admin/profile-edit/other-section")}catch{T.error("Failed to save employment details",{icon:e.jsx("span",{children:"❌"})})}finally{p(!1)}},[s,t,a]),x=i.useCallback((N,b)=>{T(e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"d-flex flex-column p-3",children:[e.jsx("h6",{className:"mb-3",children:"Delete this employment entry?"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx($,{variant:"danger",size:"sm",onClick:()=>{b(N),T.dismiss()},children:"Delete"}),e.jsx($,{variant:"outline-secondary",size:"sm",onClick:()=>T.dismiss(),children:"Cancel"})]})]}),{icon:e.jsx("span",{children:"⚠️"})})},[]);return e.jsx(Le,{fluid:"lg",className:"py-4",children:e.jsx(W,{initialValues:f,validationSchema:G({employmentHistories:oe().of(bs)}),validateOnChange:!1,onSubmit:j,children:({values:N,setFieldValue:b})=>e.jsxs(xe,{children:[e.jsx(Q,{defaultActiveKey:"0",className:"shadow-sm rounded-3 overflow-hidden",children:e.jsxs(Q.Item,{eventKey:"0",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",children:e.jsx(Q.Button,{className:"bg-light text-black fw-bold text-gray-900",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Employment History"})})}),e.jsx(Q.Collapse,{eventKey:"0",children:e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4",children:[e.jsx("div",{className:"d-flex justify-content-end mb-4",children:e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsxs($,{variant:"primary",onClick:()=>{o(null),n(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Employment"]})})}),e.jsx(de,{name:"employmentHistories",children:({push:S,remove:D,replace:v})=>e.jsx(me,{mode:"popLayout",children:N.employmentHistories.map((_,P)=>e.jsx(Ta,{employment:_,index:P,onEdit:()=>{o(P),n(!0)},onDelete:()=>x(P,D)},_.id))})})]})})]})}),e.jsx(Ra,{show:l,onHide:()=>n(!1),onSubmit:S=>{r!==null?b(`employmentHistories[${r}]`,S):b("employmentHistories",[...N.employmentHistories,S]),n(!1)},initialValues:r!==null?N.employmentHistories[r]:null}),e.jsxs(u.div,{className:"d-flex justify-content-between mt-5 border-top pt-4",layout:!0,children:[e.jsx(u.div,{whileHover:{x:-5},children:e.jsx($,{variant:"outline-primary",onClick:()=>a("/admin/profile-edit/education"),children:"← Back"})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsxs($,{type:"submit",variant:"primary",onClick:()=>b("submitAction","save"),disabled:d,children:[e.jsx(fe,{className:"me-2"}),d?e.jsx("span",{className:"spinner-border spinner-border-sm"}):"Save"]})}),e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsxs($,{type:"submit",variant:"success",onClick:()=>b("submitAction","saveAndNext"),disabled:d,children:["Next Step",e.jsx(Ne,{className:"ms-2"})]})})]})]})]})})})},Ra=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:l})=>e.jsx(I,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(u.div,{variants:Ma,initial:"hidden",animate:"visible",children:e.jsx(W,{initialValues:l||{id:Math.random().toString(36).substr(2,9),companyName:"",companyBusiness:"",position:"",department:"",startDate:"",responsibilities:"",employmentPeriod:"",stillEmployed:!1},validationSchema:bs,onSubmit:t,validateOnChange:!1,children:({handleSubmit:n,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(I.Header,{closeButton:!0,className:"bg-light",children:e.jsx(I.Title,{className:"text-primary",children:l?"Edit Employment":"Add New Employment"})}),e.jsx(I.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"companyName",label:"Company Name",placeholder:"ABC Ltd.",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"companyBusiness",label:"Company Business",placeholder:"Software, Retail, Consulting...",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"position",label:"Position",placeholder:"e.g. Software Engineer",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"department",label:"Department",placeholder:"e.g. IT",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"startDate",label:"Start Date",component:ke})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"employmentPeriod",label:"Employment Period (in Years)",placeholder:"e.g. 2 Years",component:h})}),e.jsx("div",{className:"col-12",children:e.jsx(c,{name:"responsibilities",label:"Responsibilities",placeholder:"Your daily duties...",component:h,as:"textarea",rows:4})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-check",children:[e.jsx(c,{type:"checkbox",name:"stillEmployed",className:"form-check-input",id:"stillEmployed"}),e.jsx("label",{className:"form-check-label",htmlFor:"stillEmployed",children:"Currently employed here"})]})})]})}),e.jsxs(I.Footer,{className:"border-0",children:[e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsx($,{variant:"outline-secondary",onClick:s,children:"Cancel"})}),e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsx($,{variant:"primary",onClick:()=>n(),disabled:r,children:l?"Save Changes":"Add Employment"})})]})]})})})})),Ba={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-20}},Oa={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.2}}},Fa=[{value:"publication",label:"Publication"},{value:"award",label:"Award"},{value:"project",label:"Project"},{value:"other",label:"Other"}],vs=G().shape({type:k().required("Accomplishment type is required"),title:k().required("Title is required"),description:k().required("Description is required"),url:k().url("Must be a valid URL").nullable(),issueDate:k().required("Issue date is required")}),Ha=i.memo(({accomplishment:a,index:s,onEdit:t,onDelete:l})=>e.jsx(u.div,{variants:Ba,initial:"hidden",animate:"visible",exit:"exit",layout:!0,children:e.jsxs(F,{className:"mb-3 hover-shadow transition-all",children:[e.jsxs(F.Header,{className:"d-flex justify-content-between align-items-center bg-light",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary",children:a.title}),e.jsx("small",{className:"text-muted text-capitalize",children:a.type})]}),e.jsxs(M,{children:[e.jsx(M.Toggle,{variant:"link",className:"no-arrow p-0",children:e.jsx(u.div,{whileHover:{scale:1.1},children:e.jsx(U,{className:"text-muted fs-5"})})}),e.jsxs(M.Menu,{align:"end",children:[e.jsxs(M.Item,{onClick:t,children:[e.jsx(U,{className:"me-2"})," Edit"]}),e.jsxs(M.Item,{onClick:l,className:"text-danger",children:[e.jsx(pe,{className:"me-2"})," Delete"]})]})]})]}),e.jsxs(F.Body,{children:[e.jsxs(u.div,{layout:!0,className:"row g-2",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Issue Date"}),e.jsx("p",{className:"mb-0",children:a.issueDate})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("label",{className:"text-muted small",children:"URL"}),e.jsx("p",{className:"mb-0",children:a.url?e.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:a.url}):"N/A"})]})]}),e.jsxs(u.div,{layout:!0,className:"mt-3",children:[e.jsx("label",{className:"text-muted small",children:"Description"}),e.jsx("p",{className:"mb-0",children:a.description})]})]})]})})),Ja=()=>{const a=ue(),{currentUser:s,setCurrentUser:t}=Z(),[l,n]=i.useState(!1),[r,o]=i.useState(null),[d,p]=i.useState(!1);if(!s)return T.error("User not found"),null;const f={accomplishments:s!=null&&s.school_pay_payment_code?JSON.parse(s.school_pay_payment_code):[],submitAction:""},j=i.useCallback(async N=>{p(!0);try{const b={...s,school_pay_payment_code:JSON.stringify(N.accomplishments)},S=await he("profile",{school_pay_payment_code:JSON.stringify(N.accomplishments)}),D=ae.fromJson(JSON.stringify(S));te.saveProfile(D),T.success("Accomplishments updated successfully",{icon:e.jsx("span",{children:"✅"})}),N.submitAction==="saveAndNext"&&a("/admin/profile-edit/some-other-page")}catch{T.error("Failed to save accomplishments",{icon:e.jsx("span",{children:"❌"})})}finally{p(!1)}},[s,t,a]),x=i.useCallback((N,b)=>{T(e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"d-flex flex-column p-3",children:[e.jsx("h6",{className:"mb-3",children:"Delete this accomplishment?"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx($,{variant:"danger",size:"sm",onClick:()=>{b(N),T.dismiss()},children:"Delete"}),e.jsx($,{variant:"outline-secondary",size:"sm",onClick:()=>T.dismiss(),children:"Cancel"})]})]}),{icon:e.jsx("span",{children:"⚠️"})})},[]);return e.jsx(Le,{fluid:"lg",className:"py-4",children:e.jsx(W,{initialValues:f,validationSchema:G({accomplishments:oe().of(vs)}),validateOnChange:!1,onSubmit:j,children:({values:N,setFieldValue:b})=>e.jsxs(xe,{children:[e.jsx(Q,{defaultActiveKey:"0",className:"shadow-sm rounded-3 overflow-hidden",children:e.jsxs(Q.Item,{eventKey:"0",children:[e.jsx("h2",{className:"accordion-header bg-light text-black fw-bold",children:e.jsx(Q.Button,{className:"bg-light text-black fw-bold text-gray-900",children:e.jsx("span",{className:"fs-1 fw-bolder text-primary",children:"Accomplishments & Achievements"})})}),e.jsx(Q.Collapse,{eventKey:"0",children:e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4",children:[e.jsx("div",{className:"d-flex justify-content-end mb-4",children:e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsxs($,{variant:"primary",onClick:()=>{o(null),n(!0)},children:[e.jsx(ce,{className:"me-2"})," Add Accomplishment"]})})}),e.jsx(de,{name:"accomplishments",children:({push:S,remove:D,replace:v})=>e.jsx(me,{mode:"popLayout",children:N.accomplishments.map((_,P)=>e.jsx(Ha,{accomplishment:_,index:P,onEdit:()=>{o(P),n(!0)},onDelete:()=>x(P,D)},_.id))})})]})})]})}),e.jsx(La,{show:l,onHide:()=>n(!1),onSubmit:S=>{r!==null?b(`accomplishments[${r}]`,S):b("accomplishments",[...N.accomplishments,S]),n(!1)},initialValues:r!==null?N.accomplishments[r]:null}),e.jsxs(u.div,{className:"d-flex justify-content-between mt-5 border-top pt-4",layout:!0,children:[e.jsx(u.div,{whileHover:{x:-5},children:e.jsx($,{variant:"outline-primary",onClick:()=>a("/admin/profile-edit/employment"),children:"← Back"})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsxs($,{type:"submit",variant:"primary",onClick:()=>b("submitAction","save"),disabled:d,children:[e.jsx(fe,{className:"me-2"}),d?e.jsx("span",{className:"spinner-border spinner-border-sm"}):"Save"]})}),e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsxs($,{type:"submit",variant:"success",onClick:()=>a("/admin/my-cv"),disabled:d,children:["Finish",e.jsx(Fs,{className:"ms-2"})]})})]})]})]})})})},La=i.memo(({show:a,onHide:s,onSubmit:t,initialValues:l})=>e.jsx(I,{show:a,onHide:s,centered:!0,size:"lg",children:e.jsx(u.div,{variants:Oa,initial:"hidden",animate:"visible",children:e.jsx(W,{initialValues:l||{id:Math.random().toString(36).substr(2,9),type:"",title:"",description:"",url:"",issueDate:""},validationSchema:vs,onSubmit:t,validateOnChange:!1,children:({handleSubmit:n,isValidating:r})=>e.jsxs(e.Fragment,{children:[e.jsx(I.Header,{closeButton:!0,className:"bg-light",children:e.jsx(I.Title,{className:"text-primary",children:l?"Edit Accomplishment":"Add New Accomplishment"})}),e.jsx(I.Body,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"type",label:"Type",component:o=>e.jsx(z,{...o,options:Fa,placeholder:"Select type"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"title",label:"Title",placeholder:"Best Research Paper 2023",component:h})}),e.jsx("div",{className:"col-12",children:e.jsx(c,{name:"description",label:"Description",placeholder:"Describe your accomplishment...",component:h,as:"textarea",rows:4})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"url",label:"URL",placeholder:"https://example.com",component:h})}),e.jsx("div",{className:"col-md-6",children:e.jsx(c,{name:"issueDate",label:"Issue Date",component:ke})})]})}),e.jsxs(I.Footer,{className:"border-0",children:[e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsx($,{variant:"outline-secondary",onClick:s,children:"Cancel"})}),e.jsx(u.div,{whileHover:{scale:1.05},children:e.jsx($,{variant:"primary",onClick:()=>n(),disabled:r,children:l?"Save Changes":"Add Accomplishment"})})]})]})})})})),Ya=()=>{const a=ue(),[s,t]=i.useState(""),[l,n]=i.useState(""),[r,o]=i.useState(!1),[d,p]=i.useState(null),{setCurrentUser:f}=Z(),{currentUser:j}=Z();if(!j)return null;const x=G().shape({first_name:k().required("First Name is required"),last_name:k().min(2).required("Last Name is required"),sex:k().required("Gender is required"),title:k().required("Title is required")}),N=v=>{v&&v.length>0&&p(v[0])},{getRootProps:b,getInputProps:S}=Hs({onDrop:N}),D=async(v,_)=>{t(""),n(""),o(!0);const P=v.submitAction||"save";try{if(!d){T.warn("Select a profile photo first.");return}const A=new FormData;Object.entries(v).forEach(([y,m])=>{A.append(y,m?m.toString():"")}),d&&A.append("profile_photo",d);const w=await he("profile",A),g=ae.fromJson(JSON.stringify(w));f(g),te.saveProfile(g),n("Profile updated successfully"),T.success("Profile updated successfully"),P==="saveAndNext"&&a("/admin/profile-edit/bio")}catch(A){t("Failed: "+A),T.error("Profile update failed")}finally{o(!1),_.setSubmitting(!1)}};return e.jsx(W,{initialValues:j,validationSchema:x,onSubmit:D,children:({isSubmitting:v,setFieldValue:_})=>e.jsxs(xe,{children:[e.jsx(u.div,{className:"card-header bg-light text-black fw-bold ps-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx("h2",{className:"text-primary fs-1 fw-bolder mt-7 ps-0",children:"Personal Details"})}),r&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:e.jsx("div",{className:"spinner-border text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),s&&e.jsxs(u.div,{className:"alert alert-danger alert-dismissible fade show",role:"alert",initial:{opacity:0},animate:{opacity:1},children:[s,e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),l&&e.jsxs(u.div,{className:"alert alert-success alert-dismissible fade show",role:"alert",initial:{opacity:0},animate:{opacity:1},children:[l,e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),j.avatar&&!j.avatar.toLowerCase().includes("user")&&e.jsx(u.div,{className:"d-flex justify-content-center mb-4 mt-5 mt-lg-10",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:e.jsx("img",{src:te.img(j.avatar),alt:"avatar",style:{width:200,height:200,borderRadius:"10%"}})}),e.jsx(u.div,{className:"d-flex justify-content-center mb-4 mt-5 mt-lg-10",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:e.jsxs("div",{...b(),style:{width:200,height:200,border:"2px dashed #ccc",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",overflow:"hidden"},children:[e.jsx("input",{...S()}),d?e.jsx("img",{src:URL.createObjectURL(d),alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("p",{className:"text-muted mb-0",children:e.jsx("span",{className:"ms-3 fs-6 fw-bold text-gray-700",children:j.avatar&&!j.avatar.toLowerCase().includes("user")?"Set profile photo":"Change profile photo"})})]})}),e.jsxs(u.div,{className:"d-flex justify-content-between mt-5 border-top pt-4 mb-5 mb-lg-10",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsxs("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>a("/admin/profile-edit/education"),children:[e.jsx(Js,{className:"me-2 text-danger"}),"Cancel"]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary",onClick:()=>_("submitAction","save"),disabled:v,children:[e.jsx(fe,{className:"me-2"}),v?"Saving...":"Save"]}),e.jsxs("button",{type:"submit",className:"btn btn-success",onClick:()=>_("submitAction","saveAndNext"),disabled:v,children:["Next Step ",e.jsx(Ne,{className:"ms-2"})]})]})]})]})})},Va=()=>{const{currentUser:a}=Z(),[s,t]=i.useState(!1),l=Ls(),n=[{title:"Profile",path:"/admin/profile-edit/bio",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}];return a?e.jsxs($a,{children:[e.jsx(za,{currentUser:a,setIsLoading:t}),s&&e.jsx("div",{children:"Loading..."})," ",e.jsx(Ys,{children:e.jsxs(se,{path:"/*",element:e.jsxs(e.Fragment,{children:[e.jsx(zs,{}),e.jsx(Us,{children:e.jsxs("div",{className:"stepper stepper-pills stepper-column d-flex flex-column flex-xl-row flex-row-fluid",children:[e.jsx("div",{className:"card d-none d-xl-flex justify-content-center justify-content-xl-start flex-row-auto w-100 w-xl-300px w-xxl-400px me-9",children:e.jsx("div",{className:"stepper stepper-pills stepper-column d-flex flex-column flex-xl-row flex-row-fluid",children:e.jsx("div",{className:"card d-flex justify-content-center justify-content-xl-start flex-row-auto w-100 w-xl-300px w-xxl-400px me-9",children:e.jsxs("div",{className:"card-body px-3 px-lg-10 py-10 py-lg-10",children:[e.jsx("div",{className:"d-flex flex-wrap flex-stack justify-content-center mb-5",children:e.jsxs("div",{className:"d-flex align-items-center w-200px w-sm-300px flex-column mt-3",children:[e.jsxs("div",{className:"d-flex justify-content-between w-100 mt-auto mb-2",children:[e.jsx("span",{className:"fw-bold fs-6 text-gray-500",children:"Profile Compleation"}),e.jsx("span",{className:"fw-bolder fs-6",children:"50%"})]}),e.jsx("div",{className:"h-5px mx-3 w-100 bg-light mb-3",children:e.jsx("div",{className:"bg-success rounded h-5px",role:"progressbar",style:{width:"50%"}})})]})}),e.jsx(le,{className:"stepper-nav",to:"/admin/profile-edit/photo",children:e.jsxs("div",{className:`stepper-item ${l.pathname==="/admin/profile-edit/photo"?"current":""}`,"data-kt-stepper-element":"nav",children:[e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"1"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${l.pathname==="/admin/profile-edit/photo"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Profile Photo"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your profile photo and cover"})]})]}),e.jsx("div",{className:"stepper-line h-40px"})]})}),e.jsx(le,{className:"stepper-nav",to:"/admin/profile-edit/bio",children:e.jsxs("div",{className:`stepper-item ${l.pathname==="/admin/profile-edit/bio"?"current":""}`,"data-kt-stepper-element":"nav",children:[e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"2"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${l.pathname==="/admin/profile-edit/bio"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Biodata"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your personal information"})]})]}),e.jsx("div",{className:"stepper-line h-40px"})]})}),e.jsx(le,{to:"/admin/profile-edit/education",className:"stepper-nav",children:e.jsxs("div",{className:`stepper-item ${l.pathname==="/admin/profile-edit/education"?"current":""}`,"data-kt-stepper-element":"nav",children:[e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"3"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${l.pathname==="/admin/profile-edit/education"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Education & Training"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your personal information"})]})]}),e.jsx("div",{className:"stepper-line h-40px"})]})}),e.jsx(le,{to:"/admin/profile-edit/employment",className:"stepper-nav",children:e.jsxs("div",{className:`stepper-item ${l.pathname==="/admin/profile-edit/employment"?"current":""}`,"data-kt-stepper-element":"nav",children:[e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"4"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${l.pathname==="/admin/profile-edit/employment"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Employment"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your employment history"})]})]}),e.jsx("div",{className:"stepper-line h-40px"})]})}),e.jsx(le,{to:"/admin/profile-edit/accomplishment",className:"stepper-nav",children:e.jsx("div",{className:`stepper-item ${l.pathname==="/admin/profile-edit/accomplishment"?"current":""}`,"data-kt-stepper-element":"nav",children:e.jsxs("div",{className:"stepper-wrapper",children:[e.jsxs("div",{className:"stepper-icon w-40px h-40px",children:[e.jsx("i",{className:"stepper-check fas fa-check"}),e.jsx("span",{className:"stepper-number",children:"5"})]}),e.jsxs("div",{className:"stepper-label",children:[e.jsx("h3",{className:`stepper-title ${l.pathname==="/admin/profile-edit/accomplishment"?"text-primary fw-bolder":"fw-semibold text-muted"}`,children:"Accomplishments"}),e.jsx("div",{className:"stepper-desc fw-semibold",children:"Setup your accomplishments"})]})]})})})]})})})}),e.jsx("div",{className:"d-flex flex-row-fluid flex-s bg-body rounded w-100 w-xl-800px w-xxl-1000px d-flex flex-column card rounded",children:e.jsx(Gs,{})})]})})]}),children:[e.jsx(se,{path:"photo",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:n,children:"Profile Photo"}),e.jsx(Ya,{})]})}),e.jsx(se,{path:"bio",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:n,children:"Personal Information"}),e.jsx(_a,{})]})}),e.jsx(se,{path:"education",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:n,children:"Education"}),e.jsx(ka,{})]})}),e.jsx(se,{path:"employment",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:n,children:"Employment"}),e.jsx(qa,{})]})}),e.jsx(se,{path:"accomplishment",element:e.jsxs(e.Fragment,{children:[e.jsx(ie,{breadcrumbs:n,children:"Accomplishment"}),e.jsx(Ja,{})]})}),e.jsx(se,{path:"",element:e.jsx(Te,{to:"photo",replace:!0})})]})})]}):e.jsx(Te,{to:"/login",replace:!0})},za=({currentUser:a,setIsLoading:s})=>{const{setProfile:t}=Pa();return i.useEffect(()=>{(async()=>{s(!0);try{if(a){const n=ae.fromJson(JSON.stringify(a));t(n)}}catch(n){console.error("Failed to initialize profile:",n)}finally{s(!1)}})()},[a,t,s]),null};export{Va as default};
