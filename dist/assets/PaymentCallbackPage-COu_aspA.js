import{j as e,C as s,R as a,c as n,B as r,S as t}from"./vendor-bootstrap-5Pmslw1a.js";import{r as i}from"./vendor-react-CSr-5IoM.js";import{c,d as l,u as o}from"./vendor-router-B5VXrYKF.js";import{a as m}from"./PaymentStatus-mMIGoOqk.js";import{T as d}from"./index-a--6voad.js";import{D as p}from"./DynamicBreadcrumb-Dq1jzd97.js";import"./vendor-redux-DhM9Zidd.js";import"./vendor-query-BwsiJSmJ.js";const x=()=>{const{orderId:x}=c(),[h]=l(),u=o(),[b,j]=i.useState(!0),[f,y]=i.useState(""),[g,v]=i.useState("");i.useEffect((()=>{const e=h.get("OrderTrackingId")||h.get("orderTrackingId")||"",s=h.get("OrderMerchantReference")||h.get("merchantReference")||"";y(e),v(s);const a=setTimeout((()=>{j(!1),d.info("Welcome back! Checking your payment status...",{autoClose:3e3})}),2e3);return()=>clearTimeout(a)}),[h]);return x?e.jsxs("div",{className:"payment-callback-page",children:[e.jsxs(s,{className:"py-4",children:[e.jsx(p,{}),e.jsx(a,{className:"justify-content-center",children:e.jsxs(n,{lg:8,md:10,children:[e.jsxs("div",{className:"callback-header text-center mb-4",children:[e.jsx("h2",{children:"Payment Status"}),e.jsxs("p",{className:"text-muted",children:["Checking the status of your payment for Order #",x]})]}),b?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(t,{animation:"border",variant:"primary"}),e.jsx("h4",{className:"mt-3",children:"Processing Payment Response..."}),e.jsx("p",{className:"text-muted",children:"Please wait while we verify your payment with our payment provider."})]}):e.jsx(m,{orderId:parseInt(x),trackingId:f,onStatusUpdate:(e,s)=>{switch(e.toUpperCase()){case"COMPLETED":case"SUCCESS":break;case"FAILED":case"INVALID":case"ERROR":setTimeout((()=>{d.error("Payment failed. You can try again or contact support.",{autoClose:5e3})}),3e3);break;case"PENDING":d.info('Payment is still processing. Please use the "Check Payment Status" button to refresh.',{autoClose:6e3})}},showActions:!0,className:"mb-4"}),!b&&e.jsx("div",{className:"callback-actions",children:e.jsxs("div",{className:"d-flex flex-column flex-md-row gap-3 justify-content-center",children:[e.jsxs(r,{variant:"outline-primary",onClick:()=>{u(`/payment/${x}`)},className:"flex-fill",children:[e.jsx("i",{className:"bi bi-arrow-repeat me-2"}),"Try Payment Again"]}),e.jsxs(r,{variant:"outline-secondary",onClick:()=>{u("/account/orders")},className:"flex-fill",children:[e.jsx("i",{className:"bi bi-list-check me-2"}),"View All Orders"]}),e.jsxs(r,{variant:"primary",onClick:()=>{u("/",{state:{orderSuccess:!0,orderId:x?parseInt(x):void 0}})},className:"flex-fill",children:[e.jsx("i",{className:"bi bi-house me-2"}),"Back to Home"]})]})}),!1,e.jsxs("div",{className:"help-section mt-5 text-center",children:[e.jsx("h5",{children:"Need Help?"}),e.jsx("p",{className:"text-muted",children:"If you're experiencing issues with your payment, please contact our support team."}),e.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[e.jsxs(r,{variant:"outline-info",size:"sm",onClick:()=>window.open("tel:+256701070684","_blank"),children:[e.jsx("i",{className:"bi bi-telephone me-2"}),"Call Support"]}),e.jsxs(r,{variant:"outline-success",size:"sm",onClick:()=>window.open("https://wa.me/256701070684?text=I need help with my payment","_blank"),children:[e.jsx("i",{className:"bi bi-whatsapp me-2"}),"WhatsApp"]})]})]})]})})]}),e.jsx("style",{children:"\n        .payment-callback-page {\n          min-height: 100vh;\n          background: var(--bs-body-bg, #fff);\n        }\n\n        .callback-header h2 {\n          color: var(--bs-primary, #0d6efd);\n          margin-bottom: 0.5rem;\n        }\n\n        .callback-actions {\n          background: var(--bs-light, #f8f9fa);\n          border-radius: 12px;\n          padding: 1.5rem;\n          margin-top: 2rem;\n        }\n\n        .help-section {\n          border-top: 1px solid var(--bs-border-color, #dee2e6);\n          padding-top: 2rem;\n        }\n\n        .debug-info details[open] {\n          border: 1px solid var(--bs-border-color, #dee2e6);\n        }\n\n        .debug-info summary {\n          cursor: pointer;\n          padding: 0.5rem 0;\n        }\n\n        .debug-info summary:hover {\n          color: var(--bs-primary, #0d6efd);\n        }\n\n        @media (max-width: 768px) {\n          .callback-actions .d-flex {\n            flex-direction: column;\n          }\n          \n          .callback-actions .flex-fill {\n            width: 100%;\n          }\n        }\n      "})]}):e.jsx("div",{className:"payment-callback-page min-vh-100 d-flex align-items-center",children:e.jsx(s,{children:e.jsx(a,{className:"justify-content-center",children:e.jsx(n,{lg:6,md:8,children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"bi bi-exclamation-triangle fs-1 text-warning mb-3"}),e.jsx("h3",{children:"Invalid Payment Request"}),e.jsx("p",{className:"text-muted mb-4",children:"The payment request is missing required information."}),e.jsxs(r,{variant:"primary",onClick:()=>u("/"),children:[e.jsx("i",{className:"bi bi-house me-2"}),"Back to Home"]})]})})})})})};export{x as default};
