var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,c=(s,a,r)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,t=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&c(e,a,s[a]);if(r)for(var a of r(s))n.call(s,a)&&c(e,a,s[a]);return e},l=(e,r)=>s(e,a(r)),d=(e,s,a)=>new Promise(((r,i)=>{var n=e=>{try{t(a.next(e))}catch(s){i(s)}},c=e=>{try{t(a.throw(e))}catch(s){i(s)}},t=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,c);t((a=a.apply(e,s)).next())}));import{j as o,C as h,R as m,c as x,a as j,B as g,S as u,A as p,d as b,T as y,f as N,g as v,F as f}from"./vendor-bootstrap-5Pmslw1a.js";import{r as C}from"./vendor-react-CSr-5IoM.js";import{L as w}from"./vendor-router-B5VXrYKF.js";import{E as P,C as S,F as I,g as T,G as k,I as B,t as L,J as A,T as F}from"./index-a--6voad.js";import{C as H}from"./CartService-DRJlejUX.js";import"./vendor-redux-DhM9Zidd.js";import"./vendor-query-BwsiJSmJ.js";const O=()=>{const[e,s]=C.useState(null),[a,r]=C.useState(null),[i,n]=C.useState({cached:!1,traditional:!1}),[c,N]=C.useState(null),[v,f]=C.useState(null),[w,T]=C.useState(null),k=()=>{const e=P.getInstance().getStats();f(e)};return C.useEffect((()=>{k()}),[]),o.jsx(h,{fluid:!0,children:o.jsx(m,{className:"mb-4",children:o.jsx(x,{children:o.jsxs(j,{children:[o.jsxs(j.Header,{className:"bg-primary text-white",children:[o.jsx("h4",{className:"mb-0",children:"üöÄ Cache Performance Pilot Demo"}),o.jsx("small",{children:"Comparing cache-first vs traditional API calls"})]}),o.jsxs(j.Body,{children:[o.jsxs(m,{className:"mb-3",children:[o.jsx(x,{md:3,children:o.jsx(g,{variant:"success",onClick:()=>d(void 0,null,(function*(){n((e=>l(t({},e),{cached:!0}))),N(null);const e=window.performance.now();try{const a=yield S.getCategories(),r=window.performance.now()-e;s(a),T((e=>({cached:{loadTime:r,source:"api"},traditional:(null==e?void 0:e.traditional)||{loadTime:0,source:"api"}}))),k()}catch(a){N("Failed to load cached categories: "+a.message)}finally{n((e=>l(t({},e),{cached:!1})))}})),disabled:i.cached,className:"w-100",children:i.cached?o.jsxs(o.Fragment,{children:[o.jsx(u,{animation:"border",size:"sm"})," Loading Cached..."]}):"‚ö° Load with Cache"})}),o.jsx(x,{md:3,children:o.jsx(g,{variant:"outline-primary",onClick:()=>d(void 0,null,(function*(){n((e=>l(t({},e),{traditional:!0}))),N(null);const e=window.performance.now();try{const s=yield I.getCategories(),a=window.performance.now()-e;r(s),T((e=>({cached:(null==e?void 0:e.cached)||{loadTime:0,source:"api"},traditional:{loadTime:a,source:"api"}})))}catch(s){N("Failed to load traditional categories: "+s.message)}finally{n((e=>l(t({},e),{traditional:!1})))}})),disabled:i.traditional,className:"w-100",children:i.traditional?o.jsxs(o.Fragment,{children:[o.jsx(u,{animation:"border",size:"sm"})," Loading Traditional..."]}):"üêå Load Traditional"})}),o.jsx(x,{md:3,children:o.jsx(g,{variant:"warning",onClick:()=>{P.getInstance().clearAll(),k(),s(null),T(null)},className:"w-100",children:"üóëÔ∏è Clear Cache"})}),o.jsx(x,{md:3,children:o.jsx(g,{variant:"info",onClick:k,className:"w-100",children:"üìä Refresh Stats"})})]}),c&&o.jsx(p,{variant:"danger",className:"mb-3",children:c}),w&&o.jsxs(m,{className:"mb-4",children:[o.jsx(x,{md:6,children:o.jsxs(j,{className:"cache"===w.cached.source?"border-success":"border-warning",children:[o.jsx(j.Header,{className:"bg-light",children:o.jsx("strong",{children:"‚ö° Cache-First Performance"})}),o.jsxs(j.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[o.jsx("span",{children:"Load Time:"}),o.jsxs(b,{bg:w.cached.loadTime<50?"success":"warning",children:[w.cached.loadTime.toFixed(2),"ms"]})]}),o.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[o.jsx("span",{children:"Source:"}),o.jsx(b,{bg:"cache"===w.cached.source?"success":"info",children:"cache"===w.cached.source?"üíæ Cache Hit":"üåê API Call"})]})]})]})}),o.jsx(x,{md:6,children:o.jsxs(j,{className:"border-secondary",children:[o.jsx(j.Header,{className:"bg-light",children:o.jsx("strong",{children:"üêå Traditional Performance"})}),o.jsxs(j.Body,{children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[o.jsx("span",{children:"Load Time:"}),o.jsxs(b,{bg:"secondary",children:[w.traditional.loadTime.toFixed(2),"ms"]})]}),o.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[o.jsx("span",{children:"Source:"}),o.jsx(b,{bg:"secondary",children:"üåê Always API"})]})]})]})})]}),v&&o.jsx(m,{className:"mb-4",children:o.jsx(x,{children:o.jsxs(j,{children:[o.jsx(j.Header,{children:o.jsx("strong",{children:"üìà Cache Statistics"})}),o.jsx(j.Body,{children:o.jsx(y,{size:"sm",striped:!0,children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{children:"Cache Hits"}),o.jsx("td",{children:o.jsx(b,{bg:"success",children:v.hits})})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Cache Misses"}),o.jsx("td",{children:o.jsx(b,{bg:"warning",children:v.misses})})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Hit Rate"}),o.jsx("td",{children:o.jsxs(b,{bg:v.hitRate>.7?"success":v.hitRate>.4?"warning":"danger",children:[(100*v.hitRate).toFixed(1),"%"]})})]})]})})})]})})}),o.jsxs(m,{children:[o.jsx(x,{md:6,children:o.jsxs(j,{className:"h-100",children:[o.jsx(j.Header,{className:"bg-success text-white",children:o.jsxs("strong",{children:["‚ö° Cached Categories (",(null==e?void 0:e.length)||0,")"]})}),o.jsx(j.Body,{style:{maxHeight:"400px",overflowY:"auto"},children:e?e.slice(0,10).map((e=>o.jsxs("div",{className:"border-bottom pb-2 mb-2",children:[o.jsx("strong",{children:e.category}),o.jsx("br",{}),o.jsxs("small",{className:"text-muted",children:["ID: ",e.id," | Products: ",e.category_text,e.isShownInBanner()&&o.jsx(b,{bg:"warning",className:"ms-1",children:"Banner"})]})]},e.id))):o.jsx("div",{className:"text-center text-muted",children:'Click "Load with Cache" to see categories'})})]})}),o.jsx(x,{md:6,children:o.jsxs(j,{className:"h-100",children:[o.jsx(j.Header,{className:"bg-secondary text-white",children:o.jsxs("strong",{children:["üêå Traditional Categories (",(null==a?void 0:a.length)||0,")"]})}),o.jsx(j.Body,{style:{maxHeight:"400px",overflowY:"auto"},children:a?a.slice(0,10).map((e=>o.jsxs("div",{className:"border-bottom pb-2 mb-2",children:[o.jsx("strong",{children:e.category}),o.jsx("br",{}),o.jsxs("small",{className:"text-muted",children:["ID: ",e.id," | Products: ",e.category_text,e.isShownInBanner()&&o.jsx(b,{bg:"warning",className:"ms-1",children:"Banner"})]})]},e.id))):o.jsx("div",{className:"text-center text-muted",children:'Click "Load Traditional" to see categories'})})]})})]}),o.jsx(m,{className:"mt-4",children:o.jsx(x,{children:o.jsxs(p,{variant:"info",children:[o.jsx("h6",{children:"üß™ How to Test Cache Performance:"}),o.jsxs("ol",{className:"mb-0",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"First Load:"}),' Click "Load with Cache" - this will be slower as it fetches from API']}),o.jsxs("li",{children:[o.jsx("strong",{children:"Cached Load:"}),' Click "Load with Cache" again - this should be much faster (cache hit)']}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compare:"}),' Click "Load Traditional" to see the difference in speed']}),o.jsxs("li",{children:[o.jsx("strong",{children:"Reset:"}),' Click "Clear Cache" and repeat to test cache miss vs hit scenarios']})]})]})})})]})]})})})})},z=()=>{const[e,s]=C.useState(134),[a,r]=C.useState(""),[i,n]=C.useState(),[c,t]=C.useState(0),{data:l,isLoading:b,error:y,refetch:P}=T({page:1,limit:5}),{data:S,isLoading:z,error:E}=k(),{data:D,isLoading:R,error:_}=B(),{data:J,isLoading:M,error:$}=L(e,{skip:!e}),{data:K,isLoading:V,error:Y}=A({query:a,page:1},{skip:!a||a.length<2});C.useEffect((()=>{const e=()=>{t(H.getCartItemCount())};return e(),window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[]);const q=e=>d(void 0,null,(function*(){H.addToCart(e.id,1,{},{name:e.name,price:e.price_1})&&t(H.getCartItemCount())}));return o.jsxs(h,{className:"py-5",children:[o.jsx(m,{className:"mb-4",children:o.jsxs(x,{children:[o.jsx("h1",{children:"API Integration Test Page"}),o.jsx("p",{className:"text-muted",children:"Testing real Laravel API endpoints, cache functionality, and cart integration."})]})}),o.jsxs(N,{defaultActiveKey:"cache-pilot",id:"api-test-tabs",className:"mb-3",children:[o.jsx(v,{eventKey:"cache-pilot",title:"üöÄ Cache Pilot Demo",children:o.jsx(O,{})}),o.jsx(v,{eventKey:"api-tests",title:"üîß API Tests",children:o.jsxs(h,{fluid:!0,children:[o.jsx(m,{className:"mb-4",children:o.jsx(x,{children:o.jsxs("div",{className:"d-flex gap-2 mb-3",children:[o.jsx(g,{variant:"primary",onClick:()=>d(void 0,null,(function*(){try{F.info("Testing API methods..."),yield I.getCategories(),yield I.getVendors(),yield I.getProducts({page:1,limit:3}),F.success("API methods tested successfully!")}catch(e){F.error("API test failed: "+e)}})),children:"Test API Methods"}),o.jsx(g,{variant:"success",onClick:()=>d(void 0,null,(function*(){try{F.info("Testing cart functions..."),H.addToCart(1,2,{color:"red"},{name:"Test Product 1",price:"100000"}),H.addToCart(2,1,{size:"large"},{name:"Test Product 2",price:"200000"});const e=H.getCartItemCount(),s=(yield H.getCartTotal(),yield H.getFormattedCartTotal());t(e),F.success(`Cart functions tested! Items: ${e}, Total: ${s}`)}catch(e){F.error("Cart test failed: "+e)}})),children:"Test Cart Functions"}),o.jsx(g,{variant:"info",onClick:()=>window.location.reload(),children:"Refresh Page"}),o.jsxs("span",{className:"ms-auto badge bg-secondary fs-6",children:["Cart Items: ",c]})]})})}),o.jsx(m,{className:"mb-4",children:o.jsx(x,{children:o.jsxs(j,{children:[o.jsx(j.Header,{children:o.jsxs("h4",{children:["Categories (",(null==S?void 0:S.length)||0,")"]})}),o.jsxs(j.Body,{children:[z&&o.jsx(u,{animation:"border"}),E&&o.jsxs(p,{variant:"danger",children:["Error loading categories: ",JSON.stringify(E)]}),S&&o.jsx(m,{children:S.slice(0,6).map((e=>o.jsx(x,{md:4,className:"mb-3",children:o.jsx(j,{children:o.jsxs(j.Body,{children:[o.jsx("h6",{children:e.category}),o.jsxs("p",{className:"small text-muted",children:["ID: ",e.id," | Products: ",e.category_text,e.isShownInBanner()&&o.jsx("span",{className:"badge bg-warning ms-2",children:"Banner"})]}),o.jsx(g,{size:"sm",variant:"outline-primary",onClick:()=>n(e.id),children:"Filter Products"})]})})},e.id)))})]})]})})}),o.jsx(m,{className:"mb-4",children:o.jsx(x,{children:o.jsxs(j,{children:[o.jsxs(j.Header,{className:"d-flex justify-content-between align-items-center",children:[o.jsxs("h4",{children:["Products (",(null==l?void 0:l.total)||0,")"]}),o.jsxs("div",{className:"d-flex gap-2",children:[i&&o.jsx(g,{size:"sm",variant:"outline-secondary",onClick:()=>n(void 0),children:"Clear Filter"}),o.jsx(g,{size:"sm",variant:"outline-primary",onClick:()=>P(),children:"Refresh"})]})]}),o.jsxs(j.Body,{children:[b&&o.jsx(u,{animation:"border"}),y&&o.jsxs(p,{variant:"danger",children:["Error loading products: ",JSON.stringify(y)]}),l&&o.jsx(m,{children:l.data.map((e=>o.jsx(x,{md:6,lg:4,className:"mb-3",children:o.jsxs(j,{children:[o.jsx(j.Img,{variant:"top",src:e.getMainImage(),style:{height:"200px",objectFit:"cover"}}),o.jsxs(j.Body,{children:[o.jsx("h6",{children:e.name}),o.jsx("p",{className:"text-success fw-bold",children:e.getFormattedPrice()}),o.jsxs("p",{className:"small text-muted",children:["Category: ",e.category_text," | Colors: ",e.hasColors()?e.getColors().join(", "):"None"," | Stock: ",e.isInStock()?"Yes":"No"]}),o.jsxs("div",{className:"d-flex gap-1",children:[o.jsx(g,{size:"sm",variant:"primary",onClick:()=>q(e),children:"Add to Cart"}),o.jsx(g,{size:"sm",variant:"outline-info",onClick:()=>s(e.id),children:"View Details"})]})]})]})},e.id)))})]})]})})}),o.jsx(m,{className:"mb-4",children:o.jsx(x,{children:o.jsxs(j,{children:[o.jsx(j.Header,{children:o.jsx("h4",{children:"Search Products"})}),o.jsxs(j.Body,{children:[o.jsx(f.Control,{type:"text",placeholder:"Search for products...",value:a,onChange:e=>r(e.target.value),className:"mb-3"}),V&&o.jsx(u,{animation:"border"}),Y&&o.jsxs(p,{variant:"danger",children:["Search error: ",JSON.stringify(Y)]}),K&&a&&o.jsxs("div",{children:[o.jsxs("p",{className:"text-muted",children:["Found ",K.total,' results for "',a,'"']}),o.jsx(m,{children:K.data.slice(0,3).map((e=>o.jsx(x,{md:4,className:"mb-3",children:o.jsx(j,{children:o.jsxs(j.Body,{children:[o.jsx("h6",{children:e.name}),o.jsx("p",{className:"text-success",children:e.getFormattedPrice()}),o.jsx(g,{size:"sm",variant:"primary",onClick:()=>q(e),children:"Add to Cart"})]})})},e.id)))})]})]})]})})}),o.jsx(m,{className:"mb-4",children:o.jsx(x,{children:o.jsxs(j,{children:[o.jsx(j.Header,{children:o.jsxs("h4",{children:["Single Product Details (ID: ",e,")"]})}),o.jsxs(j.Body,{children:[M&&o.jsx(u,{animation:"border"}),$&&o.jsxs(p,{variant:"danger",children:["Error loading product: ",JSON.stringify($)]}),J&&o.jsxs(m,{children:[o.jsx(x,{md:4,children:o.jsx("img",{src:J.getMainImage(),alt:J.name,className:"img-fluid rounded"})}),o.jsxs(x,{md:8,children:[o.jsx("h3",{children:J.name}),o.jsx("p",{className:"text-success h4",children:J.getFormattedPrice()}),o.jsx("p",{children:J.description||"No description available"}),o.jsxs("div",{className:"row mb-3",children:[o.jsx("div",{className:"col-sm-4",children:o.jsx("strong",{children:"Category:"})}),o.jsx("div",{className:"col-sm-8",children:J.category_text})]}),o.jsxs("div",{className:"row mb-3",children:[o.jsx("div",{className:"col-sm-4",children:o.jsx("strong",{children:"Stock:"})}),o.jsx("div",{className:"col-sm-8",children:J.isInStock()?"In Stock":"Out of Stock"})]}),J.hasColors()&&o.jsxs("div",{className:"row mb-3",children:[o.jsx("div",{className:"col-sm-4",children:o.jsx("strong",{children:"Colors:"})}),o.jsx("div",{className:"col-sm-8",children:J.getColors().join(", ")})]}),J.hasSizes()&&o.jsxs("div",{className:"row mb-3",children:[o.jsx("div",{className:"col-sm-4",children:o.jsx("strong",{children:"Sizes:"})}),o.jsx("div",{className:"col-sm-8",children:J.getSizes().join(", ")})]}),o.jsx(g,{variant:"primary",size:"lg",onClick:()=>q(J),children:"Add to Cart"})]})]})]})]})})}),o.jsx(m,{className:"mb-4",children:o.jsx(x,{children:o.jsxs(j,{children:[o.jsx(j.Header,{children:o.jsxs("h4",{children:["Vendors (",(null==D?void 0:D.length)||0,")"]})}),o.jsxs(j.Body,{children:[R&&o.jsx(u,{animation:"border"}),_&&o.jsxs(p,{variant:"danger",children:["Error loading vendors: ",JSON.stringify(_)]}),D&&o.jsx(m,{children:D.slice(0,4).map((e=>o.jsx(x,{md:6,className:"mb-3",children:o.jsx(j,{children:o.jsxs(j.Body,{children:[o.jsx("h6",{children:e.name||`${e.first_name} ${e.last_name}`}),o.jsxs("p",{className:"small text-muted",children:["Business: ",e.business_name||"N/A"," | Status: ",e.status," | Email: ",e.email||"N/A"]})]})})},e.id)))})]})]})})}),o.jsx(m,{children:o.jsx(x,{children:o.jsxs(j,{children:[o.jsx(j.Header,{children:o.jsx("h4",{children:"Navigation"})}),o.jsx(j.Body,{children:o.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[o.jsx(w,{to:"/",className:"btn btn-outline-primary",children:"Home"}),o.jsx(w,{to:"/products",className:"btn btn-outline-primary",children:"Products Page"}),o.jsx(w,{to:"/categories",className:"btn btn-outline-primary",children:"Categories Page"}),o.jsxs(w,{to:"/cart",className:"btn btn-outline-primary",children:["Cart (",c,")"]}),o.jsx(w,{to:"/account",className:"btn btn-outline-primary",children:"Account"}),o.jsx(w,{to:"/toast-demo",className:"btn btn-outline-secondary",children:"Toast Demo"})]})})]})})})]})})]})]})};export{z as default};
