import{g as R,e as _,r as l,j as e,L as P,T as v,A as T,ad as B}from"./index-Ck1B39s_.js";const A=()=>{const{user:a}=R(n=>n.auth),z=_(),[t,p]=l.useState(!1),[C,x]=l.useState(!1),[f,u]=l.useState(!1),[i,d]=l.useState({}),[s,b]=l.useState({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",gender:"",bio:""});l.useEffect(()=>{if(a){const n={firstName:a.first_name||"",lastName:a.last_name||"",email:a.email||"",phone:a.phone_number_1||"",dateOfBirth:a.date_of_birth||"",gender:a.sex||"",bio:a.intro||""};b(n)}},[a]);const o=n=>{const{name:r,value:h}=n.target;b(c=>({...c,[r]:h})),i[r]&&d(c=>{const g={...c};return delete g[r],g})},m=(n,r)=>{switch(n){case"firstName":if(!r.trim()||r.trim().length<2)return"First name is required and must be at least 2 characters";break;case"lastName":if(!r.trim()||r.trim().length<2)return"Last name is required and must be at least 2 characters";break;case"phone":if(!r.trim()||r.trim().length<5)return"Phone number is required and must be at least 5 characters";break;case"email":if(r&&r.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.trim()))return"Please enter a valid email address";break;case"bio":if(r&&r.length>500)return"Bio cannot exceed 500 characters";break}return null},k=async n=>{if(n.preventDefault(),!(a!=null&&a.id)){v.error("User not found");return}const r={},h=m("firstName",s.firstName);h&&(r.firstName=h);const c=m("lastName",s.lastName);c&&(r.lastName=c);const g=m("phone",s.phone);g&&(r.phone=g);const j=m("email",s.email);j&&(r.email=j);const y=m("bio",s.bio);if(y&&(r.bio=y),Object.keys(r).length>0){d(r),v.error("Please fix the validation errors");return}d({}),u(!0);try{const N={first_name:s.firstName.trim(),last_name:s.lastName.trim(),phone_number_1:s.phone.trim(),email:s.email.trim()||void 0,date_of_birth:s.dateOfBirth||void 0,gender:s.gender||void 0,bio:s.bio.trim()||void 0},S=await T.updateProfile(N);S&&z(B(S)),p(!1),x(!0),setTimeout(()=>x(!1),5e3)}catch{}finally{u(!1)}},w=()=>{a&&b({firstName:a.first_name||"",lastName:a.last_name||"",email:a.email||"",phone:a.phone_number_1||"",dateOfBirth:a.date_of_birth||"",gender:a.sex||"",bio:a.intro||""}),d({}),p(!1)},E=()=>{d({}),p(!0)};return a?e.jsxs("div",{className:"acc-profile-container",children:[e.jsxs("div",{className:"acc-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"acc-page-title",children:"My Profile"}),e.jsx("p",{className:"acc-page-subtitle",children:"Manage your personal information and account settings"})]}),!t&&e.jsx("div",{style:{display:"flex",gap:"var(--spacing-2)"},children:e.jsxs("button",{className:"acc-btn acc-btn-outline",onClick:E,children:[e.jsx("i",{className:"bi bi-pencil",style:{marginRight:"8px"}}),"Edit Profile"]})})]}),C&&e.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--success-bg)",borderColor:"var(--success-border)",color:"var(--success-color)",marginBottom:"var(--spacing-4)"},children:e.jsxs("div",{className:"acc-card-body",children:[e.jsx("i",{className:"bi bi-check-circle",style:{marginRight:"8px"}}),"Profile updated successfully!"]})}),e.jsxs("div",{className:"acc-card",style:{marginBottom:"var(--spacing-6)"},children:[e.jsx("div",{className:"acc-card-header",children:e.jsxs("h3",{className:"acc-card-title",children:[e.jsx("i",{className:"bi bi-person-circle"}),"Personal Information"]})}),e.jsx("div",{className:"acc-card-body",children:e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"var(--spacing-4)",marginBottom:"var(--spacing-4)"},children:[e.jsxs("div",{className:"acc-form-group",children:[e.jsx("label",{className:"acc-form-label",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",className:`acc-form-control ${i.firstName?"error":""}`,value:s.firstName,onChange:o,disabled:!t,placeholder:"Enter your first name"}),i.firstName&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.firstName})]}),e.jsxs("div",{className:"acc-form-group",children:[e.jsx("label",{className:"acc-form-label",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",className:`acc-form-control ${i.lastName?"error":""}`,value:s.lastName,onChange:o,disabled:!t,placeholder:"Enter your last name"}),i.lastName&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.lastName})]})]}),e.jsxs("div",{className:"acc-form-group",style:{marginBottom:"var(--spacing-4)"},children:[e.jsxs("label",{className:"acc-form-label",children:[e.jsx("i",{className:"bi bi-envelope",style:{marginRight:"8px"}}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",className:`acc-form-control ${i.email?"error":""}`,value:s.email,onChange:o,disabled:!t,placeholder:"Enter your email address"}),i.email&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.email})]}),e.jsxs("div",{className:"acc-form-group",style:{marginBottom:"var(--spacing-4)"},children:[e.jsxs("label",{className:"acc-form-label",children:[e.jsx("i",{className:"bi bi-telephone",style:{marginRight:"8px"}}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",className:`acc-form-control ${i.phone?"error":""}`,value:s.phone,onChange:o,disabled:!t,placeholder:"Enter your phone number"}),i.phone&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.phone})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--spacing-4)",marginBottom:"var(--spacing-4)"},children:[e.jsxs("div",{className:"acc-form-group",children:[e.jsxs("label",{className:"acc-form-label",children:[e.jsx("i",{className:"bi bi-calendar-event",style:{marginRight:"8px"}}),"Date of Birth"]}),e.jsx("input",{type:"date",name:"dateOfBirth",className:"acc-form-control",value:s.dateOfBirth,onChange:o,disabled:!t})]}),e.jsxs("div",{className:"acc-form-group",children:[e.jsx("label",{className:"acc-form-label",children:"Gender"}),e.jsxs("select",{name:"gender",className:"acc-form-control",value:s.gender,onChange:o,disabled:!t,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{className:"acc-form-group",children:[e.jsx("label",{className:"acc-form-label",children:"About Me"}),e.jsx("textarea",{name:"bio",className:`acc-form-control ${i.bio?"error":""}`,rows:4,value:s.bio,onChange:o,disabled:!t,placeholder:"Tell us a bit about yourself...",style:{resize:"vertical",minHeight:"100px"}}),i.bio&&e.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:i.bio}),e.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:s.bio.length>500?"var(--danger-color)":"var(--text-color-medium)",marginTop:"var(--spacing-1)"},children:[s.bio.length,"/500 characters"]})]}),t&&e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-2)",marginTop:"var(--spacing-4)",paddingTop:"var(--spacing-4)",borderTop:"1px solid var(--border-color)"},children:[e.jsx("button",{type:"button",className:"acc-btn acc-btn-outline",onClick:w,disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",className:"acc-btn acc-btn-primary",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid currentColor",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"8px"}}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-check-lg",style:{marginRight:"8px"}}),"Save Changes"]})})]})]})})]}),e.jsxs("div",{className:"acc-card",style:{marginBottom:"var(--spacing-6)"},children:[e.jsx("div",{className:"acc-card-header",children:e.jsxs("h3",{className:"acc-card-title",children:[e.jsx("i",{className:"bi bi-info-circle"}),"Account Information"]})}),e.jsx("div",{className:"acc-card-body",children:e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Account ID"}),e.jsxs("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)",fontFamily:"monospace"},children:["#",a.id]})]}),e.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",backgroundColor:"var(--success-color)",color:"var(--white)",borderRadius:"var(--border-radius)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)"},children:"Active"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Member Since"}),e.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:a.created_at?new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})})]})})]}),e.jsxs("div",{className:"acc-card",children:[e.jsx("div",{className:"acc-card-header",children:e.jsxs("h3",{className:"acc-card-title",children:[e.jsx("i",{className:"bi bi-shield-lock"}),"Security Settings"]})}),e.jsx("div",{className:"acc-card-body",children:e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Change Password"}),e.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Update your password to keep your account secure"})]}),e.jsxs(P,{to:"/account/change-password",className:"acc-btn acc-btn-outline acc-btn-sm",children:[e.jsx("i",{className:"bi bi-key",style:{marginRight:"6px"}}),"Change"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Email Verification"}),e.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Verify your email address for added security"})]}),e.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",backgroundColor:a.verification?"var(--success-color)":"var(--warning-color)",color:"var(--white)",borderRadius:"var(--border-radius)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)"},children:a.verification?"Verified":"Pending"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[e.jsxs("div",{children:[e.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Account Deletion"}),e.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Permanently delete your account and all data"})]}),e.jsxs("button",{className:"acc-btn acc-btn-outline acc-btn-sm",style:{borderColor:"var(--danger-color)",color:"var(--danger-color)"},onClick:()=>v.info("Account deletion feature coming soon"),children:[e.jsx("i",{className:"bi bi-trash",style:{marginRight:"6px"}}),"Delete"]})]})]})})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):e.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--warning-bg)",borderColor:"var(--warning-border)",color:"var(--warning-color)"},children:e.jsxs("div",{className:"acc-card-body",children:[e.jsx("i",{className:"bi bi-exclamation-triangle",style:{marginRight:"8px"}}),"Please log in to view your profile."]})})};export{A as default};
