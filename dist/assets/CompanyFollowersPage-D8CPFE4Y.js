import{r as t,j as e,al as v,K as k,af as P,ab as _,ac as L,z as T,aj as g,ak as E,p as A,am as f,an as I,ao as x}from"./index-D3ojX_Fy.js";import{C as R}from"./CompanyFollow-D1pHJkoV.js";const z={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:10}},N=t.memo(({follow:r,idx:p,currentPage:n,rowLoading:o})=>{var s;const i=(n-1)*10+(p+1),c=`/cv-bank/${r.user_id}`;return e.jsxs("tr",{children:[e.jsx("td",{style:{width:"50px"},children:o?e.jsx(v,{size:"sm",animation:"border"}):i}),e.jsx("td",{children:o?e.jsx("span",{children:"Loading..."}):e.jsx("a",{href:c,target:"_blank",rel:"noreferrer",children:r.user_text||r.user_id})}),e.jsx("td",{children:o?e.jsx("span",{children:"Loading..."}):((s=r.created_at)==null?void 0:s.split("T")[0])||"N/A"})]})});N.displayName="CompanyFollowerRow";const K=()=>{const[r,p]=t.useState([]),[n,o]=t.useState(!1),[i,c]=t.useState(""),[s,u]=t.useState(1),[d,w]=t.useState(1),[h,C]=t.useState(""),[F]=t.useState([]),j=t.useCallback(async(a,l)=>{o(!0),c("");try{const m={};l&&(m.search=l);const b=await R.fetchCompanyFollowers(a,m);p(b.data),u(b.current_page),w(b.last_page)}catch(m){console.error(m),c("Failed to load company followers."),k.error("Error loading data.")}finally{o(!1)}},[]);t.useEffect(()=>{j(s,h)},[j,s,h]);const S=a=>{a.preventDefault(),u(1),j(1,h)},y=a=>{a>=1&&a<=d&&u(a)};return e.jsxs(e.Fragment,{children:[e.jsx(P,{breadcrumbs:[{title:"Company Followers",path:"/company-followers",isActive:!0}],children:"Company Followers"}),e.jsx(_,{}),e.jsx(L,{children:e.jsx(T.div,{className:"container-fluid py-4 card shadow-sm",variants:z,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs("div",{className:"card-body",children:[e.jsx(g,{onSubmit:S,className:"row mb-3",autoComplete:"off",children:e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("span",{className:"input-group-text bg-primary text-white",children:e.jsx(E,{})}),e.jsx(g.Control,{type:"text",placeholder:"Search by user's name...",value:h,onChange:a=>C(a.target.value)}),e.jsx(A,{type:"submit",variant:"primary",children:"Search"})]})})}),n&&e.jsx("div",{className:"text-center py-5",children:e.jsx(v,{animation:"border",variant:"primary"})}),!n&&i&&e.jsx(f,{variant:"danger",children:i}),!n&&!i&&r.length===0&&e.jsx(f,{variant:"info",className:"text-center",children:"No followers found."}),!n&&!i&&r.length>0&&e.jsx("div",{className:"table-responsive",children:e.jsxs(I,{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"50px"},children:"#"}),e.jsx("th",{children:"Follower Name"}),e.jsx("th",{children:"Followed On"})]})}),e.jsx("tbody",{children:r.map((a,l)=>e.jsx(N,{follow:a,idx:l,currentPage:s,rowLoading:F.includes(l)},a.id))})]})}),!n&&!i&&d>1&&e.jsxs(x,{className:"mt-4 justify-content-center",children:[e.jsx(x.Prev,{onClick:()=>y(s-1),disabled:s<=1,children:"Previous"}),Array.from({length:d},(a,l)=>l+1).map(a=>e.jsx(x.Item,{active:a===s,onClick:()=>y(a),children:a},a)),e.jsx(x.Next,{onClick:()=>y(s+1),disabled:s>=d,children:"Next"})]})]})})})]})};export{K as default};
