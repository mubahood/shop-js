var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,t=(a,r,s)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,o=(e,a)=>{for(var r in a||(a={}))i.call(a,r)&&t(e,r,a[r]);if(s)for(var r of s(a))n.call(a,r)&&t(e,r,a[r]);return e},c=(e,s)=>a(e,r(s));import{j as l}from"./vendor-bootstrap-D-I_tXzc.js";import{r as d}from"./vendor-react-BEzjZhyF.js";import{L as m,T as h,A as u,Y as g}from"./index-UqLlkq5m.js";import{a as p,u as v}from"./vendor-redux-Dj4qHuPE.js";const b=()=>{const{user:e}=p((e=>e.auth)),a=v(),[r,s]=d.useState(!1),[i,n]=d.useState(!1),[t,b]=d.useState(!1),[f,x]=d.useState({}),[j,y]=d.useState({first_name:"",last_name:"",email:"",phone_number:"",dob:"",sex:"",intro:""});d.useEffect((()=>{if(e){const a={first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",phone_number:e.phone_number_1||"",dob:e.date_of_birth||"",sex:e.sex||"",intro:e.intro||""};y(a)}}),[e]);const _=e=>{const{name:a,value:r}=e.target;y((e=>c(o({},e),{[a]:r}))),f[a]&&x((e=>{const r=o({},e);return delete r[a],r}))},N=(e,a)=>{switch(e){case"first_name":if(!a.trim()||a.trim().length<2)return"First name is required and must be at least 2 characters";break;case"last_name":if(!a.trim()||a.trim().length<2)return"Last name is required and must be at least 2 characters";break;case"phone_number":if(!a.trim()||a.trim().length<5)return"Phone number is required and must be at least 5 characters";break;case"email":if(a&&a.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.trim()))return"Please enter a valid email address"}break;case"intro":if(a&&a.length>500)return"Bio cannot exceed 500 characters"}return null};return e?l.jsxs("div",{className:"acc-profile-container",children:[l.jsxs("div",{className:"acc-page-header",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"acc-page-title",children:"My Profile"}),l.jsx("p",{className:"acc-page-subtitle",children:"Manage your personal information and account settings"})]}),!r&&l.jsx("div",{style:{display:"flex",gap:"var(--spacing-2)"},children:l.jsxs("button",{className:"acc-btn acc-btn-outline",onClick:()=>{x({}),s(!0)},children:[l.jsx("i",{className:"bi bi-pencil",style:{marginRight:"8px"}}),"Edit Profile"]})})]}),i&&l.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--success-bg)",borderColor:"var(--success-border)",color:"var(--success-color)",marginBottom:"var(--spacing-4)"},children:l.jsxs("div",{className:"acc-card-body",children:[l.jsx("i",{className:"bi bi-check-circle",style:{marginRight:"8px"}}),"Profile updated successfully!"]})}),l.jsxs("div",{className:"acc-card",style:{marginBottom:"var(--spacing-6)"},children:[l.jsx("div",{className:"acc-card-header",children:l.jsxs("h3",{className:"acc-card-title",children:[l.jsx("i",{className:"bi bi-person-circle"}),"Personal Information"]})}),l.jsx("div",{className:"acc-card-body",children:l.jsxs("form",{onSubmit:r=>{return i=void 0,t=null,l=function*(){if(r.preventDefault(),!(null==e?void 0:e.id))return void h.error("User not found");const i={},t=N("first_name",j.first_name);t&&(i.first_name=t);const l=N("last_name",j.last_name);l&&(i.last_name=l);const d=N("phone_number",j.phone_number);d&&(i.phone_number=d);const m=N("email",j.email);m&&(i.email=m);const p=N("intro",j.intro);if(p&&(i.intro=p),Object.keys(i).length>0)return x(i),void h.error("Please fix the validation errors");x({}),b(!0);try{const e={first_name:j.first_name.trim(),last_name:j.last_name.trim(),phone_number:j.phone_number.trim(),email:j.email.trim()||void 0,dob:j.dob||void 0,sex:j.sex||void 0,intro:j.intro.trim()||void 0};if(!e.first_name||e.first_name.length<2)return x((e=>c(o({},e),{first_name:"First name is required and must be at least 2 characters"}))),void h.error("Please check the form data");if(!e.last_name||e.last_name.length<2)return x((e=>c(o({},e),{last_name:"Last name is required and must be at least 2 characters"}))),void h.error("Please check the form data");if(!e.phone_number||e.phone_number.length<5)return x((e=>c(o({},e),{phone_number:"Phone number is required and must be at least 5 characters"}))),void h.error("Please check the form data");const r=yield u.updateProfile(e);r&&a(g(r)),s(!1),n(!0),setTimeout((()=>n(!1)),5e3)}catch(v){}finally{b(!1)}},new Promise(((e,a)=>{var s=e=>{try{o(l.next(e))}catch(r){a(r)}},n=e=>{try{o(l.throw(e))}catch(r){a(r)}},o=a=>a.done?e(a.value):Promise.resolve(a.value).then(s,n);o((l=l.apply(i,t)).next())}));var i,t,l},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"var(--spacing-4)",marginBottom:"var(--spacing-4)"},children:[l.jsxs("div",{className:"acc-form-group",children:[l.jsx("label",{className:"acc-form-label",children:"First Name"}),l.jsx("input",{type:"text",name:"first_name",className:"acc-form-control "+(f.first_name?"error":""),value:j.first_name,onChange:_,disabled:!r,placeholder:"Enter your first name"}),f.first_name&&l.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:f.first_name})]}),l.jsxs("div",{className:"acc-form-group",children:[l.jsx("label",{className:"acc-form-label",children:"Last Name"}),l.jsx("input",{type:"text",name:"last_name",className:"acc-form-control "+(f.last_name?"error":""),value:j.last_name,onChange:_,disabled:!r,placeholder:"Enter your last name"}),f.last_name&&l.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:f.last_name})]})]}),l.jsxs("div",{className:"acc-form-group",style:{marginBottom:"var(--spacing-4)"},children:[l.jsxs("label",{className:"acc-form-label",children:[l.jsx("i",{className:"bi bi-envelope",style:{marginRight:"8px"}}),"Email Address"]}),l.jsx("input",{type:"email",name:"email",className:"acc-form-control "+(f.email?"error":""),value:j.email,onChange:_,disabled:!r,placeholder:"Enter your email address"}),f.email&&l.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:f.email})]}),l.jsxs("div",{className:"acc-form-group",style:{marginBottom:"var(--spacing-4)"},children:[l.jsxs("label",{className:"acc-form-label",children:[l.jsx("i",{className:"bi bi-telephone",style:{marginRight:"8px"}}),"Phone Number"]}),l.jsx("input",{type:"tel",name:"phone_number",className:"acc-form-control "+(f.phone_number?"error":""),value:j.phone_number,onChange:_,disabled:!r,placeholder:"Enter your phone number"}),f.phone_number&&l.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:f.phone_number})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--spacing-4)",marginBottom:"var(--spacing-4)"},children:[l.jsxs("div",{className:"acc-form-group",children:[l.jsxs("label",{className:"acc-form-label",children:[l.jsx("i",{className:"bi bi-calendar-event",style:{marginRight:"8px"}}),"Date of Birth"]}),l.jsx("input",{type:"date",name:"dob",className:"acc-form-control",value:j.dob,onChange:_,disabled:!r})]}),l.jsxs("div",{className:"acc-form-group",children:[l.jsx("label",{className:"acc-form-label",children:"Gender"}),l.jsxs("select",{name:"sex",className:"acc-form-control",value:j.sex,onChange:_,disabled:!r,children:[l.jsx("option",{value:"",children:"Select Gender"}),l.jsx("option",{value:"male",children:"Male"}),l.jsx("option",{value:"female",children:"Female"}),l.jsx("option",{value:"other",children:"Other"}),l.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]}),l.jsxs("div",{className:"acc-form-group",children:[l.jsx("label",{className:"acc-form-label",children:"About Me"}),l.jsx("textarea",{name:"intro",className:"acc-form-control "+(f.intro?"error":""),rows:4,value:j.intro,onChange:_,disabled:!r,placeholder:"Tell us a bit about yourself...",style:{resize:"vertical",minHeight:"100px"}}),f.intro&&l.jsx("div",{style:{color:"var(--danger-color)",fontSize:"var(--font-size-xs)",marginTop:"var(--spacing-1)"},children:f.intro}),l.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:j.intro.length>500?"var(--danger-color)":"var(--text-color-medium)",marginTop:"var(--spacing-1)"},children:[j.intro.length,"/500 characters"]})]}),r&&l.jsxs("div",{style:{display:"flex",gap:"var(--spacing-2)",marginTop:"var(--spacing-4)",paddingTop:"var(--spacing-4)",borderTop:"1px solid var(--border-color)"},children:[l.jsx("button",{type:"button",className:"acc-btn acc-btn-outline",onClick:()=>{e&&y({first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",phone_number:e.phone_number_1||"",dob:e.date_of_birth||"",sex:e.sex||"",intro:e.intro||""}),x({}),s(!1)},disabled:t,children:"Cancel"}),l.jsx("button",{type:"submit",className:"acc-btn acc-btn-primary",disabled:t,children:t?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid currentColor",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"8px"}}),"Saving..."]}):l.jsxs(l.Fragment,{children:[l.jsx("i",{className:"bi bi-check-lg",style:{marginRight:"8px"}}),"Save Changes"]})})]})]})})]}),l.jsxs("div",{className:"acc-card",style:{marginBottom:"var(--spacing-6)"},children:[l.jsx("div",{className:"acc-card-header",children:l.jsxs("h3",{className:"acc-card-title",children:[l.jsx("i",{className:"bi bi-info-circle"}),"Account Information"]})}),l.jsx("div",{className:"acc-card-body",children:l.jsxs("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[l.jsxs("div",{children:[l.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Account ID"}),l.jsxs("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)",fontFamily:"monospace"},children:["#",e.id]})]}),l.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",backgroundColor:"var(--success-color)",color:"var(--white)",borderRadius:"var(--border-radius)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)"},children:"Active"})]}),l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:l.jsxs("div",{children:[l.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Member Since"}),l.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:e.created_at?new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})})]})})]}),l.jsxs("div",{className:"acc-card",children:[l.jsx("div",{className:"acc-card-header",children:l.jsxs("h3",{className:"acc-card-title",children:[l.jsx("i",{className:"bi bi-shield-lock"}),"Security Settings"]})}),l.jsx("div",{className:"acc-card-body",children:l.jsxs("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[l.jsxs("div",{children:[l.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Change Password"}),l.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Update your password to keep your account secure"})]}),l.jsxs(m,{to:"/account/change-password",className:"acc-btn acc-btn-outline acc-btn-sm",children:[l.jsx("i",{className:"bi bi-key",style:{marginRight:"6px"}}),"Change"]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[l.jsxs("div",{children:[l.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Email Verification"}),l.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Verify your email address for added security"})]}),l.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",backgroundColor:e.verification?"var(--success-color)":"var(--warning-color)",color:"var(--white)",borderRadius:"var(--border-radius)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)"},children:e.verification?"Verified":"Pending"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--spacing-3)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",backgroundColor:"var(--background-light)"},children:[l.jsxs("div",{children:[l.jsx("h6",{style:{margin:0,fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)"},children:"Account Deletion"}),l.jsx("p",{style:{margin:0,fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)"},children:"Permanently delete your account and all data"})]}),l.jsxs("button",{className:"acc-btn acc-btn-outline acc-btn-sm",style:{borderColor:"var(--danger-color)",color:"var(--danger-color)"},onClick:()=>h.info("Account deletion feature coming soon"),children:[l.jsx("i",{className:"bi bi-trash",style:{marginRight:"6px"}}),"Delete"]})]})]})})]}),l.jsx("style",{children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]}):l.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--warning-bg)",borderColor:"var(--warning-border)",color:"var(--warning-color)"},children:l.jsxs("div",{className:"acc-card-body",children:[l.jsx("i",{className:"bi bi-exclamation-triangle",style:{marginRight:"8px"}}),"Please log in to view your profile."]})})};export{b as default};
