import{j as e}from"./vendor-bootstrap-5Pmslw1a.js";import{r}from"./vendor-react-CSr-5IoM.js";import{L as a}from"./vendor-router-B5VXrYKF.js";import{O as t}from"./OrderModel-Rs9Csn1_.js";import{f as i}from"./index-C65PC_RV.js";import{a as s}from"./vendor-redux-DhM9Zidd.js";import{T as o}from"./index-a--6voad.js";import"./vendor-query-BwsiJSmJ.js";const n=()=>{const[n,c]=r.useState([]),[l,d]=r.useState(!0),{user:m}=s((e=>e.auth));r.useEffect((()=>{m&&m.id&&g()}),[m]);const g=()=>{return e=void 0,r=null,a=function*(){try{d(!0);const e=yield t.fetchItems();c(e)}catch(e){o.error("Failed to load orders")}finally{d(!1)}},new Promise(((t,i)=>{var s=e=>{try{n(a.next(e))}catch(r){i(r)}},o=e=>{try{n(a.throw(e))}catch(r){i(r)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,o);n((a=a.apply(e,r)).next())}));var e,r,a},v=r=>{const a={0:{text:"Pending",color:"var(--danger-color)"},1:{text:"Processing",color:"var(--warning-color)"},2:{text:"Completed",color:"var(--success-color)"},3:{text:"Canceled",color:"var(--text-color-medium)"},4:{text:"Failed",color:"var(--danger-color)"}}[r]||{text:r,color:"var(--text-color-medium)"};return e.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)",borderRadius:"var(--border-radius)",backgroundColor:a.color,color:"var(--white)",display:"inline-block"},children:a.text})};return m&&m.id?e.jsxs("div",{className:"acc-orders-container",children:[e.jsxs("div",{className:"acc-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"acc-page-title",children:"My Orders"}),e.jsx("p",{className:"acc-page-subtitle",children:"Track and manage your orders"})]}),e.jsxs("button",{className:"acc-btn acc-btn-outline",onClick:g,children:[e.jsx("i",{className:"bi bi-arrow-clockwise",style:{marginRight:"8px"}}),"Refresh"]})]}),l?e.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-12) var(--spacing-4)"},children:[e.jsx("div",{style:{display:"inline-block",width:"40px",height:"40px",border:"4px solid var(--border-color)",borderTop:"4px solid var(--primary-color)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{marginTop:"var(--spacing-3)",color:"var(--text-color-medium)",fontSize:"var(--font-size-base)"},children:"Loading orders..."})]}):e.jsx(e.Fragment,{children:0===n.length?e.jsx("div",{className:"acc-card",children:e.jsx("div",{className:"acc-card-body",children:e.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-12) var(--spacing-4)"},children:[e.jsx("i",{className:"bi bi-bag-x",style:{fontSize:"4rem",color:"var(--text-color-medium)",marginBottom:"var(--spacing-4)",display:"block"}}),e.jsx("h3",{style:{fontSize:"var(--font-size-xl)",fontWeight:"var(--font-weight-semibold)",color:"var(--text-color)",marginBottom:"var(--spacing-2)"},children:"No Orders Yet"}),e.jsx("p",{style:{color:"var(--text-color-medium)",marginBottom:"var(--spacing-4)",fontSize:"var(--font-size-base)",maxWidth:"400px",margin:"0 auto var(--spacing-4)"},children:"You haven't placed any orders yet. Start shopping to see your order history here."}),e.jsx(a,{to:"/products",className:"acc-btn acc-btn-primary",children:"Start Shopping"})]})})}):e.jsx("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:n.map((r=>{const t=(e=>{try{return JSON.parse(e||"[]")}catch(r){return[]}})(r.items);return e.jsxs("div",{className:"acc-card",children:[e.jsx("div",{className:"acc-card-header",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-semibold)",margin:0,marginBottom:"var(--spacing-1)"},children:["Order #",r.id]}),e.jsxs("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)",margin:0},children:["Placed on ",(s=r.created_at,s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A")]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[v(r.order_state),e.jsx("div",{style:{fontSize:"var(--font-size-lg)",fontWeight:"var(--font-weight-bold)",color:"var(--text-color)",marginTop:"var(--spacing-1)"},children:i(parseFloat(r.payable_amount||r.order_total||"0"))})]})]})}),e.jsxs("div",{className:"acc-card-body",children:[t&&t.length>0&&e.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[e.jsxs("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-2)"},children:["Items (",t.length,")"]}),e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-2)"},children:[t.slice(0,3).map(((r,a)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"var(--spacing-2)",backgroundColor:"var(--background-light)",borderRadius:"var(--border-radius)",gap:"var(--spacing-3)"},children:[e.jsx("div",{style:{width:"50px",height:"50px",backgroundColor:"var(--white)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("i",{className:"bi bi-box",style:{color:"var(--text-color-medium)"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",margin:0,marginBottom:"var(--spacing-1)"},children:r.product_name||r.name||"Product"}),e.jsxs("p",{style:{fontSize:"var(--font-size-xs)",color:"var(--text-color-medium)",margin:0},children:["Qty: ",r.quantity||1," Ã— ",i(parseFloat(r.price||"0"))]})]}),e.jsx("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)"},children:i(parseFloat(r.quantity||"1")*parseFloat(r.price||"0"))})]},a))),t.length>3&&e.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-2)",color:"var(--text-color-medium)",fontSize:"var(--font-size-sm)"},children:["+",t.length-3," more items"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-2)",paddingTop:"var(--spacing-3)",borderTop:"1px solid var(--border-color)",flexWrap:"wrap"},children:[e.jsx(a,{to:`/account/orders/${r.id}`,className:"acc-btn acc-btn-outline acc-btn-sm",children:"View Details"}),!r.isPaid()&&("0"===r.order_state||"1"===r.order_state)&&e.jsxs(a,{to:`/payment/${r.id}`,className:"acc-btn acc-btn-primary acc-btn-sm",style:{display:"flex",alignItems:"center",gap:"var(--spacing-1)",textDecoration:"none"},children:[e.jsx("i",{className:"bi bi-credit-card"}),"Pay Now"]}),"2"===r.order_state&&e.jsx("button",{className:"acc-btn acc-btn-outline acc-btn-sm",children:"Reorder"}),("0"===r.order_state||"1"===r.order_state)&&e.jsx("button",{className:"acc-btn acc-btn-outline acc-btn-sm",children:"Track Order"})]})]})]},r.id);var s}))})}),n.length>0&&e.jsx("div",{style:{textAlign:"center",marginTop:"var(--spacing-6)"},children:e.jsx("button",{className:"acc-btn acc-btn-outline",children:"Load More Orders"})}),e.jsx("style",{children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]}):e.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--warning-bg)",borderColor:"var(--warning-border)",color:"var(--warning-color)"},children:e.jsxs("div",{className:"acc-card-body",children:[e.jsx("i",{className:"bi bi-exclamation-triangle",style:{marginRight:"8px"}}),"Please log in to view your orders."]})})};export{n as default};
