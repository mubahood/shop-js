import{E as _,G as C,r as c,T as m,j as r}from"./index-BUlTi-RG.js";import{O as k}from"./OrderModel-Bz2mqQjx.js";import{f as o}from"./index-CYgkVBfu.js";import{M as s}from"./Modal-Xcd6dAg7.js";import{B as x}from"./Button-D1awEB0c.js";import"./useMergedRefs-C3O5QAvR.js";import"./useEventCallback-CUECKx-A.js";import"./useWillUnmount-Dn5-hY3T.js";import"./TransitionWrapper-BLmPPUNA.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";import"./useWindow-C31nRb8G.js";import"./useEventCallback-CmmpuWZE.js";import"./DataKey-COGXBUcQ.js";import"./useMergedRefs-DhY38gtg.js";import"./CloseButton-Vs17wP1E.js";import"./divWithClassName-BurpA6jg.js";import"./Button-CKTz88uJ.js";const J=()=>{const{orderId:g}=_(),n=C(),[e,u]=c.useState(null),[f,v]=c.useState(!0),[y,p]=c.useState(!1),l="+256 701 070684";c.useEffect(()=>{g&&b()},[g]);const b=async()=>{try{v(!0);const a=(await k.fetchItems()).find(i=>i.id.toString()===g);a?u(a):(m.error("Order not found"),n("/account/orders"))}catch(t){console.error("Error loading order details:",t),m.error("Failed to load order details"),n("/account/orders")}finally{v(!1)}},j=t=>{const i={0:{text:"Pending",color:"var(--danger-color)"},1:{text:"Processing",color:"var(--warning-color)"},2:{text:"Completed",color:"var(--success-color)"},3:{text:"Canceled",color:"var(--text-color-medium)"},4:{text:"Failed",color:"var(--danger-color)"}}[t]||{text:t,color:"var(--text-color-medium)"};return r.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)",borderRadius:"var(--border-radius)",backgroundColor:i.color,color:"var(--white)",display:"inline-block"},children:i.text})},h=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",z=t=>{try{return JSON.parse(t||"[]")}catch{return[]}},N=t=>{if(!t)return"";if(!t.trim().startsWith("{")&&!t.trim().startsWith("["))return t.trim();try{const a=JSON.parse(t);return typeof a=="object"&&a!==null?a.order_details||"":t.trim()}catch{return t.trim()}},S=()=>{p(!0)},w=()=>{const a=`tel:${l.replace(/\s+/g,"")}`;try{window.open(a,"_self")}catch{navigator.clipboard.writeText(l).then(()=>{m.success("Phone number copied to clipboard!")}).catch(()=>{m.info(`Please call: ${l}`)})}};if(f)return r.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-12) var(--spacing-4)"},children:[r.jsx("div",{style:{display:"inline-block",width:"40px",height:"40px",border:"4px solid var(--border-color)",borderTop:"4px solid var(--primary-color)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("p",{style:{marginTop:"var(--spacing-3)",color:"var(--text-color-medium)",fontSize:"var(--font-size-base)"},children:"Loading order details..."})]});if(!e)return r.jsx("div",{className:"acc-card",style:{backgroundColor:"var(--warning-bg)",borderColor:"var(--warning-border)",color:"var(--warning-color)"},children:r.jsxs("div",{className:"acc-card-body",children:[r.jsx("i",{className:"bi bi-exclamation-triangle",style:{marginRight:"8px"}}),"Order not found.",r.jsx("button",{onClick:()=>n("/account/orders"),style:{background:"none",border:"none",color:"var(--primary-color)",textDecoration:"underline",cursor:"pointer",marginLeft:"4px"},children:"Return to orders"})]})});const d=z(e.items);return r.jsxs("div",{className:"acc-order-details-container",children:[r.jsxs("div",{className:"acc-page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"acc-page-title",children:"Order Details"}),r.jsxs("p",{className:"acc-page-subtitle",children:["Invoice #",e.id," - ",h(e.created_at)]})]}),r.jsxs("button",{className:"acc-btn acc-btn-outline",onClick:()=>n("/account/orders"),children:[r.jsx("i",{className:"bi bi-arrow-left",style:{marginRight:"8px"}}),"Back to Orders"]})]}),r.jsx("div",{className:"acc-card",style:{marginBottom:"var(--spacing-6)"},children:r.jsx("div",{className:"acc-card-body",children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"var(--spacing-6)",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"var(--font-weight-bold)",color:"var(--text-color)",marginBottom:"var(--spacing-2)"},children:o(parseFloat(e.payable_amount||e.order_total||"0"))}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-3)",marginBottom:"var(--spacing-2)"},children:[r.jsx("span",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color-medium)"},children:"PAYMENT STATUS:"}),r.jsx("span",{style:{padding:"var(--spacing-1) var(--spacing-2)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-medium)",borderRadius:"var(--border-radius)",backgroundColor:e.isPaid()?"var(--success-color)":"var(--danger-color)",color:"var(--white)"},children:e.isPaid()?"Paid":"Not Paid"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-3)"},children:[r.jsx("span",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color-medium)"},children:"ORDER STATUS:"}),j(e.order_state)]})]}),!e.isPaid()&&r.jsx("div",{children:r.jsxs("button",{className:"acc-btn acc-btn-primary acc-btn-lg",onClick:S,style:{padding:"var(--spacing-3) var(--spacing-6)",fontSize:"var(--font-size-lg)"},children:[r.jsx("i",{className:"bi bi-credit-card",style:{marginRight:"8px"}}),"PAY ORDER"]})})]})})}),r.jsxs("div",{style:{display:"grid",gap:"var(--spacing-4)"},children:[d&&d.length>0&&r.jsxs("div",{className:"acc-card",children:[r.jsx("div",{className:"acc-card-header",children:r.jsxs("h3",{className:"acc-card-title",children:[r.jsx("i",{className:"bi bi-bag-check"}),"Order Items (",d.length,")"]})}),r.jsxs("div",{className:"acc-card-body",children:[r.jsx("div",{style:{display:"grid",gap:"var(--spacing-3)"},children:d.map((t,a)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"var(--spacing-3)",backgroundColor:"var(--background-light)",borderRadius:"var(--border-radius)",gap:"var(--spacing-3)"},children:[r.jsx("div",{style:{width:"60px",height:"60px",backgroundColor:"var(--white)",border:"1px solid var(--border-color)",borderRadius:"var(--border-radius)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx("i",{className:"bi bi-box",style:{color:"var(--text-color-medium)",fontSize:"1.5rem"}})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("h6",{style:{fontSize:"var(--font-size-base)",fontWeight:"var(--font-weight-medium)",margin:0,marginBottom:"var(--spacing-1)"},children:t.product_name||t.name||"Product"}),r.jsxs("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-color-medium)",margin:0},children:["Quantity: ",t.quantity||1," Ã— ",o(parseFloat(t.price||"0"))]})]}),r.jsx("div",{style:{fontSize:"var(--font-size-lg)",fontWeight:"var(--font-weight-bold)",color:"var(--text-color)"},children:o(parseFloat(t.quantity||"1")*parseFloat(t.price||"0"))})]},a))}),r.jsxs("div",{style:{marginTop:"var(--spacing-4)",paddingTop:"var(--spacing-4)",borderTop:"1px solid var(--border-color)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"var(--spacing-2)"},children:[r.jsx("span",{children:"Order Items Total:"}),r.jsx("span",{children:o(parseFloat(e.order_total||"0"))})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"var(--spacing-2)"},children:[r.jsx("span",{children:"Delivery Cost:"}),r.jsx("span",{children:o(parseFloat(e.delivery_amount||"0"))})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"var(--spacing-2)",borderTop:"1px solid var(--border-color)",fontSize:"var(--font-size-lg)",fontWeight:"var(--font-weight-bold)"},children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:o(parseFloat(e.payable_amount||e.order_total||"0"))})]})]})]})]}),r.jsxs("div",{className:"acc-card",children:[r.jsx("div",{className:"acc-card-header",children:r.jsxs("h3",{className:"acc-card-title",children:[r.jsx("i",{className:"bi bi-geo-alt"}),"Delivery Information"]})}),r.jsx("div",{className:"acc-card-body",children:r.jsxs("div",{style:{display:"grid",gap:"var(--spacing-3)"},children:[r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Delivery Address:"}),r.jsxs("p",{style:{color:"var(--text-color-medium)",margin:0,lineHeight:"1.5"},children:[e.delivery_address_text||e.customer_address||"Not specified",e.delivery_address_details&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),e.delivery_address_details]})]})]}),r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Delivery Method:"}),r.jsx("p",{style:{color:"var(--text-color-medium)",margin:0},children:e.delivery_method||"Standard Delivery"})]}),r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Delivery Cost:"}),r.jsx("p",{style:{color:"var(--text-color-medium)",margin:0,fontWeight:"var(--font-weight-medium)"},children:o(parseFloat(e.delivery_amount||"0"))})]})]})})]}),r.jsxs("div",{className:"acc-card",children:[r.jsx("div",{className:"acc-card-header",children:r.jsxs("h3",{className:"acc-card-title",children:[r.jsx("i",{className:"bi bi-person-lines-fill"}),"Contact Information"]})}),r.jsx("div",{className:"acc-card-body",children:r.jsxs("div",{style:{display:"grid",gap:"var(--spacing-3)"},children:[r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Customer Name:"}),r.jsx("p",{style:{color:"var(--text-color-medium)",margin:0},children:e.customer_name||"Not specified"})]}),r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Email:"}),r.jsx("p",{style:{color:"var(--text-color-medium)",margin:0},children:e.mail||"Not specified"})]}),r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Phone:"}),r.jsxs("p",{style:{color:"var(--text-color-medium)",margin:0},children:[e.customer_phone_number_1||"Not specified",e.customer_phone_number_2&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),"Alt: ",e.customer_phone_number_2]})]})]}),(()=>{const t=N(e.order_details||"");return t&&t.trim()?r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Order Notes:"}),r.jsx("p",{style:{color:"var(--text-color-medium)",margin:0,padding:"var(--spacing-3)",backgroundColor:"var(--background-light)",borderRadius:"var(--border-radius)",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:t})]}):null})()]})})]}),r.jsxs("div",{className:"acc-card",children:[r.jsx("div",{className:"acc-card-header",children:r.jsxs("h3",{className:"acc-card-title",children:[r.jsx("i",{className:"bi bi-file-earmark-text"}),"Invoice Information"]})}),r.jsx("div",{className:"acc-card-body",children:r.jsxs("div",{style:{display:"grid",gap:"var(--spacing-3)"},children:[r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Invoice Number:"}),r.jsxs("p",{style:{color:"var(--text-color-medium)",margin:0,fontFamily:"monospace",fontSize:"var(--font-size-lg)"},children:["INVOICE-",e.id]})]}),r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Invoice Date:"}),r.jsx("p",{style:{color:"var(--text-color-medium)",margin:0},children:h(e.created_at)})]}),e.date_updated&&e.date_updated!==e.created_at&&r.jsxs("div",{children:[r.jsx("h6",{style:{fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)",color:"var(--text-color)",marginBottom:"var(--spacing-1)"},children:"Last Updated:"}),r.jsx("p",{style:{color:"var(--text-color-medium)",margin:0},children:h(e.date_updated)})]})]})})]})]}),r.jsxs(s,{show:y,onHide:()=>p(!1),centered:!0,size:"lg",children:[r.jsx(s.Header,{closeButton:!0,style:{backgroundColor:"var(--primary-color)",color:"white",borderBottom:"none"},children:r.jsx(s.Title,{style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Payment Instructions"})}),r.jsx(s.Body,{style:{background:"linear-gradient(135deg, var(--primary-color)10, white)",padding:"2rem"},children:r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("h3",{style:{fontSize:"1.75rem",fontWeight:"bold",color:"var(--primary-color)",marginBottom:"1.25rem"},children:"Complete Your Order"}),r.jsx("p",{style:{fontSize:"1.125rem",color:"var(--text-color)",lineHeight:"1.6",marginBottom:"1.5rem",maxWidth:"500px",margin:"0 auto 1.5rem"},children:"For a secure and smooth payment process, please contact us directly at the number below. Our team will assist you with all payment details."}),e&&r.jsxs("div",{style:{backgroundColor:"var(--background-light)",padding:"1rem",borderRadius:"var(--border-radius)",marginBottom:"1.5rem",border:"1px solid var(--border-color)"},children:[r.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:"var(--font-weight-medium)"},children:["Order #",e.id]}),r.jsxs("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"var(--primary-color)"},children:["Total: ",o(parseFloat(e.payable_amount||e.order_total||"0"))]})]}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--primary-color)",marginBottom:"1.5rem",padding:"0.75rem",backgroundColor:"var(--background-light)",borderRadius:"var(--border-radius)",border:"2px solid var(--primary-color)",letterSpacing:"1px"},children:l}),r.jsxs(x,{onClick:w,style:{backgroundColor:"var(--primary-color)",borderColor:"var(--primary-color)",padding:"0.75rem 2rem",fontSize:"1.125rem",fontWeight:"600",borderRadius:"var(--border-radius)",display:"inline-flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.3s ease"},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.2)"},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},children:[r.jsx("i",{className:"bi bi-telephone-fill",style:{fontSize:"1.2rem"}}),"Call to Pay"]}),r.jsx("p",{style:{marginTop:"1rem",fontSize:"0.875rem",color:"var(--text-color-medium)",fontStyle:"italic"},children:"Our payment team is available to assist you with secure payment options"})]})}),r.jsx(s.Footer,{style:{borderTop:"1px solid var(--border-color)",padding:"1rem 2rem"},children:r.jsx(x,{variant:"outline-secondary",onClick:()=>p(!1),style:{padding:"0.5rem 1.5rem",borderRadius:"var(--border-radius)"},children:"Close"})})]}),r.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};export{J as default};
